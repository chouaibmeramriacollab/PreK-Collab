{"version":3,"file":"static/chunks/1866-9802b309169cfac7.js","mappings":"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","sources":["webpack://_N_E/./src/hooks/affine/use-reference-link-helper.ts","webpack://_N_E/./src/hooks/affine/use-block-suite-meta-helper.ts","webpack://_N_E/./src/hooks/use-router-helper.ts","webpack://_N_E/../../packages/component/src/components/page-list/components/favorite-tag.tsx","webpack://_N_E/../../packages/component/src/components/page-list/styles.ts","webpack://_N_E/../../packages/component/src/components/page-list/components/title-cell.tsx","webpack://_N_E/../../packages/component/src/components/page-list/operation-menu-items/copy-link.tsx","webpack://_N_E/../../packages/component/src/components/page-list/operation-menu-items/disable-public-sharing.tsx","webpack://_N_E/../../packages/component/src/components/page-list/operation-menu-items/export.tsx","webpack://_N_E/../../packages/component/src/components/page-list/operation-menu-items/move-to-trash.tsx","webpack://_N_E/../../packages/component/src/components/page-list/operation-menu-items/index.ts","webpack://_N_E/../../packages/component/src/components/page-list/operation-cell.tsx","webpack://_N_E/../../packages/component/src/components/page-list/utils.tsx","webpack://_N_E/../../packages/component/src/components/page-list/use-date-group.tsx","webpack://_N_E/../../packages/component/src/components/page-list/all-pages-body.tsx","webpack://_N_E/../../packages/component/src/components/card/block-card/styles.css.ts","webpack://_N_E/../../packages/component/src/components/card/block-card/index.tsx","webpack://_N_E/../../packages/component/src/components/page-list/components/new-page-buttton.tsx","webpack://_N_E/../../packages/component/src/components/page-list/mobile.tsx","webpack://_N_E/../../packages/component/src/components/page-list/use-sorter.ts","webpack://_N_E/../../packages/component/src/components/page-list/all-page.tsx","webpack://_N_E/../../packages/component/src/components/page-list/filter/index.css.ts","webpack://_N_E/../../packages/component/src/components/page-list/filter/logical/typesystem.ts","webpack://_N_E/../../packages/component/src/components/page-list/filter/logical/custom-type.ts","webpack://_N_E/../../packages/component/src/components/page-list/filter/logical/matcher.ts","webpack://_N_E/../../packages/component/src/components/page-list/filter/shared-types.tsx","webpack://_N_E/../../packages/component/src/components/page-list/filter/vars.tsx","webpack://_N_E/../../packages/component/src/components/page-list/filter/eval.ts","webpack://_N_E/../../packages/component/src/components/date-picker/index.css.ts","webpack://_N_E/../../packages/component/src/components/date-picker/date-picker.tsx","webpack://_N_E/../../packages/component/src/components/date-picker/index.ts","webpack://_N_E/../../packages/component/src/components/page-list/filter/literal-matcher.tsx","webpack://_N_E/../../packages/component/src/components/page-list/filter/condition.tsx","webpack://_N_E/../../packages/component/src/components/page-list/filter/filter-list.tsx","webpack://_N_E/../../packages/component/src/components/page-list/filter/index.ts","webpack://_N_E/../../packages/component/src/components/page-list/use-all-page-setting.ts","webpack://_N_E/../../packages/component/src/components/page-list/view/view-list.css.ts","webpack://_N_E/../../packages/component/src/components/page-list/view/create-view.tsx","webpack://_N_E/../../packages/component/src/components/page-list/view/view-list.tsx","webpack://_N_E/../../packages/component/src/components/page-list/view/index.ts","webpack://_N_E/../../packages/component/src/components/page-list/index.tsx","webpack://_N_E/../../packages/component/src/components/share-menu/disable-public-link/style.ts","webpack://_N_E/../../packages/component/src/components/share-menu/disable-public-link/index.tsx","webpack://_N_E/../../packages/hooks/src/use-block-suite-workspace-page-is-public.ts","webpack://_N_E/../../packages/component/src/components/share-menu/index.css.ts","webpack://_N_E/../../packages/component/src/components/share-menu/export.tsx","webpack://_N_E/../../packages/component/src/components/share-menu/styles.ts","webpack://_N_E/../../packages/component/src/components/share-menu/share-page.tsx","webpack://_N_E/../../packages/component/src/components/share-menu/share-workspace.tsx","webpack://_N_E/../../packages/component/src/components/share-menu/share-menu.tsx","webpack://_N_E/../../packages/component/src/components/share-menu/index.tsx","webpack://_N_E/../../packages/hooks/src/use-block-suite-page-meta.ts","webpack://_N_E/../../node_modules/@vanilla-extract/webpack-plugin/extracted.js?97b3","webpack://_N_E/../../node_modules/@vanilla-extract/webpack-plugin/extracted.js?8203","webpack://_N_E/../../node_modules/@vanilla-extract/webpack-plugin/extracted.js?88cd","webpack://_N_E/../../node_modules/@vanilla-extract/webpack-plugin/extracted.js?7c47","webpack://_N_E/../../node_modules/@vanilla-extract/webpack-plugin/extracted.js?4b13","webpack://_N_E/ignored|/Users/himself65/Code/old-affine/node_modules/shiki/dist|fs","webpack://_N_E/ignored|/Users/himself65/Code/old-affine/node_modules/shiki/dist|path","webpack://_N_E/<anon>"],"sourcesContent":["import { useCallback } from 'react';\n\nimport type { BlockSuiteWorkspace } from '../../shared';\n\nexport function useReferenceLinkHelper(\n  blockSuiteWorkspace: BlockSuiteWorkspace\n) {\n  const addReferenceLink = useCallback(\n    (pageId: string, referenceId: string) => {\n      const page = blockSuiteWorkspace?.getPage(pageId);\n      if (!page) {\n        return;\n      }\n      const text = page.Text.fromDelta([\n        {\n          insert: ' ',\n          attributes: {\n            reference: {\n              type: 'Subpage',\n              pageId: referenceId,\n            },\n          },\n        },\n      ]);\n      const [frame] = page.getBlockByFlavour('affine:frame');\n\n      frame && page.addBlock('affine:paragraph', { text }, frame.id);\n    },\n    [blockSuiteWorkspace]\n  );\n  const removeReferenceLink = useCallback(\n    (deleteId: string) => {\n      blockSuiteWorkspace.indexer.backlink.removeSubpageNode(\n        blockSuiteWorkspace,\n        deleteId\n      );\n    },\n    [blockSuiteWorkspace]\n  );\n\n  return {\n    addReferenceLink,\n    removeReferenceLink,\n  };\n}\n","import {\n  useBlockSuitePageMeta,\n  usePageMetaHelper,\n} from '@toeverything/hooks/use-block-suite-page-meta';\nimport { useCallback } from 'react';\n\nimport type { BlockSuiteWorkspace } from '../../shared';\nimport { useReferenceLinkHelper } from './use-reference-link-helper';\n\nexport function useBlockSuiteMetaHelper(\n  blockSuiteWorkspace: BlockSuiteWorkspace\n) {\n  const { setPageMeta, getPageMeta } = usePageMetaHelper(blockSuiteWorkspace);\n  const { addReferenceLink, removeReferenceLink } =\n    useReferenceLinkHelper(blockSuiteWorkspace);\n  const metas = useBlockSuitePageMeta(blockSuiteWorkspace);\n\n  const addToFavorite = useCallback(\n    (pageId: string) => {\n      setPageMeta(pageId, {\n        favorite: true,\n      });\n    },\n    [setPageMeta]\n  );\n  const removeFromFavorite = useCallback(\n    (pageId: string) => {\n      setPageMeta(pageId, {\n        favorite: false,\n      });\n    },\n    [setPageMeta]\n  );\n  const toggleFavorite = useCallback(\n    (pageId: string) => {\n      const { favorite } = getPageMeta(pageId) ?? {};\n      setPageMeta(pageId, {\n        favorite: !favorite,\n      });\n    },\n    [getPageMeta, setPageMeta]\n  );\n\n  // TODO-Doma\n  // \"Remove\" may cause ambiguity here. Consider renaming as \"moveToTrash\".\n  const removeToTrash = useCallback(\n    (pageId: string, isRoot = true) => {\n      const parentMeta = metas.find(m => m.subpageIds?.includes(pageId));\n      const { subpageIds = [] } = getPageMeta(pageId) ?? {};\n\n      subpageIds.forEach(id => {\n        removeToTrash(id, false);\n      });\n\n      setPageMeta(pageId, {\n        trash: true,\n        trashDate: +new Date(),\n        trashRelate: isRoot ? parentMeta?.id : undefined,\n      });\n\n      // Just the trash root need delete its id from parent\n      if (parentMeta && isRoot) {\n        removeReferenceLink(pageId);\n      }\n    },\n    [getPageMeta, metas, removeReferenceLink, setPageMeta]\n  );\n\n  const restoreFromTrash = useCallback(\n    (pageId: string) => {\n      const { subpageIds = [], trashRelate } = getPageMeta(pageId) ?? {};\n\n      if (trashRelate) {\n        addReferenceLink(trashRelate, pageId);\n      }\n\n      setPageMeta(pageId, {\n        trash: false,\n        trashDate: undefined,\n        trashRelate: undefined,\n      });\n      subpageIds.forEach(id => {\n        restoreFromTrash(id);\n      });\n    },\n    [addReferenceLink, getPageMeta, setPageMeta]\n  );\n\n  const permanentlyDeletePage = useCallback(\n    (pageId: string) => {\n      blockSuiteWorkspace.removePage(pageId);\n    },\n    [blockSuiteWorkspace]\n  );\n\n  /**\n   * see {@link useBlockSuiteWorkspacePageIsPublic}\n   */\n  const publicPage = useCallback(\n    (pageId: string) => {\n      setPageMeta(pageId, {\n        isPublic: true,\n      });\n    },\n    [setPageMeta]\n  );\n\n  /**\n   * see {@link useBlockSuiteWorkspacePageIsPublic}\n   */\n  const cancelPublicPage = useCallback(\n    (pageId: string) => {\n      setPageMeta(pageId, {\n        isPublic: false,\n      });\n    },\n    [setPageMeta]\n  );\n\n  return {\n    publicPage,\n    cancelPublicPage,\n\n    addToFavorite,\n    removeFromFavorite,\n    toggleFavorite,\n\n    removeToTrash,\n    restoreFromTrash,\n    permanentlyDeletePage,\n  };\n}\n","import type { WorkspaceSubPath } from '@affine/env/workspace';\nimport type { NextRouter } from 'next/router';\nimport { useCallback } from 'react';\n\nexport enum RouteLogic {\n  REPLACE = 'replace',\n  PUSH = 'push',\n}\n\nexport function useRouterHelper(router: NextRouter) {\n  const jumpToPage = useCallback(\n    (\n      workspaceId: string,\n      pageId: string,\n      logic: RouteLogic = RouteLogic.PUSH\n    ) => {\n      return router[logic]({\n        pathname: `/workspace/[workspaceId]/[pageId]`,\n        query: {\n          workspaceId,\n          pageId,\n        },\n      });\n    },\n    [router]\n  );\n  const jumpToPublicWorkspacePage = useCallback(\n    (\n      workspaceId: string,\n      pageId: string,\n      logic: RouteLogic = RouteLogic.PUSH\n    ) => {\n      return router[logic]({\n        pathname: `/public-workspace/[workspaceId]/[pageId]`,\n        query: {\n          workspaceId,\n          pageId,\n        },\n      });\n    },\n    [router]\n  );\n  const jumpToSubPath = useCallback(\n    (\n      workspaceId: string,\n      subPath: WorkspaceSubPath,\n      logic: RouteLogic = RouteLogic.PUSH\n    ): Promise<boolean> => {\n      return router[logic]({\n        pathname: `/workspace/[workspaceId]/${subPath}`,\n        query: {\n          workspaceId,\n        },\n      });\n    },\n    [router]\n  );\n  const openPage = useCallback(\n    (workspaceId: string, pageId: string) => {\n      const isPublicWorkspace =\n        router.pathname.split('/')[1] === 'public-workspace';\n      if (isPublicWorkspace) {\n        return jumpToPublicWorkspacePage(workspaceId, pageId);\n      } else {\n        return jumpToPage(workspaceId, pageId);\n      }\n    },\n    [jumpToPage, jumpToPublicWorkspacePage, router.pathname]\n  );\n\n  return {\n    jumpToPage,\n    jumpToPublicWorkspacePage,\n    jumpToSubPath,\n    openPage,\n  };\n}\n","import { useAFFiNEI18N } from '@affine/i18n/hooks';\nimport { FavoritedIcon, FavoriteIcon } from '@blocksuite/icons';\nimport { forwardRef } from 'react';\n\nimport type { IconButtonProps } from '../../..';\nimport { IconButton, Tooltip } from '../../..';\n\nexport const FavoriteTag = forwardRef<\n  HTMLButtonElement,\n  {\n    active: boolean;\n  } & Omit<IconButtonProps, 'children'>\n>(({ active, onClick, ...props }, ref) => {\n  const t = useAFFiNEI18N();\n  return (\n    <Tooltip\n      content={active ? t['Favorited']() : t['Favorite']()}\n      placement=\"top-start\"\n    >\n      <IconButton\n        ref={ref}\n        iconSize={[20, 20]}\n        style={{\n          color: active\n            ? 'var(--affine-primary-color)'\n            : 'var(--affine-icon-color)',\n        }}\n        onClick={e => {\n          e.stopPropagation();\n          onClick?.(e);\n        }}\n        {...props}\n      >\n        {active ? (\n          <FavoritedIcon data-testid=\"favorited-icon\" />\n        ) : (\n          <FavoriteIcon />\n        )}\n      </IconButton>\n    </Tooltip>\n  );\n});\nFavoriteTag.displayName = 'FavoriteTag';\n","import { displayFlex, styled } from '../../styles';\nimport { Content } from '../../ui/layout/content';\nimport { TableBodyRow } from '../../ui/table/table-row';\n\nexport const StyledTableContainer = styled('div')(({ theme }) => {\n  return {\n    height: '100%',\n    padding: '0 32px 180px 32px',\n    maxWidth: '100%',\n    overflowY: 'scroll',\n    [theme.breakpoints.down('sm')]: {\n      padding: '52px 0px',\n      'tr > td:first-of-type': {\n        borderTopLeftRadius: '0px',\n        borderBottomLeftRadius: '0px',\n      },\n      'tr > td:last-of-type': {\n        borderTopRightRadius: '0px',\n        borderBottomRightRadius: '0px',\n      },\n    },\n  };\n});\n\n/**\n * @deprecated\n */\nexport const StyledTitleWrapper = styled('div')(() => {\n  return {\n    ...displayFlex('flex-start', 'center'),\n    a: {\n      color: 'inherit',\n    },\n    'a:visited': {\n      color: 'unset',\n    },\n    'a:hover': {\n      color: 'var(--affine-primary-color)',\n    },\n  };\n});\nexport const StyledTitleLink = styled('div')(() => {\n  return {\n    ...displayFlex('flex-start', 'center'),\n    color: 'var(--affine-text-primary-color)',\n    '>svg': {\n      fontSize: '24px',\n      marginRight: '12px',\n      color: 'var(--affine-icon-color)',\n    },\n  };\n});\n\nexport const StyledTitleContentWrapper = styled('div')(() => {\n  return {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'flex-start',\n    width: '100%',\n    overflow: 'hidden',\n  };\n});\n\nexport const StyledTitlePreview = styled(Content)(() => {\n  return {\n    fontWeight: 400,\n    fontSize: 'var(--affine-font-xs)',\n    maxWidth: '100%',\n  };\n});\n\nexport const StyledTableBodyRow = styled(TableBodyRow)(() => {\n  return {\n    cursor: 'pointer',\n    '.favorite-button': {\n      visibility: 'hidden',\n    },\n    '&:hover': {\n      '.favorite-button': {\n        visibility: 'visible',\n      },\n    },\n  };\n});\n","import React, { useCallback } from 'react';\n\nimport type { TableCellProps } from '../../..';\nimport { Content, TableCell } from '../../..';\nimport {\n  StyledTitleContentWrapper,\n  StyledTitleLink,\n  StyledTitlePreview,\n} from '../styles';\n\ntype TitleCellProps = {\n  icon: JSX.Element;\n  text: string;\n  desc?: string;\n  suffix?: JSX.Element;\n  /**\n   * Customize the children of the cell\n   * @param element\n   * @returns\n   */\n  children?: (element: React.ReactElement) => React.ReactNode;\n} & Omit<TableCellProps, 'children'>;\n\nexport const TitleCell = React.forwardRef<HTMLTableCellElement, TitleCellProps>(\n  ({ icon, text, desc, suffix, children: render, ...props }, ref) => {\n    const renderChildren = useCallback(() => {\n      const childElement = (\n        <>\n          <StyledTitleLink>\n            {icon}\n            <StyledTitleContentWrapper>\n              <Content\n                ellipsis={true}\n                maxWidth=\"100%\"\n                color=\"inherit\"\n                fontSize=\"var(--affine-font-sm)\"\n                weight=\"600\"\n                lineHeight=\"18px\"\n              >\n                {text}\n              </Content>\n              {desc && (\n                <StyledTitlePreview\n                  ellipsis={true}\n                  color=\"var(--affine-text-secondary-color)\"\n                >\n                  {desc}\n                </StyledTitlePreview>\n              )}\n            </StyledTitleContentWrapper>\n          </StyledTitleLink>\n          {suffix}\n        </>\n      );\n\n      return render ? render(childElement) : childElement;\n    }, [desc, icon, render, suffix, text]);\n\n    return (\n      <TableCell ref={ref} {...props}>\n        {renderChildren()}\n      </TableCell>\n    );\n  }\n);\nTitleCell.displayName = 'TitleCell';\n","import { useAFFiNEI18N } from '@affine/i18n/hooks';\nimport { CopyIcon } from '@blocksuite/icons';\nimport { useCallback } from 'react';\n\nimport { MenuItem, toast } from '../../..';\nimport type { CommonMenuItemProps } from './types';\n\nexport const CopyLink = ({ onItemClick, onSelect }: CommonMenuItemProps) => {\n  const t = useAFFiNEI18N();\n\n  const copyUrl = useCallback(() => {\n    navigator.clipboard\n      .writeText(window.location.href)\n      .then(() => {\n        toast(t['Copied link to clipboard']());\n      })\n      .catch(err => {\n        // TODO add error toast here\n        console.error(err);\n      });\n  }, [t]);\n\n  return (\n    <MenuItem\n      data-testid=\"copy-link\"\n      onClick={() => {\n        copyUrl();\n        onItemClick?.();\n        onSelect?.();\n      }}\n      icon={<CopyIcon />}\n    >\n      {t['Copy Link']()}\n    </MenuItem>\n  );\n};\n","import { useAFFiNEI18N } from '@affine/i18n/hooks';\nimport { ShareIcon } from '@blocksuite/icons';\n\nimport { MenuItem, styled } from '../../../';\nimport { PublicLinkDisableModal } from '../../share-menu';\nimport type { CommonMenuItemProps } from './types';\n\nconst StyledMenuItem = styled(MenuItem)(({ theme }) => {\n  return {\n    div: {\n      color: theme.palette.error.main,\n      svg: {\n        color: theme.palette.error.main,\n      },\n    },\n    ':hover': {\n      div: {\n        color: theme.palette.error.main,\n        svg: {\n          color: theme.palette.error.main,\n        },\n      },\n    },\n  };\n});\nexport const DisablePublicSharing = ({\n  onSelect,\n  onItemClick,\n  ...props\n}: CommonMenuItemProps) => {\n  const t = useAFFiNEI18N();\n  return (\n    <>\n      <StyledMenuItem\n        {...props}\n        onClick={() => {\n          onItemClick?.();\n          onSelect?.();\n        }}\n        style={{ color: 'red' }}\n        icon={<ShareIcon />}\n      >\n        {t['Disable Public Sharing']()}\n      </StyledMenuItem>\n    </>\n  );\n};\n\nDisablePublicSharing.DisablePublicSharingModal = PublicLinkDisableModal;\n","import { useAFFiNEI18N } from '@affine/i18n/hooks';\nimport type { PageBlockModel } from '@blocksuite/blocks';\nimport { ContentParser } from '@blocksuite/blocks/content-parser';\nimport {\n  ArrowRightSmallIcon,\n  ExportIcon,\n  ExportToHtmlIcon,\n  ExportToMarkdownIcon,\n  ExportToPdfIcon,\n} from '@blocksuite/icons';\nimport { useCallback, useRef } from 'react';\n\nimport { Menu, MenuItem } from '../../..';\nimport type { CommonMenuItemProps } from './types';\n\nconst ExportToPdfMenuItem = ({\n  onSelect,\n}: CommonMenuItemProps<{ type: 'pdf' }>) => {\n  const t = useAFFiNEI18N();\n  const contentParserRef = useRef<ContentParser>();\n  const { currentEditor } = globalThis;\n  const onClickDownloadPDF = useCallback(() => {\n    if (!currentEditor) {\n      return;\n    }\n    const contentParser =\n      contentParserRef.current ??\n      (contentParserRef.current = new ContentParser(currentEditor.page));\n\n    window.apis?.export\n      .savePDFFileAs(\n        (currentEditor.page.root as PageBlockModel).title.toString()\n      )\n      .then(result => {\n        if (result !== undefined) {\n          return;\n        }\n        return contentParser.exportPdf();\n      })\n      .then(() => {\n        onSelect?.({ type: 'pdf' });\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }, [currentEditor, onSelect]);\n  if (currentEditor && currentEditor.mode === 'page') {\n    return (\n      <MenuItem\n        data-testid=\"export-to-pdf\"\n        onClick={onClickDownloadPDF}\n        icon={<ExportToPdfIcon />}\n      >\n        {t['Export to PDF']()}\n      </MenuItem>\n    );\n  }\n  return null;\n};\n\nconst ExportToHtmlMenuItem = ({\n  onSelect,\n}: CommonMenuItemProps<{ type: 'html' }>) => {\n  const t = useAFFiNEI18N();\n  const contentParserRef = useRef<ContentParser>();\n  const { currentEditor } = globalThis;\n  const onClickExportHtml = useCallback(() => {\n    if (!currentEditor) {\n      return;\n    }\n    if (!contentParserRef.current) {\n      contentParserRef.current = new ContentParser(currentEditor.page);\n    }\n    contentParserRef.current.exportHtml().catch(err => {\n      console.error(err);\n    });\n    onSelect?.({ type: 'html' });\n  }, [onSelect, currentEditor]);\n  return (\n    <>\n      <MenuItem\n        data-testid=\"export-to-html\"\n        onClick={onClickExportHtml}\n        icon={<ExportToHtmlIcon />}\n      >\n        {t['Export to HTML']()}\n      </MenuItem>\n    </>\n  );\n};\n\n// const ExportToPngMenuItem = ({\n//   onSelect,\n// }: CommonMenuItemProps<{ type: 'png' }>) => {\n//   const t = useAFFiNEI18N();\n//   const contentParserRef = useRef<ContentParser>();\n//   return (\n//     <>\n//       {globalThis.currentEditor!.mode === 'page' && (\n//         <MenuItem\n//           data-testid=\"export-to-png\"\n//           onClick={() => {\n//             if (!contentParserRef.current) {\n//               contentParserRef.current = new ContentParser(\n//                 globalThis.currentEditor!.page\n//               );\n//             }\n//             contentParserRef.current.exportPng();\n//             onSelect?.({ type: 'png' });\n//           }}\n//           icon={<ExportToPngIcon />}\n//         >\n//           {t['Export to PNG']()}\n//         </MenuItem>\n//       )}\n//     </>\n//   );\n// };\n\nconst ExportToMarkdownMenuItem = ({\n  onSelect,\n}: CommonMenuItemProps<{ type: 'markdown' }>) => {\n  const t = useAFFiNEI18N();\n  const contentParserRef = useRef<ContentParser>();\n  const { currentEditor } = globalThis;\n  const onClickExportMarkdown = useCallback(() => {\n    if (!currentEditor) {\n      return;\n    }\n    if (!contentParserRef.current) {\n      contentParserRef.current = new ContentParser(currentEditor.page);\n    }\n    contentParserRef.current.exportMarkdown().catch(err => {\n      console.error(err);\n    });\n    onSelect?.({ type: 'markdown' });\n  }, [onSelect, currentEditor]);\n  return (\n    <>\n      <MenuItem\n        data-testid=\"export-to-markdown\"\n        onClick={onClickExportMarkdown}\n        icon={<ExportToMarkdownIcon />}\n      >\n        {t['Export to Markdown']()}\n      </MenuItem>\n    </>\n  );\n};\n\nexport const Export = ({\n  onItemClick,\n}: CommonMenuItemProps<{ type: 'markdown' | 'html' | 'pdf' | 'png' }>) => {\n  const t = useAFFiNEI18N();\n  return (\n    <Menu\n      width={248}\n      placement=\"left\"\n      trigger=\"click\"\n      content={\n        <>\n          <ExportToPdfMenuItem></ExportToPdfMenuItem>\n          <ExportToHtmlMenuItem></ExportToHtmlMenuItem>\n          {/* <ExportToPngMenuItem></ExportToPngMenuItem> */}\n          <ExportToMarkdownMenuItem></ExportToMarkdownMenuItem>\n        </>\n      }\n    >\n      <MenuItem\n        data-testid=\"export-menu\"\n        icon={<ExportIcon />}\n        endIcon={<ArrowRightSmallIcon />}\n        onClick={e => {\n          e.stopPropagation();\n          onItemClick?.();\n        }}\n      >\n        {t.Export()}\n      </MenuItem>\n    </Menu>\n  );\n};\n","import { useAFFiNEI18N } from '@affine/i18n/hooks';\nimport { DeleteTemporarilyIcon } from '@blocksuite/icons';\n\nimport type { ConfirmProps } from '../../..';\nimport { Confirm, MenuItem } from '../../..';\nimport type { CommonMenuItemProps } from './types';\n\nexport const MoveToTrash = ({\n  onSelect,\n  onItemClick,\n  ...props\n}: CommonMenuItemProps) => {\n  const t = useAFFiNEI18N();\n\n  return (\n    <>\n      <MenuItem\n        {...props}\n        onClick={() => {\n          onItemClick?.();\n          onSelect?.();\n        }}\n        icon={<DeleteTemporarilyIcon />}\n      >\n        {t['Move to Trash']()}\n      </MenuItem>\n    </>\n  );\n};\n\nconst ConfirmModal = ({\n  title,\n  ...confirmModalProps\n}: {\n  title: string;\n} & ConfirmProps) => {\n  const t = useAFFiNEI18N();\n\n  return (\n    <Confirm\n      title={t['Delete page?']()}\n      content={t['will be moved to Trash']({\n        title: title || 'Untitled',\n      })}\n      confirmText={t.Delete()}\n      confirmType=\"danger\"\n      {...confirmModalProps}\n    />\n  );\n};\n\nMoveToTrash.ConfirmModal = ConfirmModal;\n","export * from './copy-link';\nexport * from './disable-public-sharing';\nexport * from './export';\n// export * from './MoveTo';\nexport * from './move-to-trash';\n","import { useAFFiNEI18N } from '@affine/i18n/hooks';\nimport {\n  DeletePermanentlyIcon,\n  FavoritedIcon,\n  FavoriteIcon,\n  MoreVerticalIcon,\n  OpenInNewIcon,\n  ResetIcon,\n} from '@blocksuite/icons';\nimport type React from 'react';\nimport { useState } from 'react';\n\nimport {\n  Confirm,\n  FlexWrapper,\n  IconButton,\n  Menu,\n  MenuItem,\n  Tooltip,\n} from '../../..';\nimport { DisablePublicSharing, MoveToTrash } from './operation-menu-items';\n\nexport type OperationCellProps = {\n  title: string;\n  favorite: boolean;\n  isPublic: boolean;\n  onOpenPageInNewTab: () => void;\n  onToggleFavoritePage: () => void;\n  onRemoveToTrash: () => void;\n  onDisablePublicSharing: () => void;\n};\n\nexport const OperationCell: React.FC<OperationCellProps> = ({\n  title,\n  favorite,\n  isPublic,\n  onOpenPageInNewTab,\n  onToggleFavoritePage,\n  onRemoveToTrash,\n  onDisablePublicSharing,\n}) => {\n  const t = useAFFiNEI18N();\n  const [open, setOpen] = useState(false);\n  const [openDisableShared, setOpenDisableShared] = useState(false);\n\n  const OperationMenu = (\n    <>\n      {isPublic && (\n        <DisablePublicSharing\n          data-testid=\"disable-public-sharing\"\n          onItemClick={() => {\n            setOpenDisableShared(true);\n          }}\n        />\n      )}\n      <MenuItem\n        onClick={onToggleFavoritePage}\n        icon={\n          favorite ? (\n            <FavoritedIcon style={{ color: 'var(--affine-primary-color)' }} />\n          ) : (\n            <FavoriteIcon />\n          )\n        }\n      >\n        {favorite ? t['Remove from favorites']() : t['Add to Favorites']()}\n      </MenuItem>\n      {!environment.isDesktop && (\n        <MenuItem onClick={onOpenPageInNewTab} icon={<OpenInNewIcon />}>\n          {t['Open in new tab']()}\n        </MenuItem>\n      )}\n      <MoveToTrash\n        data-testid=\"move-to-trash\"\n        onItemClick={() => {\n          setOpen(true);\n        }}\n      />\n    </>\n  );\n  return (\n    <>\n      <FlexWrapper alignItems=\"center\" justifyContent=\"center\">\n        <Menu\n          content={OperationMenu}\n          placement=\"bottom\"\n          disablePortal={true}\n          trigger=\"click\"\n        >\n          <IconButton data-testid=\"page-list-operation-button\">\n            <MoreVerticalIcon />\n          </IconButton>\n        </Menu>\n      </FlexWrapper>\n      <MoveToTrash.ConfirmModal\n        open={open}\n        title={title}\n        onConfirm={() => {\n          onRemoveToTrash();\n          setOpen(false);\n        }}\n        onClose={() => {\n          setOpen(false);\n        }}\n        onCancel={() => {\n          setOpen(false);\n        }}\n      />\n      <DisablePublicSharing.DisablePublicSharingModal\n        onConfirmDisable={onDisablePublicSharing}\n        open={openDisableShared}\n        onClose={() => {\n          setOpenDisableShared(false);\n        }}\n      />\n    </>\n  );\n};\n\nexport type TrashOperationCellProps = {\n  onPermanentlyDeletePage: () => void;\n  onRestorePage: () => void;\n  onOpenPage: () => void;\n};\n\nexport const TrashOperationCell: React.FC<TrashOperationCellProps> = ({\n  onPermanentlyDeletePage,\n  onRestorePage,\n}) => {\n  const t = useAFFiNEI18N();\n  const [open, setOpen] = useState(false);\n  return (\n    <FlexWrapper>\n      <Tooltip content={t['Restore it']()} placement=\"top-start\">\n        <IconButton\n          style={{ marginRight: '12px' }}\n          onClick={() => {\n            onRestorePage();\n          }}\n        >\n          <ResetIcon />\n        </IconButton>\n      </Tooltip>\n      <Tooltip content={t['Delete permanently']()} placement=\"top-start\">\n        <IconButton\n          onClick={() => {\n            setOpen(true);\n          }}\n        >\n          <DeletePermanentlyIcon />\n        </IconButton>\n      </Tooltip>\n      <Confirm\n        title={t['Delete permanently?']()}\n        content={t['TrashButtonGroupDescription']()}\n        confirmText={t['Delete']()}\n        confirmType=\"danger\"\n        open={open}\n        onConfirm={() => {\n          onPermanentlyDeletePage();\n          setOpen(false);\n        }}\n        onClose={() => {\n          setOpen(false);\n        }}\n        onCancel={() => {\n          setOpen(false);\n        }}\n      />\n    </FlexWrapper>\n  );\n};\n","import { useMediaQuery, useTheme } from '@mui/material';\n\nexport const useIsSmallDevices = () => {\n  const theme = useTheme();\n  const isSmallDevices = useMediaQuery(theme.breakpoints.down(900));\n  return isSmallDevices;\n};\n\nexport function isToday(date: Date): boolean {\n  const today = new Date();\n  return (\n    date.getDate() == today.getDate() &&\n    date.getMonth() == today.getMonth() &&\n    date.getFullYear() == today.getFullYear()\n  );\n}\n\nexport function isYesterday(date: Date): boolean {\n  const yesterday = new Date();\n  yesterday.setDate(yesterday.getDate() - 1);\n  return (\n    date.getFullYear() === yesterday.getFullYear() &&\n    date.getMonth() === yesterday.getMonth() &&\n    date.getDate() === yesterday.getDate()\n  );\n}\n\nexport function isLastWeek(date: Date): boolean {\n  const today = new Date();\n  const lastWeek = new Date(\n    today.getFullYear(),\n    today.getMonth(),\n    today.getDate() - 7\n  );\n  return date >= lastWeek && date < today;\n}\n\nexport function isLastMonth(date: Date): boolean {\n  const today = new Date();\n  const lastMonth = new Date(\n    today.getFullYear(),\n    today.getMonth() - 1,\n    today.getDate()\n  );\n  return date >= lastMonth && date < today;\n}\n\nexport function isLastYear(date: Date): boolean {\n  const today = new Date();\n  const lastYear = new Date(\n    today.getFullYear() - 1,\n    today.getMonth(),\n    today.getDate()\n  );\n  return date >= lastYear && date < today;\n}\n\nexport const formatDate = (date: Date): string => {\n  // yyyy-mm-dd MM-DD HH:mm\n  // const year = date.getFullYear();\n  const month = (date.getMonth() + 1).toString().padStart(2, '0');\n  const day = date.getDate().toString().padStart(2, '0');\n  const hours = date.getHours().toString().padStart(2, '0');\n  const minutes = date.getMinutes().toString().padStart(2, '0');\n  if (isToday(date)) {\n    // HH:mm\n    return `${hours}:${minutes}`;\n  }\n  // MM-DD HH:mm\n  return `${month}-${day} ${hours}:${minutes}`;\n};\n","import { useAFFiNEI18N } from '@affine/i18n/hooks';\n\nimport type { DateKey, ListData } from './type';\nimport {\n  isLastMonth,\n  isLastWeek,\n  isLastYear,\n  isToday,\n  isYesterday,\n} from './utils';\n\nexport const useDateGroup = ({\n  data,\n  key,\n}: {\n  data: ListData[];\n  key?: DateKey;\n}) => {\n  const t = useAFFiNEI18N();\n  if (!key) {\n    return data.map(item => ({ ...item, groupName: '' }));\n  }\n\n  const fallbackGroup = {\n    id: 'earlier',\n    label: t['com.affine.earlier'](),\n    match: (_date: Date) => true,\n  };\n\n  const groups = [\n    {\n      id: 'today',\n      label: t['com.affine.today'](),\n      match: (date: Date) => isToday(date),\n    },\n    {\n      id: 'yesterday',\n      label: t['com.affine.yesterday'](),\n      match: (date: Date) => isYesterday(date) && !isToday(date),\n    },\n    {\n      id: 'last7Days',\n      label: t['com.affine.last7Days'](),\n      match: (date: Date) => isLastWeek(date) && !isYesterday(date),\n    },\n    {\n      id: 'last30Days',\n      label: t['com.affine.last30Days'](),\n      match: (date: Date) => isLastMonth(date) && !isLastWeek(date),\n    },\n    {\n      id: 'currentYear',\n      label: t['com.affine.currentYear'](),\n      match: (date: Date) => isLastYear(date) && !isLastMonth(date),\n    },\n  ] as const;\n\n  return data.map(item => {\n    const group = groups.find(group => group.match(item[key])) ?? fallbackGroup;\n    return {\n      ...item,\n      groupName: group.label,\n    };\n  });\n};\n","import { useAFFiNEI18N } from '@affine/i18n/hooks';\nimport { useDraggable } from '@dnd-kit/core';\nimport type { ReactNode } from 'react';\nimport { Fragment } from 'react';\n\nimport { styled } from '../../styles';\nimport { TableBody, TableCell } from '../../ui/table';\nimport { FavoriteTag } from './components/favorite-tag';\nimport { TitleCell } from './components/title-cell';\nimport { OperationCell } from './operation-cell';\nimport { StyledTableBodyRow } from './styles';\nimport type { DateKey, DraggableTitleCellData, ListData } from './type';\nimport { useDateGroup } from './use-date-group';\nimport { formatDate, useIsSmallDevices } from './utils';\n\nexport const GroupRow = ({ children }: { children: ReactNode }) => {\n  return (\n    <StyledTableBodyRow>\n      <TableCell\n        style={{\n          color: 'var(--affine-text-secondary-color)',\n          fontSize: 'var(--affine-font-sm)',\n          background: 'initial',\n          cursor: 'default',\n        }}\n      >\n        {children}\n      </TableCell>\n    </StyledTableBodyRow>\n  );\n};\n\nexport const AllPagesBody = ({\n  isPublicWorkspace,\n  data,\n  groupKey,\n}: {\n  isPublicWorkspace: boolean;\n  data: ListData[];\n  groupKey?: DateKey;\n}) => {\n  const t = useAFFiNEI18N();\n  const isSmallDevices = useIsSmallDevices();\n  const dataWithGroup = useDateGroup({ data, key: groupKey });\n  return (\n    <TableBody style={{ overflowY: 'auto', height: '100%' }}>\n      {dataWithGroup.map(\n        (\n          {\n            groupName,\n            pageId,\n            title,\n            preview,\n            icon,\n            isPublicPage,\n            favorite,\n            createDate,\n            updatedDate,\n            onClickPage,\n            bookmarkPage,\n            onOpenPageInNewTab,\n            removeToTrash,\n            onDisablePublicSharing,\n          },\n          index\n        ) => {\n          const displayTitle = title || t['Untitled']();\n          return (\n            <Fragment key={pageId}>\n              {groupName &&\n                (index === 0 ||\n                  dataWithGroup[index - 1].groupName !== groupName) && (\n                  <GroupRow>{groupName}</GroupRow>\n                )}\n              <StyledTableBodyRow data-testid={`page-list-item-${pageId}`}>\n                <DraggableTitleCell\n                  pageId={pageId}\n                  draggableData={{\n                    pageId,\n                    pageTitle: displayTitle,\n                    icon,\n                  }}\n                  icon={icon}\n                  text={displayTitle}\n                  desc={preview}\n                  data-testid=\"title\"\n                  onClick={onClickPage}\n                />\n                <TableCell\n                  data-testid=\"created-date\"\n                  ellipsis={true}\n                  hidden={isSmallDevices}\n                  onClick={onClickPage}\n                  style={{ fontSize: 'var(--affine-font-xs)' }}\n                >\n                  {formatDate(createDate)}\n                </TableCell>\n                <TableCell\n                  data-testid=\"updated-date\"\n                  ellipsis={true}\n                  hidden={isSmallDevices}\n                  onClick={onClickPage}\n                  style={{ fontSize: 'var(--affine-font-xs)' }}\n                >\n                  {formatDate(updatedDate ?? createDate)}\n                </TableCell>\n                {!isPublicWorkspace && (\n                  <TableCell\n                    style={{\n                      padding: 0,\n                      display: 'flex',\n                      justifyContent: 'center',\n                      alignItems: 'center',\n                      gap: '10px',\n                    }}\n                    data-testid={`more-actions-${pageId}`}\n                  >\n                    <FavoriteTag\n                      className={favorite ? '' : 'favorite-button'}\n                      onClick={bookmarkPage}\n                      active={!!favorite}\n                    />\n                    <OperationCell\n                      title={title}\n                      favorite={favorite}\n                      isPublic={isPublicPage}\n                      onOpenPageInNewTab={onOpenPageInNewTab}\n                      onToggleFavoritePage={bookmarkPage}\n                      onRemoveToTrash={removeToTrash}\n                      onDisablePublicSharing={onDisablePublicSharing}\n                    />\n                  </TableCell>\n                )}\n              </StyledTableBodyRow>\n            </Fragment>\n          );\n        }\n      )}\n    </TableBody>\n  );\n};\n\nconst FullSizeButton = styled('button')(() => ({\n  width: '100%',\n  height: '100%',\n  display: 'block',\n}));\n\ntype DraggableTitleCellProps = {\n  pageId: string;\n  draggableData?: DraggableTitleCellData;\n} & React.ComponentProps<typeof TitleCell>;\n\nfunction DraggableTitleCell({\n  pageId,\n  draggableData,\n  ...props\n}: DraggableTitleCellProps) {\n  const { setNodeRef, attributes, listeners, isDragging } = useDraggable({\n    id: 'page-list-item-title-' + pageId,\n    data: draggableData,\n  });\n\n  return (\n    <TitleCell\n      ref={setNodeRef}\n      style={{ opacity: isDragging ? 0.5 : 1 }}\n      {...props}\n    >\n      {/* Use `button` for draggable element */}\n      {/* See https://docs.dndkit.com/api-documentation/draggable/usedraggable#role */}\n      {element => (\n        <FullSizeButton {...listeners} {...attributes}>\n          {element}\n        </FullSizeButton>\n      )}\n    </TitleCell>\n  );\n}\n","import \"../../packages/component/src/components/card/block-card/styles.css.ts.vanilla.css!=!../../../../../../node_modules/@vanilla-extract/webpack-plugin/virtualFileLoader/dist/vanilla-extract-webpack-plugin-virtualFileLoader.cjs.js?{\\\"fileName\\\":\\\"../../packages/component/src/components/card/block-card/styles.css.ts.vanilla.css\\\",\\\"source\\\":\\\"Ll8xdGVudHc0MCB7CiAgZGlzcGxheTogZmxleDsKICBnYXA6IDEycHg7CiAgcGFkZGluZzogOHB4IDEycHg7CiAgY29sb3I6IHZhcigtLWFmZmluZS10ZXh0LXByaW1hcnktY29sb3IpOwogIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWFmZmluZS1iYWNrZ3JvdW5kLXByaW1hcnktY29sb3IpOwogIGJvcmRlci1yYWRpdXM6IDRweDsKICB1c2VyLXNlbGVjdDogbm9uZTsKICBjdXJzb3I6IHBvaW50ZXI7CiAgdGV4dC1hbGlnbjogc3RhcnQ7Cn0KLl8xdGVudHc0MDpob3ZlciB7CiAgYm94LXNoYWRvdzogdmFyKC0tYWZmaW5lLXNoYWRvdy0xKTsKfQouXzF0ZW50dzQxIHsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7Cn0KLl8xdGVudHc0MiB7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIGZsZXg6IDE7Cn0KLl8xdGVudHc0MyB7CiAgY29sb3I6IHZhcigtLWFmZmluZS10ZXh0LXNlY29uZGFyeS1jb2xvcik7CiAgZm9udC1zaXplOiB2YXIoLS1hZmZpbmUtZm9udC14cyk7Cn0=\\\"}!../../../../../../node_modules/@vanilla-extract/webpack-plugin/extracted.js\"\nexport var blockCard = '_1tentw40';\nexport var blockCardAround = '_1tentw41';\nexport var blockCardContent = '_1tentw42';\nexport var blockCardDesc = '_1tentw43';","import { forwardRef, type HTMLAttributes, type ReactNode } from 'react';\n\nimport * as styles from './styles.css';\n\nexport const BlockCard = forwardRef<\n  HTMLDivElement,\n  {\n    left?: ReactNode;\n    title: string;\n    desc?: string;\n    right?: ReactNode;\n  } & HTMLAttributes<HTMLDivElement>\n>(({ left, title, desc, right, ...props }, ref) => {\n  return (\n    <div ref={ref} className={styles.blockCard} {...props}>\n      {left && <div className={styles.blockCardAround}>{left}</div>}\n      <div className={styles.blockCardContent}>\n        <div>{title}</div>\n        <div className={styles.blockCardDesc}>{desc}</div>\n      </div>\n      {right && <div className={styles.blockCardAround}>{right}</div>}\n    </div>\n  );\n});\nBlockCard.displayName = 'BlockCard';\n","import { useAFFiNEI18N } from '@affine/i18n/hooks';\nimport { EdgelessIcon, ImportIcon, PageIcon } from '@blocksuite/icons';\nimport { useState } from 'react';\n\nimport { DropdownButton } from '../../../ui/button/dropdown';\nimport { Menu } from '../../../ui/menu/menu';\nimport { BlockCard } from '../../card/block-card';\n\ntype NewPageButtonProps = {\n  createNewPage: () => void;\n  createNewEdgeless: () => void;\n  importFile: () => void;\n};\n\nexport const CreateNewPagePopup = ({\n  createNewPage,\n  createNewEdgeless,\n  importFile,\n}: NewPageButtonProps) => {\n  const t = useAFFiNEI18N();\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '8px',\n        padding: '8px',\n      }}\n    >\n      <BlockCard\n        title={t['New Page']()}\n        desc={t['com.affine.write_with_a_blank_page']()}\n        right={<PageIcon width={20} height={20} />}\n        onClick={createNewPage}\n      />\n      <BlockCard\n        title={t['com.affine.new_edgeless']()}\n        desc={t['com.affine.draw_with_a_blank_whiteboard']()}\n        right={<EdgelessIcon width={20} height={20} />}\n        onClick={createNewEdgeless}\n      />\n      <BlockCard\n        title={t['com.affine.new_import']()}\n        desc={t['com.affine.import_file']()}\n        right={<ImportIcon width={20} height={20} />}\n        onClick={importFile}\n      />\n      {/* TODO Import */}\n    </div>\n  );\n};\n\nexport const NewPageButton = ({\n  createNewPage,\n  createNewEdgeless,\n  importFile,\n}: NewPageButtonProps) => {\n  const t = useAFFiNEI18N();\n  const [open, setOpen] = useState(false);\n  return (\n    <Menu\n      visible={open}\n      placement=\"bottom-end\"\n      trigger={['click']}\n      disablePortal={true}\n      onClickAway={() => {\n        setOpen(false);\n      }}\n      menuStyles={{ padding: '0px' }}\n      content={\n        <CreateNewPagePopup\n          createNewPage={() => {\n            createNewPage();\n            setOpen(false);\n          }}\n          createNewEdgeless={() => {\n            createNewEdgeless();\n            setOpen(false);\n          }}\n          importFile={() => {\n            importFile();\n            setOpen(false);\n          }}\n        />\n      }\n    >\n      <DropdownButton\n        onClick={() => {\n          createNewPage();\n          setOpen(false);\n        }}\n        onClickDropDown={() => setOpen(!open)}\n      >\n        {t['New Page']()}\n      </DropdownButton>\n    </Menu>\n  );\n};\n","import { useAFFiNEI18N } from '@affine/i18n/hooks';\n\nimport {\n  Content,\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeadRow,\n} from '../../..';\nimport { AllPagesBody } from './all-pages-body';\nimport { NewPageButton } from './components/new-page-buttton';\nimport {\n  StyledTableBodyRow,\n  StyledTableContainer,\n  StyledTitleLink,\n} from './styles';\nimport type { ListData } from './type';\n\nconst MobileHead = ({\n  isPublicWorkspace,\n  createNewPage,\n  createNewEdgeless,\n  importFile,\n}: {\n  isPublicWorkspace: boolean;\n  createNewPage: () => void;\n  createNewEdgeless: () => void;\n  importFile: () => void;\n}) => {\n  const t = useAFFiNEI18N();\n  return (\n    <TableHead>\n      <TableHeadRow>\n        <TableCell proportion={0.8}>{t['Title']()}</TableCell>\n        {!isPublicWorkspace && (\n          <TableCell>\n            <div\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'flex-end',\n              }}\n            >\n              <NewPageButton\n                createNewPage={createNewPage}\n                createNewEdgeless={createNewEdgeless}\n                importFile={importFile}\n              />\n            </div>\n          </TableCell>\n        )}\n      </TableHeadRow>\n    </TableHead>\n  );\n};\n\nexport const AllPageListMobileView = ({\n  list,\n  isPublicWorkspace,\n  createNewPage,\n  createNewEdgeless,\n  importFile,\n}: {\n  isPublicWorkspace: boolean;\n  list: ListData[];\n  createNewPage: () => void;\n  createNewEdgeless: () => void;\n  importFile: () => void;\n}) => {\n  return (\n    <StyledTableContainer>\n      <Table>\n        <MobileHead\n          isPublicWorkspace={isPublicWorkspace}\n          createNewPage={createNewPage}\n          createNewEdgeless={createNewEdgeless}\n          importFile={importFile}\n        />\n        <AllPagesBody\n          isPublicWorkspace={isPublicWorkspace}\n          data={list}\n          // update groupKey after support sort by create date\n          groupKey=\"updatedDate\"\n        />\n      </Table>\n    </StyledTableContainer>\n  );\n};\n\n// TODO align to {@link AllPageListMobileView}\nexport const TrashListMobileView = ({\n  list,\n}: {\n  list: {\n    pageId: string;\n    title: string;\n    icon: JSX.Element;\n    onClickPage: () => void;\n  }[];\n}) => {\n  const t = useAFFiNEI18N();\n\n  const ListItems = list.map(({ pageId, title, icon, onClickPage }, index) => {\n    return (\n      <StyledTableBodyRow\n        data-testid={`page-list-item-${pageId}`}\n        key={`${pageId}-${index}`}\n      >\n        <TableCell onClick={onClickPage}>\n          <StyledTitleLink>\n            {icon}\n            <Content ellipsis={true} color=\"inherit\">\n              {title || t['Untitled']()}\n            </Content>\n          </StyledTitleLink>\n        </TableCell>\n      </StyledTableBodyRow>\n    );\n  });\n\n  return (\n    <StyledTableContainer>\n      <Table>\n        <TableBody>{ListItems}</TableBody>\n      </Table>\n    </StyledTableContainer>\n  );\n};\n","import { useState } from 'react';\n\ntype SorterConfig<T> = {\n  data: T[];\n  key: keyof T;\n  order: 'asc' | 'desc' | 'none';\n};\n\nconst defaultSortingFn = <T extends Record<keyof any, unknown>>(\n  ctx: {\n    key: keyof T;\n    order: 'asc' | 'desc';\n  },\n  a: T,\n  b: T\n) => {\n  const valA = a[ctx.key];\n  const valB = b[ctx.key];\n  const revert = ctx.order === 'desc';\n  const revertSymbol = revert ? -1 : 1;\n  if (typeof valA === 'string' && typeof valB === 'string') {\n    return valA.localeCompare(valB) * revertSymbol;\n  }\n  if (typeof valA === 'number' && typeof valB === 'number') {\n    return valA - valB * revertSymbol;\n  }\n  if (valA instanceof Date && valB instanceof Date) {\n    return (valA.getTime() - valB.getTime()) * revertSymbol;\n  }\n  if (!valA) {\n    return -1 * revertSymbol;\n  }\n  if (!valB) {\n    return 1 * revertSymbol;\n  }\n  console.warn(\n    'Unsupported sorting type! Please use custom sorting function.',\n    valA,\n    valB\n  );\n  return 0;\n};\n\nexport const useSorter = <T extends Record<keyof any, unknown>>({\n  data,\n  ...defaultSorter\n}: SorterConfig<T> & { order: 'asc' | 'desc' }) => {\n  const [sorter, setSorter] = useState<Omit<SorterConfig<T>, 'data'>>({\n    ...defaultSorter,\n    // We should not show sorting icon at first time\n    order: 'none',\n  });\n  const sortCtx =\n    sorter.order === 'none'\n      ? {\n          key: defaultSorter.key,\n          order: defaultSorter.order,\n        }\n      : {\n          key: sorter.key,\n          order: sorter.order,\n        };\n  // TODO supports custom sorting function\n  const sortingFn = (a: T, b: T) => defaultSortingFn(sortCtx, a, b);\n  const sortedData = data.sort(sortingFn);\n\n  const shiftOrder = (key?: keyof T) => {\n    const orders = ['asc', 'desc', 'none'] as const;\n    if (key && key !== sorter.key) {\n      // Key changed\n      setSorter({\n        ...sorter,\n        key,\n        order: orders[0],\n      });\n      return;\n    }\n    setSorter({\n      ...sorter,\n      order: orders[(orders.indexOf(sorter.order) + 1) % orders.length],\n    });\n  };\n  return {\n    data: sortedData,\n    order: sorter.order,\n    key: sorter.order !== 'none' ? sorter.key : null,\n    /**\n     * @deprecated In most cases, we no necessary use `updateSorter` directly.\n     */\n    updateSorter: (newVal: Partial<SorterConfig<T>>) =>\n      setSorter({ ...sorter, ...newVal }),\n    shiftOrder,\n    resetSorter: () => setSorter(defaultSorter),\n  };\n};\n","import { DEFAULT_SORT_KEY } from '@affine/env/constant';\nimport { useAFFiNEI18N } from '@affine/i18n/hooks';\nimport { ArrowDownBigIcon, ArrowUpBigIcon } from '@blocksuite/icons';\nimport { useMediaQuery, useTheme } from '@mui/material';\nimport type React from 'react';\nimport { type CSSProperties } from 'react';\n\nimport { Table, TableBody, TableCell, TableHead, TableHeadRow } from '../..';\nimport { TableBodyRow } from '../../ui/table';\nimport { useHasScrollTop } from '../app-sidebar/sidebar-containers/use-has-scroll-top';\nimport { AllPagesBody } from './all-pages-body';\nimport { NewPageButton } from './components/new-page-buttton';\nimport { TitleCell } from './components/title-cell';\nimport { AllPageListMobileView, TrashListMobileView } from './mobile';\nimport { TrashOperationCell } from './operation-cell';\nimport { StyledTableContainer } from './styles';\nimport type { ListData, PageListProps, TrashListData } from './type';\nimport { useSorter } from './use-sorter';\nimport { formatDate, useIsSmallDevices } from './utils';\n\nconst AllPagesHead = ({\n  isPublicWorkspace,\n  sorter,\n  createNewPage,\n  createNewEdgeless,\n  importFile,\n}: {\n  isPublicWorkspace: boolean;\n  sorter: ReturnType<typeof useSorter<ListData>>;\n  createNewPage: () => void;\n  createNewEdgeless: () => void;\n  importFile: () => void;\n}) => {\n  const t = useAFFiNEI18N();\n  const titleList = [\n    {\n      key: 'title',\n      content: t['Title'](),\n      proportion: 0.5,\n    },\n    {\n      key: 'createDate',\n      content: t['Created'](),\n      proportion: 0.2,\n    },\n    {\n      key: 'updatedDate',\n      content: t['Updated'](),\n      proportion: 0.2,\n    },\n\n    {\n      key: 'unsortable_action',\n      content: (\n        <NewPageButton\n          createNewPage={createNewPage}\n          createNewEdgeless={createNewEdgeless}\n          importFile={importFile}\n        />\n      ),\n      showWhen: () => !isPublicWorkspace,\n      sortable: false,\n      styles: {\n        justifyContent: 'flex-end',\n      } satisfies CSSProperties,\n    },\n  ];\n\n  return (\n    <TableHead>\n      <TableHeadRow>\n        {titleList\n          .filter(({ showWhen = () => true }) => showWhen())\n          .map(({ key, content, proportion, sortable = true, styles }) => (\n            <TableCell\n              key={key}\n              proportion={proportion}\n              active={sorter.key === key}\n              onClick={\n                sortable\n                  ? () => sorter.shiftOrder(key as keyof ListData)\n                  : undefined\n              }\n            >\n              <div\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  ...styles,\n                }}\n              >\n                {content}\n                {sorter.key === key &&\n                  (sorter.order === 'asc' ? (\n                    <ArrowUpBigIcon width={24} height={24} />\n                  ) : (\n                    <ArrowDownBigIcon width={24} height={24} />\n                  ))}\n              </div>\n            </TableCell>\n          ))}\n      </TableHeadRow>\n    </TableHead>\n  );\n};\n\nexport const PageList = ({\n  isPublicWorkspace = false,\n  list,\n  onCreateNewPage,\n  onCreateNewEdgeless,\n  onImportFile,\n  fallback,\n}: PageListProps) => {\n  const sorter = useSorter<ListData>({\n    data: list,\n    key: DEFAULT_SORT_KEY,\n    order: 'desc',\n  });\n  const [hasScrollTop, ref] = useHasScrollTop();\n  const isSmallDevices = useIsSmallDevices();\n  if (isSmallDevices) {\n    return (\n      <AllPageListMobileView\n        isPublicWorkspace={isPublicWorkspace}\n        createNewPage={onCreateNewPage}\n        createNewEdgeless={onCreateNewEdgeless}\n        importFile={onImportFile}\n        list={sorter.data}\n      />\n    );\n  }\n\n  const groupKey =\n    sorter.key === 'createDate' || sorter.key === 'updatedDate'\n      ? sorter.key\n      : // default sort\n      !sorter.key\n      ? DEFAULT_SORT_KEY\n      : undefined;\n\n  return (\n    <StyledTableContainer ref={ref}>\n      <Table showBorder={hasScrollTop} style={{ maxHeight: '100%' }}>\n        <AllPagesHead\n          isPublicWorkspace={isPublicWorkspace}\n          sorter={sorter}\n          createNewPage={onCreateNewPage}\n          createNewEdgeless={onCreateNewEdgeless}\n          importFile={onImportFile}\n        />\n        <AllPagesBody\n          isPublicWorkspace={isPublicWorkspace}\n          groupKey={groupKey}\n          data={sorter.data}\n        />\n      </Table>\n      {sorter.data.length === 0 && fallback ? fallback : null}\n    </StyledTableContainer>\n  );\n};\n\nconst TrashListHead = () => {\n  const t = useAFFiNEI18N();\n  return (\n    <TableHead>\n      <TableHeadRow>\n        <TableCell proportion={0.5}>{t['Title']()}</TableCell>\n        <TableCell proportion={0.2}>{t['Created']()}</TableCell>\n        <TableCell proportion={0.2}>{t['Moved to Trash']()}</TableCell>\n        <TableCell proportion={0.1}></TableCell>\n      </TableHeadRow>\n    </TableHead>\n  );\n};\n\nexport const PageListTrashView: React.FC<{\n  list: TrashListData[];\n  fallback?: React.ReactNode;\n}> = ({ list, fallback }) => {\n  const t = useAFFiNEI18N();\n\n  const theme = useTheme();\n  const [hasScrollTop, ref] = useHasScrollTop();\n  const isSmallDevices = useMediaQuery(theme.breakpoints.down('sm'));\n  if (isSmallDevices) {\n    const mobileList = list.map(({ pageId, icon, title, onClickPage }) => ({\n      title,\n      icon,\n      pageId,\n      onClickPage,\n    }));\n    return <TrashListMobileView list={mobileList} />;\n  }\n  const ListItems = list.map(\n    (\n      {\n        pageId,\n        title,\n        preview,\n        icon,\n        createDate,\n        trashDate,\n        onClickPage,\n        onPermanentlyDeletePage,\n        onRestorePage,\n      },\n      index\n    ) => {\n      return (\n        <TableBodyRow\n          data-testid={`page-list-item-${pageId}`}\n          key={`${pageId}-${index}`}\n        >\n          <TitleCell\n            icon={icon}\n            text={title || t['Untitled']()}\n            desc={preview}\n            onClick={onClickPage}\n          />\n          <TableCell onClick={onClickPage}>{formatDate(createDate)}</TableCell>\n          <TableCell onClick={onClickPage}>\n            {trashDate ? formatDate(trashDate) : '--'}\n          </TableCell>\n          <TableCell\n            style={{ padding: 0 }}\n            data-testid={`more-actions-${pageId}`}\n          >\n            <TrashOperationCell\n              onPermanentlyDeletePage={onPermanentlyDeletePage}\n              onRestorePage={onRestorePage}\n              onOpenPage={onClickPage}\n            />\n          </TableCell>\n        </TableBodyRow>\n      );\n    }\n  );\n\n  return (\n    <StyledTableContainer ref={ref}>\n      <Table showBorder={hasScrollTop}>\n        <TrashListHead />\n        <TableBody>{ListItems}</TableBody>\n      </Table>\n      {list.length === 0 && fallback ? fallback : null}\n    </StyledTableContainer>\n  );\n};\n","import \"../../packages/component/src/components/page-list/filter/index.css.ts.vanilla.css!=!../../../../../../node_modules/@vanilla-extract/webpack-plugin/virtualFileLoader/dist/vanilla-extract-webpack-plugin-virtualFileLoader.cjs.js?{\\\"fileName\\\":\\\"../../packages/component/src/components/page-list/filter/index.css.ts.vanilla.css\\\",\\\"source\\\":\\\"#H4sIAAAAAAAAE6VSXVODMBB876/IozykA4i14o9xAgn0FJJMEirV8b97kNIWiv0YXxiyd9ndy+3yLVLbusnikHwvCOFgdcV2KSkq0b4iwCooJQUnapuSXEgnTAe/N9ZBsaO5QkQ630+tY8Z1Zc04B1mmJNQtiRP8dD9rjZQ/i+UgGfWSNTMlSFqJAmmiWPeye9ApjVjosQK1qIUvkZItMw+UsqIAKWiPtzboenJVKTOpO9HiPYFWOTOdZWwJRkbiUyO95thGppxT9RSddWyg3CC69uBG+GPkjxnLP0qjGsknFjNluDBz1h57axdHt/X4SjK/Sa/ReyFWVcAvWhj6qWEcGnuY6M8RPjcYkuD4EilJ/I1DFpKZCDz9L3XHUt4Y221eKxig0ZqSifDq+rvuIzWME+6DeELyfDPJHbm8qLi+MQ4zbzoO6Bnzy3XmjNnTDQ9UK7/nM8G5mQGnPcb8F9IXSqx9BAAA\\\"}!../../../../../../node_modules/@vanilla-extract/webpack-plugin/extracted.js\"\nexport var filterItemCloseStyle = '_1ovmub25';\nexport var filterItemStyle = '_1ovmub24';\nexport var filterTypeIconStyle = '_1ovmub29';\nexport var filterTypeStyle = '_1ovmub28';\nexport var inputStyle = '_1ovmub26';\nexport var menuItemStyle = '_1ovmub20';\nexport var menuItemTextStyle = '_1ovmub23';\nexport var switchStyle = '_1ovmub27';\nexport var variableSelectDividerStyle = '_1ovmub22';\nexport var variableSelectTitleStyle = '_1ovmub21';","/**\n * This file will be moved to a separate package soon.\n */\n\nexport interface TUnion {\n  type: 'union';\n  title: 'union';\n  list: TType[];\n}\n\nexport const tUnion = (list: TType[]): TUnion => ({\n  type: 'union',\n  title: 'union',\n  list,\n});\n\n// TODO treat as data type\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport interface TArray<Ele extends TType = TType> {\n  type: 'array';\n  ele: Ele;\n  title: 'array';\n}\n\nexport const tArray = <const T extends TType>(ele: T): TArray<T> => {\n  return {\n    type: 'array',\n    title: 'array',\n    ele,\n  };\n};\nexport type TTypeVar = {\n  type: 'typeVar';\n  title: 'typeVar';\n  name: string;\n  bound: TType;\n};\nexport const tTypeVar = (name: string, bound: TType): TTypeVar => {\n  return {\n    type: 'typeVar',\n    title: 'typeVar',\n    name,\n    bound,\n  };\n};\nexport type TTypeRef = {\n  type: 'typeRef';\n  title: 'typeRef';\n  name: string;\n};\nexport const tTypeRef = (name: string): TTypeRef => {\n  return {\n    type: 'typeRef',\n    title: 'typeRef',\n    name,\n  };\n};\n\nexport type TFunction = {\n  type: 'function';\n  title: 'function';\n  typeVars: TTypeVar[];\n  args: TType[];\n  rt: TType;\n};\n\nexport const tFunction = (fn: {\n  typeVars?: TTypeVar[];\n  args: TType[];\n  rt: TType;\n}): TFunction => {\n  return {\n    type: 'function',\n    title: 'function',\n    typeVars: fn.typeVars ?? [],\n    args: fn.args,\n    rt: fn.rt,\n  };\n};\n\nexport type TType = TDataType | TArray | TUnion | TTypeRef | TFunction;\n\nexport type DataTypeShape = Record<string, unknown>;\nexport type TDataType<Data extends DataTypeShape = Record<string, unknown>> = {\n  type: 'data';\n  name: string;\n  data?: Data;\n};\nexport type ValueOfData<T extends DataDefine> = T extends DataDefine<infer R>\n  ? R\n  : never;\n\nexport class DataDefine<Data extends DataTypeShape = Record<string, unknown>> {\n  constructor(\n    private config: DataDefineConfig<Data>,\n    private dataMap: Map<string, DataDefine>\n  ) {}\n\n  create(data?: Data): TDataType<Data> {\n    return {\n      type: 'data',\n      name: this.config.name,\n      data,\n    };\n  }\n\n  is(data: TType): data is TDataType<Data> {\n    if (data.type !== 'data') {\n      return false;\n    }\n    return data.name === this.config.name;\n  }\n\n  private isByName(name: string): boolean {\n    return name === this.config.name;\n  }\n\n  isSubOf(superType: TDataType): boolean {\n    if (this.is(superType)) {\n      return true;\n    }\n    return this.config.supers.some(sup => sup.isSubOf(superType));\n  }\n\n  private isSubOfByName(superType: string): boolean {\n    if (this.isByName(superType)) {\n      return true;\n    }\n    return this.config.supers.some(sup => sup.isSubOfByName(superType));\n  }\n\n  isSuperOf(subType: TDataType): boolean {\n    const dataDefine = this.dataMap.get(subType.name);\n    if (!dataDefine) {\n      throw new Error('bug');\n    }\n    return dataDefine.isSubOfByName(this.config.name);\n  }\n}\n\n// type DataTypeVar = {};\n\n// TODO support generic data type\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\ninterface DataDefineConfig<T extends DataTypeShape> {\n  name: string;\n  supers: DataDefine[];\n}\n\ninterface DataHelper<T extends DataTypeShape> {\n  create<V = Record<string, unknown>>(name: string): DataDefineConfig<T & V>;\n\n  extends<V extends DataTypeShape>(\n    dataDefine: DataDefine<V>\n  ): DataHelper<T & V>;\n}\n\nconst createDataHelper = <T extends DataTypeShape = Record<string, unknown>>(\n  ...supers: DataDefine[]\n): DataHelper<T> => {\n  return {\n    create(name: string) {\n      return {\n        name,\n        supers,\n      };\n    },\n    extends(dataDefine) {\n      return createDataHelper(...supers, dataDefine);\n    },\n  };\n};\nexport const DataHelper = createDataHelper();\n\nexport class Typesystem {\n  dataMap = new Map<string, DataDefine<any>>();\n\n  defineData<T extends DataTypeShape>(\n    config: DataDefineConfig<T>\n  ): DataDefine<T> {\n    const result = new DataDefine(config, this.dataMap);\n    this.dataMap.set(config.name, result);\n    return result;\n  }\n\n  isDataType(t: TType): t is TDataType {\n    return t.type === 'data';\n  }\n\n  isSubtype(\n    superType: TType,\n    sub: TType,\n    context?: Record<string, TType>\n  ): boolean {\n    if (superType.type === 'typeRef') {\n      // TODO both are ref\n      if (context && sub.type != 'typeRef') {\n        context[superType.name] = sub;\n      }\n      // TODO bound\n      return true;\n    }\n    if (sub.type === 'typeRef') {\n      // TODO both are ref\n      if (context) {\n        context[sub.name] = superType;\n      }\n      return true;\n    }\n    if (tUnknown.is(superType)) {\n      return true;\n    }\n    if (superType.type === 'union') {\n      return superType.list.some(type => this.isSubtype(type, sub, context));\n    }\n    if (sub.type === 'union') {\n      return sub.list.every(type => this.isSubtype(superType, type, context));\n    }\n\n    if (this.isDataType(sub)) {\n      const dataDefine = this.dataMap.get(sub.name);\n      if (!dataDefine) {\n        throw new Error('bug');\n      }\n      if (!this.isDataType(superType)) {\n        return false;\n      }\n      return dataDefine.isSubOf(superType);\n    }\n\n    if (superType.type === 'array' || sub.type === 'array') {\n      if (superType.type !== 'array' || sub.type !== 'array') {\n        return false;\n      }\n      return this.isSubtype(superType.ele, sub.ele, context);\n    }\n    return false;\n  }\n\n  subst(context: Record<string, TType>, template: TFunction): TFunction {\n    const subst = (type: TType): TType => {\n      if (this.isDataType(type)) {\n        return type;\n      }\n      switch (type.type) {\n        case 'typeRef':\n          return { ...context[type.name] };\n        case 'union':\n          return tUnion(type.list.map(type => subst(type)));\n        case 'array':\n          return tArray(subst(type.ele));\n        case 'function':\n          throw new Error('TODO');\n      }\n    };\n    const result = tFunction({\n      args: template.args.map(type => subst(type)),\n      rt: subst(template.rt),\n    });\n    return result;\n  }\n\n  instance(\n    context: Record<string, TType>,\n    realArgs: TType[],\n    realRt: TType,\n    template: TFunction\n  ): TFunction {\n    const ctx = { ...context };\n    template.args.forEach((arg, i) => {\n      const realArg = realArgs[i];\n      if (realArg) {\n        this.isSubtype(arg, realArg, ctx);\n      }\n    });\n    this.isSubtype(realRt, template.rt);\n    return this.subst(ctx, template);\n  }\n}\n\nexport const typesystem = new Typesystem();\nexport const tUnknown = typesystem.defineData(DataHelper.create('Unknown'));\n","import { DataHelper, typesystem } from './typesystem';\n\nexport const tNumber = typesystem.defineData(\n  DataHelper.create<{ value: number }>('Number')\n);\nexport const tString = typesystem.defineData(\n  DataHelper.create<{ value: string }>('String')\n);\nexport const tBoolean = typesystem.defineData(\n  DataHelper.create<{ value: boolean }>('Boolean')\n);\nexport const tDate = typesystem.defineData(\n  DataHelper.create<{ value: number }>('Date')\n);\n","import type { TType } from './typesystem';\nimport { typesystem } from './typesystem';\n\ntype MatcherData<Data, Type extends TType = TType> = { type: Type; data: Data };\n\nexport class Matcher<Data, Type extends TType = TType> {\n  private list: MatcherData<Data, Type>[] = [];\n\n  constructor(private _match?: (type: Type, target: TType) => boolean) {}\n\n  register(type: Type, data: Data) {\n    this.list.push({ type, data });\n  }\n\n  match(type: TType) {\n    const match = this._match ?? typesystem.isSubtype.bind(typesystem);\n    for (const t of this.list) {\n      if (match(t.type, type)) {\n        return t.data;\n      }\n    }\n    return;\n  }\n\n  allMatched(type: TType): MatcherData<Data>[] {\n    const match = this._match ?? typesystem.isSubtype.bind(typesystem);\n    const result: MatcherData<Data>[] = [];\n    for (const t of this.list) {\n      if (match(t.type, type)) {\n        result.push(t);\n      }\n    }\n    return result;\n  }\n\n  allMatchedData(type: TType): Data[] {\n    return this.allMatched(type).map(v => v.data);\n  }\n\n  findData(f: (data: Data) => boolean): Data | undefined {\n    return this.list.find(data => f(data.data))?.data;\n  }\n\n  find(\n    f: (data: MatcherData<Data, Type>) => boolean\n  ): MatcherData<Data, Type> | undefined {\n    return this.list.find(f);\n  }\n\n  all(): MatcherData<Data, Type>[] {\n    return this.list;\n  }\n}\n","import type { Literal, LiteralValue, VariableMap } from '@affine/env/filter';\nimport { DateTimeIcon, FavoritedIcon } from '@blocksuite/icons';\n\nimport { tBoolean, tDate } from './logical/custom-type';\nimport type { TType } from './logical/typesystem';\n\nexport const toLiteral = (value: LiteralValue): Literal => ({\n  type: 'literal',\n  value,\n});\n\nexport type FilterVariable = {\n  name: keyof VariableMap;\n  type: TType;\n};\n\nexport const variableDefineMap = {\n  Created: {\n    type: tDate.create(),\n    icon: <DateTimeIcon />,\n  },\n  Updated: {\n    type: tDate.create(),\n    icon: <DateTimeIcon />,\n  },\n  'Is Favourited': {\n    type: tBoolean.create(),\n    icon: <FavoritedIcon />,\n  },\n  // Imported: {\n  //   type: tBoolean.create(),\n  // },\n  // 'Daily Note': {\n  //   type: tBoolean.create(),\n  // },\n} as const;\n\nexport type InternalVariableMap = {\n  [K in keyof typeof variableDefineMap]: LiteralValue;\n};\n\ndeclare module '@affine/env/filter' {\n  // eslint-disable-next-line @typescript-eslint/no-empty-interface\n  interface VariableMap extends InternalVariableMap {}\n}\n","import type { Filter, LiteralValue, VariableMap } from '@affine/env/filter';\nimport dayjs from 'dayjs';\nimport type { ReactNode } from 'react';\n\nimport { MenuItem } from '../../../ui/menu';\nimport * as styles from './index.css';\nimport { tBoolean, tDate } from './logical/custom-type';\nimport { Matcher } from './logical/matcher';\nimport type { TFunction } from './logical/typesystem';\nimport { tFunction, typesystem } from './logical/typesystem';\nimport type { FilterVariable } from './shared-types';\nimport { variableDefineMap } from './shared-types';\n\nexport const vars: FilterVariable[] = Object.entries(variableDefineMap).map(\n  ([key, value]) => ({\n    name: key as keyof VariableMap,\n    type: value.type,\n    icon: value.icon,\n  })\n);\n\nexport const createDefaultFilter = (variable: FilterVariable): Filter => {\n  const data = filterMatcher.match(variable.type);\n  if (!data) {\n    throw new Error('No matching function found');\n  }\n  return {\n    type: 'filter',\n    left: { type: 'ref', name: variable.name },\n    funcName: data.name,\n    args: data.defaultArgs().map(value => ({ type: 'literal', value })),\n  };\n};\n\nexport const CreateFilterMenu = ({\n  value,\n  onChange,\n}: {\n  value: Filter[];\n  onChange: (value: Filter[]) => void;\n}) => {\n  return (\n    <VariableSelect\n      selected={value}\n      onSelect={filter => {\n        onChange([...value, filter]);\n      }}\n    />\n  );\n};\n\nexport const VariableSelect = ({\n  onSelect,\n}: {\n  selected: Filter[];\n  onSelect: (value: Filter) => void;\n}) => {\n  return (\n    <div data-testid=\"variable-select\">\n      <div className={styles.variableSelectTitleStyle}>Filter</div>\n      <div className={styles.variableSelectDividerStyle}></div>\n      {vars\n        // .filter(v => !selected.find(filter => filter.left.name === v.name))\n        .map(v => (\n          <MenuItem\n            icon={variableDefineMap[v.name].icon}\n            key={v.name}\n            onClick={() => {\n              onSelect(createDefaultFilter(v));\n            }}\n            className={styles.menuItemStyle}\n          >\n            <div\n              data-testid=\"variable-select-item\"\n              className={styles.menuItemTextStyle}\n            >\n              {v.name}\n            </div>\n          </MenuItem>\n        ))}\n    </div>\n  );\n};\n\nexport type FilterMatcherDataType = {\n  name: string;\n  defaultArgs: () => LiteralValue[];\n  render?: (props: { ast: Filter }) => ReactNode;\n  impl: (...args: LiteralValue[]) => boolean;\n};\nexport const filterMatcher = new Matcher<FilterMatcherDataType, TFunction>(\n  (type, target) => {\n    const staticType = typesystem.subst(\n      Object.fromEntries(type.typeVars?.map(v => [v.name, v.bound]) ?? []),\n      type\n    );\n    const firstArg = staticType.args[0];\n    return firstArg && typesystem.isSubtype(firstArg, target);\n  }\n);\n\nfilterMatcher.register(\n  tFunction({\n    args: [tBoolean.create(), tBoolean.create()],\n    rt: tBoolean.create(),\n  }),\n  {\n    name: 'is',\n    defaultArgs: () => [true],\n    impl: (value, target) => {\n      return value == target;\n    },\n  }\n);\n\nfilterMatcher.register(\n  tFunction({ args: [tDate.create(), tDate.create()], rt: tBoolean.create() }),\n  {\n    name: 'after',\n    defaultArgs: () => {\n      return [dayjs().subtract(1, 'day').endOf('day').valueOf()];\n    },\n    impl: (date, target) => {\n      if (typeof date !== 'number' || typeof target !== 'number') {\n        throw new Error('argument type error');\n      }\n      return dayjs(date).isAfter(dayjs(target).endOf('day'));\n    },\n  }\n);\n\nfilterMatcher.register(\n  tFunction({ args: [tDate.create(), tDate.create()], rt: tBoolean.create() }),\n  {\n    name: 'before',\n    defaultArgs: () => [dayjs().endOf('day').valueOf()],\n    impl: (date, target) => {\n      if (typeof date !== 'number' || typeof target !== 'number') {\n        throw new Error('argument type error');\n      }\n      return dayjs(date).isBefore(dayjs(target).startOf('day'));\n    },\n  }\n);\n","import type { Filter, Literal, Ref, VariableMap } from '@affine/env/filter';\n\nimport { filterMatcher } from './vars';\n\nconst evalRef = (ref: Ref, variableMap: VariableMap) => {\n  return variableMap[ref.name];\n};\nconst evalLiteral = (lit: Literal) => {\n  return lit.value;\n};\nconst evalFilter = (filter: Filter, variableMap: VariableMap): boolean => {\n  const impl = filterMatcher.findData(v => v.name === filter.funcName)?.impl;\n  if (!impl) {\n    throw new Error('No function implementation found');\n  }\n  const leftValue = evalRef(filter.left, variableMap);\n  const args = filter.args.map(evalLiteral);\n  return impl(leftValue, ...args);\n};\nexport const evalFilterList = (\n  filterList: Filter[],\n  variableMap: VariableMap\n) => {\n  return filterList.every(filter => evalFilter(filter, variableMap));\n};\n","import \"../../packages/component/src/components/date-picker/index.css.ts.vanilla.css!=!../../../../../node_modules/@vanilla-extract/webpack-plugin/virtualFileLoader/dist/vanilla-extract-webpack-plugin-virtualFileLoader.cjs.js?{\\\"fileName\\\":\\\"../../packages/component/src/components/date-picker/index.css.ts.vanilla.css\\\",\\\"source\\\":\\\"#H4sIAAAAAAAAE81YUW/aMBB+76+wkCaVB1eBUsZS9ZdMVeXEF+LVxJFtCt3U/76Lk1AnIYEC7fYEXOy7787ffedwsxUmmJiA/LkiJFGZpUb8hpC8MH1NKUsSkQF19q0Z3+OajeA2DcldkG/v6y0bEMvUhmQeBIWNC5NL9hqSRIJbxKRYZlRYWJmQxJBZ0IX519pYkbzSGH2g0X+UVh6n0zLMiumlyKiEBI2ToGHU5dLS+nZ1U2Y0cRlFaktNyrjatFIqjXTqcsoZ5yJbhiRo+7YqR8/z0hax+Hmp1TrjLWfvD6h6AY2505xlIDEzqbQLESnNQVPNuFhjESZVXlU1b4MavAYWW8qZhVzEz6CfnlJguLPM5mwAIclUBl6CkbJWrfDoGsWbXjxchxNV5pMg+DZAkRbKumz+gc0qkzLCCpWFRINkVryAl8/t/5rP4sR8wpAltmLFrn1Go+ZGFhkl1xY8eDGT8XWBkVAyxUhjv9kmh2hectgvSpkGrfOo+nPaINOsQom7Wg4tbC3NtcCqvHpu92nKoDSZ1bgrEk0Qdw5EY0WF+dOB7TDMv6YQu3jfXbyamJWI7Q67+u1CO7Yi04pH/RyqhPauKbSLY6LUGt0h97v/ncMfR8+i3lIawKbgzWLuOlZk0rFZqvjZa43pogm9/u0Wt41ew878gYGGfEuqpFFKrMCOq8u7EpxLP1N2cVlqqNAuTnR+Rbvk/KJ6Yi1dL7svwXBhWx0zKzumNXoXDfZGYVrUdvgg3JL+YV7lYDXLalp7R+e2keDm1hBgBijqj1pbH8JPpgVDzkqILfCHkdVrGD32ikUk0fl4UKmbgA9F+ngJPI+WRSLjsH0YBaPHtv+ESVOncjrN36PtuR5xXI7XNPw4KXiX1/tKnjMJ1gJ13N2kONbPhuUV/cKH3IcGWWcEB7rCHkmHitUrAtjyLJLQjRkfMwMaw3fWP3wFand7CB6Y/PFam8JPrkR509oh44elL8KuvJj4NdWtfV11Yjbf8+Z0jFTxU6Tqg6J0CMJnS9W+shyKfoZ88S+VL76nM10zliz7xyp2DrpTmDnEF++G1IuqeO1huKkMm0jF7KF70IC3jWZ5XvnqvNt1/qgwOYsRLdgNQNb7XndM3KK23qsJXoA8+HOnkm9/AS0KipGkEQAA\\\"}!../../../../../node_modules/@vanilla-extract/webpack-plugin/extracted.js\"\nexport var arrowDownStyle = 'xis01sc';\nexport var arrowLeftStyle = 'xis01s7';\nexport var arrowRightStyle = 'xis01s8';\nexport var calendarStyle = 'xis01sa';\nexport var dayStyle = 'xis01sb';\nexport var headerStyle = 'xis01s2';\nexport var inputStyle = 'xis01s0';\nexport var monthHeaderStyle = 'xis01s3';\nexport var monthTitleStyle = 'xis01s4';\nexport var mouthStyle = 'xis01s6';\nexport var mouthsStyle = 'xis01sd';\nexport var popperStyle = 'xis01s1';\nexport var weekStyle = 'xis01s9';\nexport var yearStyle = 'xis01s5';","import {\n  ArrowDownSmallIcon,\n  ArrowLeftSmallIcon,\n  ArrowRightSmallIcon,\n} from '@blocksuite/icons';\nimport dayjs from 'dayjs';\nimport { useCallback, useState } from 'react';\nimport DatePicker from 'react-datepicker';\n\nimport * as styles from './index.css';\nconst months = [\n  'January',\n  'February',\n  'March',\n  'April',\n  'May',\n  'June',\n  'July',\n  'August',\n  'September',\n  'October',\n  'November',\n  'December',\n];\ntype DatePickerProps = {\n  value?: string;\n  onChange: (value: string) => void;\n};\n\nexport const AFFiNEDatePicker = (props: DatePickerProps) => {\n  const { value, onChange } = props;\n  const [openMonthPicker, setOpenMonthPicker] = useState(false);\n  const [selectedDate, setSelectedDate] = useState<Date | null>(\n    value ? dayjs(value).toDate() : null\n  );\n  const handleOpenMonthPicker = useCallback(() => {\n    setOpenMonthPicker(true);\n  }, []);\n  const handleCloseMonthPicker = useCallback(() => {\n    setOpenMonthPicker(false);\n  }, []);\n  const handleSelectDate = (date: Date | null) => {\n    if (date) {\n      setSelectedDate(date);\n      onChange(dayjs(date).format('YYYY-MM-DD'));\n      setOpenMonthPicker(false);\n    }\n  };\n  const renderCustomHeader = ({\n    date,\n    decreaseMonth,\n    increaseMonth,\n    prevMonthButtonDisabled,\n    nextMonthButtonDisabled,\n  }: {\n    date: Date;\n    decreaseMonth: () => void;\n    increaseMonth: () => void;\n    prevMonthButtonDisabled: boolean;\n    nextMonthButtonDisabled: boolean;\n  }) => {\n    const selectedYear = dayjs(date).year();\n    const selectedMonth = dayjs(date).month();\n    return (\n      <div className={styles.headerStyle}>\n        <div\n          data-testid=\"date-picker-current-month\"\n          className={styles.mouthStyle}\n        >\n          {months[selectedMonth]}\n        </div>\n        <div\n          data-testid=\"date-picker-current-year\"\n          className={styles.yearStyle}\n        >\n          {selectedYear}\n        </div>\n        <div\n          data-testid=\"month-picker-button\"\n          className={styles.arrowDownStyle}\n          onClick={handleOpenMonthPicker}\n        >\n          <ArrowDownSmallIcon />\n        </div>\n        <button\n          data-testid=\"date-picker-prev-button\"\n          className={styles.arrowLeftStyle}\n          onClick={decreaseMonth}\n          disabled={prevMonthButtonDisabled}\n        >\n          <ArrowLeftSmallIcon />\n        </button>\n        <button\n          data-testid=\"date-picker-next-button\"\n          className={styles.arrowRightStyle}\n          onClick={increaseMonth}\n          disabled={nextMonthButtonDisabled}\n        >\n          <ArrowRightSmallIcon />\n        </button>\n      </div>\n    );\n  };\n  const renderCustomMonthHeader = ({\n    date,\n    decreaseYear,\n    increaseYear,\n    prevYearButtonDisabled,\n    nextYearButtonDisabled,\n  }: {\n    date: Date;\n    decreaseYear: () => void;\n    increaseYear: () => void;\n    prevYearButtonDisabled: boolean;\n    nextYearButtonDisabled: boolean;\n  }) => {\n    const selectedYear = dayjs(date).year();\n    return (\n      <div className={styles.monthHeaderStyle}>\n        <div\n          data-testid=\"month-picker-current-year\"\n          className={styles.monthTitleStyle}\n        >\n          {selectedYear}\n        </div>\n        <button\n          data-testid=\"month-picker-prev-button\"\n          className={styles.arrowLeftStyle}\n          onClick={decreaseYear}\n          disabled={prevYearButtonDisabled}\n        >\n          <ArrowLeftSmallIcon />\n        </button>\n        <button\n          data-testid=\"month-picker-next-button\"\n          className={styles.arrowRightStyle}\n          onClick={increaseYear}\n          disabled={nextYearButtonDisabled}\n        >\n          <ArrowRightSmallIcon />\n        </button>\n      </div>\n    );\n  };\n  return (\n    <DatePicker\n      onClickOutside={handleCloseMonthPicker}\n      className={styles.inputStyle}\n      calendarClassName={styles.calendarStyle}\n      weekDayClassName={() => styles.weekStyle}\n      dayClassName={() => styles.dayStyle}\n      popperClassName={styles.popperStyle}\n      monthClassName={() => styles.mouthsStyle}\n      selected={selectedDate}\n      onChange={handleSelectDate}\n      showPopperArrow={false}\n      dateFormat=\"MMM dd\"\n      showMonthYearPicker={openMonthPicker}\n      shouldCloseOnSelect={!openMonthPicker}\n      renderCustomHeader={({\n        date,\n        decreaseYear,\n        increaseYear,\n        decreaseMonth,\n        increaseMonth,\n        prevYearButtonDisabled,\n        nextYearButtonDisabled,\n        prevMonthButtonDisabled,\n        nextMonthButtonDisabled,\n      }) =>\n        openMonthPicker\n          ? renderCustomMonthHeader({\n              date,\n              decreaseYear,\n              increaseYear,\n              prevYearButtonDisabled,\n              nextYearButtonDisabled,\n            })\n          : renderCustomHeader({\n              date,\n              decreaseMonth,\n              increaseMonth,\n              prevMonthButtonDisabled,\n              nextMonthButtonDisabled,\n            })\n      }\n    />\n  );\n};\n\nexport default AFFiNEDatePicker;\n","export * from './date-picker';\n","import type { Literal } from '@affine/env/filter';\nimport dayjs from 'dayjs';\nimport type { ReactNode } from 'react';\n\nimport { AFFiNEDatePicker } from '../../date-picker';\nimport { inputStyle } from './index.css';\nimport { tBoolean, tDate } from './logical/custom-type';\nimport { Matcher } from './logical/matcher';\nimport type { TType } from './logical/typesystem';\nimport { typesystem } from './logical/typesystem';\n\nexport const literalMatcher = new Matcher<{\n  render: (props: {\n    type: TType;\n    value: Literal;\n    onChange: (lit: Literal) => void;\n  }) => ReactNode;\n}>((type, target) => {\n  return typesystem.isSubtype(type, target);\n});\n\nliteralMatcher.register(tBoolean.create(), {\n  render: ({ value, onChange }) => (\n    <div\n      className={inputStyle}\n      style={{ cursor: 'pointer' }}\n      onClick={() => {\n        onChange({ type: 'literal', value: !value.value });\n      }}\n    >\n      {value.value?.toString()}\n    </div>\n  ),\n});\nliteralMatcher.register(tDate.create(), {\n  render: ({ value, onChange }) => (\n    <AFFiNEDatePicker\n      value={dayjs(value.value as number).format('YYYY-MM-DD')}\n      onChange={e => {\n        onChange({\n          type: 'literal',\n          value: dayjs(e, 'YYYY-MM-DD').valueOf(),\n        });\n      }}\n    />\n  ),\n});\n","import type { Filter, Literal } from '@affine/env/filter';\nimport type { ReactNode } from 'react';\nimport { useMemo } from 'react';\n\nimport { Menu, MenuItem } from '../../../ui/menu';\nimport * as styles from './index.css';\nimport { literalMatcher } from './literal-matcher';\nimport type { TFunction, TType } from './logical/typesystem';\nimport { variableDefineMap } from './shared-types';\nimport { filterMatcher, VariableSelect, vars } from './vars';\n\nexport const Condition = ({\n  value,\n  onChange,\n}: {\n  value: Filter;\n  onChange: (filter: Filter) => void;\n}) => {\n  const data = useMemo(\n    () => filterMatcher.find(v => v.data.name === value.funcName),\n    [value.funcName]\n  );\n  if (!data) {\n    return null;\n  }\n  const render =\n    data.data.render ??\n    (({ ast }) => {\n      const args = renderArgs(value, onChange, data.type);\n      return (\n        <div\n          style={{ display: 'flex', userSelect: 'none', alignItems: 'center' }}\n        >\n          <Menu\n            trigger=\"click\"\n            content={<VariableSelect selected={[]} onSelect={onChange} />}\n          >\n            <div data-testid=\"variable-name\" className={styles.filterTypeStyle}>\n              <div className={styles.filterTypeIconStyle}>\n                {variableDefineMap[ast.left.name].icon}\n              </div>\n              <div>{ast.left.name}</div>\n            </div>\n          </Menu>\n          <Menu\n            trigger=\"click\"\n            content={<FunctionSelect value={value} onChange={onChange} />}\n          >\n            <div className={styles.switchStyle} data-testid=\"filter-name\">\n              {ast.funcName}\n            </div>\n          </Menu>\n          {args}\n        </div>\n      );\n    });\n  return <>{render({ ast: value })}</>;\n};\n\nconst FunctionSelect = ({\n  value,\n  onChange,\n}: {\n  value: Filter;\n  onChange: (value: Filter) => void;\n}) => {\n  const list = useMemo(() => {\n    const type = vars.find(v => v.name === value.left.name)?.type;\n    if (!type) {\n      return [];\n    }\n    return filterMatcher.allMatchedData(type);\n  }, [value.left.name]);\n  return (\n    <div data-testid=\"filter-name-select\">\n      {list.map(v => (\n        <MenuItem\n          onClick={() => {\n            onChange({\n              ...value,\n              funcName: v.name,\n              args: v.defaultArgs().map(v => ({ type: 'literal', value: v })),\n            });\n          }}\n          key={v.name}\n        >\n          {v.name}\n        </MenuItem>\n      ))}\n    </div>\n  );\n};\n\nexport const Arg = ({\n  type,\n  value,\n  onChange,\n}: {\n  type: TType;\n  value: Literal;\n  onChange: (lit: Literal) => void;\n}) => {\n  const data = useMemo(() => literalMatcher.match(type), [type]);\n  if (!data) {\n    return null;\n  }\n  return (\n    <div data-testid=\"filter-arg\" style={{ marginLeft: 4, fontWeight: 600 }}>\n      {data.render({ type, value, onChange })}\n    </div>\n  );\n};\nexport const renderArgs = (\n  filter: Filter,\n  onChange: (value: Filter) => void,\n  type: TFunction\n): ReactNode => {\n  const rest = type.args.slice(1);\n  return rest.map((type, i) => {\n    const value = filter.args[i];\n    return (\n      <Arg\n        key={i}\n        type={type}\n        value={value}\n        onChange={value => {\n          const args = filter.args.map((v, index) => (i === index ? value : v));\n          onChange({\n            ...filter,\n            args,\n          });\n        }}\n      ></Arg>\n    );\n  });\n};\n","import type { Filter } from '@affine/env/filter';\nimport { CloseIcon, PlusIcon } from '@blocksuite/icons';\n\nimport { Menu } from '../../..';\nimport { Condition } from './condition';\nimport * as styles from './index.css';\nimport { CreateFilterMenu } from './vars';\nexport const FilterList = ({\n  value,\n  onChange,\n}: {\n  value: Filter[];\n  onChange: (value: Filter[]) => void;\n}) => {\n  return (\n    <div style={{ display: 'flex', flexWrap: 'wrap' }}>\n      {value.map((filter, i) => {\n        return (\n          <div className={styles.filterItemStyle} key={i}>\n            <Condition\n              value={filter}\n              onChange={filter => {\n                onChange(\n                  value.map((old, oldIndex) => (oldIndex === i ? filter : old))\n                );\n              }}\n            />\n            <div\n              className={styles.filterItemCloseStyle}\n              onClick={() => {\n                onChange(value.filter((_, index) => i !== index));\n              }}\n            >\n              <CloseIcon />\n            </div>\n          </div>\n        );\n      })}\n      <Menu\n        trigger={'click'}\n        content={<CreateFilterMenu value={value} onChange={onChange} />}\n      >\n        <div\n          style={{\n            cursor: 'pointer',\n            padding: 4,\n            marginLeft: 4,\n            display: 'flex',\n            alignItems: 'center',\n          }}\n        >\n          <PlusIcon />\n        </div>\n      </Menu>\n    </div>\n  );\n};\n","export * from './eval';\nexport * from './filter-list';\n","import type { Filter, VariableMap, View } from '@affine/env/filter';\nimport type { DBSchema } from 'idb';\nimport { openDB } from 'idb';\nimport type { IDBPDatabase } from 'idb/build/entry';\nimport { useAtom } from 'jotai';\nimport { atomWithReset } from 'jotai/utils';\nimport { useCallback } from 'react';\nimport useSWRImmutable from 'swr/immutable';\nimport { NIL } from 'uuid';\n\nimport { evalFilterList } from './filter';\n\ntype PersistenceView = View;\n\nexport interface PageViewDBV1 extends DBSchema {\n  view: {\n    key: PersistenceView['id'];\n    value: PersistenceView;\n  };\n}\n\nconst pageViewDBPromise: Promise<IDBPDatabase<PageViewDBV1>> =\n  typeof window === 'undefined'\n    ? // never resolve in SSR\n      new Promise<any>(() => {})\n    : openDB<PageViewDBV1>('page-view', 1, {\n        upgrade(database) {\n          database.createObjectStore('view', {\n            keyPath: 'id',\n          });\n        },\n      });\n\nconst currentViewAtom = atomWithReset<View>({\n  name: 'default',\n  id: NIL,\n  filterList: [],\n});\n\nexport const useAllPageSetting = () => {\n  const { data: savedViews, mutate } = useSWRImmutable(\n    ['affine', 'page-view'],\n    {\n      fetcher: async () => {\n        const db = await pageViewDBPromise;\n        const t = db.transaction('view').objectStore('view');\n        return await t.getAll();\n      },\n      suspense: true,\n      fallbackData: [],\n      revalidateOnMount: true,\n    }\n  );\n\n  const [currentView, setCurrentView] = useAtom(currentViewAtom);\n\n  const createView = useCallback(\n    async (view: View) => {\n      if (view.id === NIL) {\n        return;\n      }\n      const db = await pageViewDBPromise;\n      const t = db.transaction('view', 'readwrite').objectStore('view');\n      await t.put(view);\n      await mutate();\n    },\n    [mutate]\n  );\n\n  return {\n    currentView,\n    savedViews: savedViews as View[],\n\n    // actions\n    createView,\n    setCurrentView,\n  };\n};\nexport const filterByFilterList = (filterList: Filter[], varMap: VariableMap) =>\n  evalFilterList(filterList, varMap);\n","import \"../../packages/component/src/components/page-list/view/view-list.css.ts.vanilla.css!=!../../../../../../node_modules/@vanilla-extract/webpack-plugin/virtualFileLoader/dist/vanilla-extract-webpack-plugin-virtualFileLoader.cjs.js?{\\\"fileName\\\":\\\"../../packages/component/src/components/page-list/view/view-list.css.ts.vanilla.css\\\",\\\"source\\\":\\\"#H4sIAAAAAAAAE81Ty27CMBC88xUWUqVyMAqUUmS+xsROsiWxLdvh0Yp/r+0EJzyCinrpjd0MO7Oz4ykslcpogr5HCG2kZlxjTRnUhqCVOqxdt+CQF5agWZK8+FpRxkDkBC3U4YzJpLDYwBcnaEf1K8Y0y0BwHPoHM/GYDU23uZa1YFegfQGWB0gqS6mvvlp+cKN5KgWj+ogDpJkX1DpdToaRJbDL/7XLdHirqTBgQQqCKqpzELjkmUXJdG4Qp4Zj15G1XY9Oo2lrCynkjuu+Ofck3lANrhrGRWDkmQWGniiC5ol3NiLmhNDMtlKcF5YLBxqPPRsDo0p6JGhTynTrO3tgtuguFi/YHGtQ3c0eSp4NoxtncW15Y7y1siIo8UWjNvxs9LuiIYra3/rbWalCctaDeYv5crUf3M3pX+N3Dj+IlNJQ/SVQUdYiCIpHyEoe1qAl5AK7ZFdutdSdi+ugp9bGC1ISzq2ha12/t9WFq+9P0T58oKaadPfDuqG/ZFs+xfZZGwuZ97YN6jNCIufHc5e+l6Zu1v/MzioIeuhJgZeTaNy+zcYyaR5fUN325uFVnX4AYDsgldIFAAA=\\\"}!../../../../../../node_modules/@vanilla-extract/webpack-plugin/extracted.js\"\nexport var cancelButton = 'i6ppfa7';\nexport var filterButton = 'i6ppfa0';\nexport var filterButtonCollapse = 'i6ppfa1';\nexport var saveButton = 'i6ppfa3';\nexport var saveButtonContainer = 'i6ppfa4';\nexport var saveIcon = 'i6ppfa5';\nexport var saveText = 'i6ppfa6';\nexport var saveTitle = 'i6ppfa8';\nexport var viewDivider = 'i6ppfa2';","import type { Filter, View } from '@affine/env/filter';\nimport { SaveIcon } from '@blocksuite/icons';\nimport { uuidv4 } from '@blocksuite/store';\nimport { useState } from 'react';\n\nimport { Button, Input, Modal, ModalCloseButton, ModalWrapper } from '../../..';\nimport { FilterList } from '../filter';\nimport * as styles from './view-list.css';\n\ntype CreateViewProps = {\n  init: Filter[];\n  onConfirm: (view: View) => void;\n};\n\nconst CreateView = ({\n  init,\n  onConfirm,\n  onCancel,\n}: CreateViewProps & { onCancel: () => void }) => {\n  const [value, onChange] = useState<View>({\n    name: '',\n    filterList: init,\n    id: uuidv4(),\n  });\n\n  return (\n    <div>\n      <div className={styles.saveTitle}>Save As New View</div>\n      <div\n        style={{\n          backgroundColor: 'var(--affine-hover-color)',\n          borderRadius: 8,\n          padding: 20,\n          marginTop: 20,\n        }}\n      >\n        <FilterList\n          value={value.filterList}\n          onChange={list => onChange({ ...value, filterList: list })}\n        ></FilterList>\n      </div>\n      <div style={{ marginTop: 20 }}>\n        <Input\n          placeholder=\"Untitled View\"\n          value={value.name}\n          onChange={text => onChange({ ...value, name: text })}\n        />\n      </div>\n      <div\n        style={{ display: 'flex', justifyContent: 'flex-end', marginTop: 40 }}\n      >\n        <Button className={styles.cancelButton} onClick={onCancel}>\n          Cancel\n        </Button>\n        <Button\n          style={{ marginLeft: 20, borderRadius: '8px' }}\n          type=\"primary\"\n          onClick={() => {\n            if (value.name.trim().length > 0) {\n              onConfirm(value);\n            }\n          }}\n        >\n          Create\n        </Button>\n      </div>\n    </div>\n  );\n};\nexport const SaveViewButton = ({ init, onConfirm }: CreateViewProps) => {\n  const [show, changeShow] = useState(false);\n  return (\n    <>\n      <Button\n        className={styles.saveButton}\n        onClick={() => changeShow(true)}\n        size=\"middle\"\n      >\n        <div className={styles.saveButtonContainer}>\n          <div className={styles.saveIcon}>\n            <SaveIcon />\n          </div>\n          <div className={styles.saveText}>Save View</div>\n        </div>\n      </Button>\n      <Modal open={show} onClose={() => changeShow(false)}>\n        <ModalWrapper\n          width={560}\n          style={{\n            padding: '40px',\n            background: 'var(--affine-background-primary-color)',\n          }}\n        >\n          <ModalCloseButton\n            top={12}\n            right={12}\n            onClick={() => changeShow(false)}\n            hoverColor=\"var(--affine-icon-color)\"\n          />\n          <CreateView\n            init={init}\n            onCancel={() => changeShow(false)}\n            onConfirm={view => {\n              onConfirm(view);\n              changeShow(false);\n            }}\n          />\n        </ModalWrapper>\n      </Modal>\n    </>\n  );\n};\n","import { FilteredIcon } from '@blocksuite/icons';\nimport clsx from 'clsx';\nimport { useAtom } from 'jotai';\n\nimport { Button, MenuItem } from '../../..';\nimport Menu from '../../../ui/menu/menu';\nimport { appSidebarOpenAtom } from '../../app-sidebar';\nimport { CreateFilterMenu } from '../filter/vars';\nimport type { useAllPageSetting } from '../use-all-page-setting';\nimport * as styles from './view-list.css';\nexport const ViewList = ({\n  setting,\n}: {\n  setting: ReturnType<typeof useAllPageSetting>;\n}) => {\n  const [open] = useAtom(appSidebarOpenAtom);\n  return (\n    <div style={{ marginLeft: 4, display: 'flex', alignItems: 'center' }}>\n      {setting.savedViews.length > 0 && (\n        <Menu\n          trigger=\"click\"\n          content={\n            <div>\n              {setting.savedViews.map(view => {\n                return (\n                  <MenuItem\n                    onClick={() => setting.setCurrentView(view)}\n                    key={view.id}\n                  >\n                    {view.name}\n                  </MenuItem>\n                );\n              })}\n            </div>\n          }\n        >\n          <Button style={{ marginRight: 12, cursor: 'pointer' }}>\n            {setting.currentView.name}\n          </Button>\n        </Menu>\n      )}\n      <Menu\n        trigger=\"click\"\n        placement=\"bottom-start\"\n        content={\n          <CreateFilterMenu\n            value={setting.currentView.filterList}\n            onChange={filterList => {\n              setting.setCurrentView(view => ({\n                ...view,\n                filterList,\n              }));\n            }}\n          />\n        }\n      >\n        <Button\n          icon={<FilteredIcon />}\n          className={clsx(styles.filterButton, {\n            [styles.filterButtonCollapse]: !open,\n          })}\n          size=\"small\"\n          hoverColor=\"var(--affine-icon-color)\"\n        >\n          Filter\n        </Button>\n      </Menu>\n    </div>\n  );\n};\n","export * from './create-view';\nexport * from './view-list';\n","export * from './all-page';\nexport * from './components/favorite-tag';\nexport * from './components/new-page-buttton';\nexport * from './components/title-cell';\nexport * from './filter';\nexport * from './operation-cell';\nexport * from './operation-menu-items';\nexport * from './styles';\nexport * from './type';\nexport * from './use-all-page-setting';\nexport * from './view';\n","import { styled, TextButton } from '../../..';\n\nexport const StyledModalWrapper = styled('div')(() => {\n  return {\n    position: 'relative',\n    padding: '0px',\n    width: '560px',\n    background: 'var(--affine-white)',\n    borderRadius: '12px',\n    // height: '312px',\n  };\n});\n\nexport const StyledModalHeader = styled('div')(() => {\n  return {\n    margin: '44px 0px 12px 0px',\n    width: '560px',\n    fontWeight: '600',\n    fontSize: 'var(--affine-font-h6)',\n    textAlign: 'center',\n  };\n});\n\nexport const StyledTextContent = styled('div')(() => {\n  return {\n    margin: 'auto',\n    width: '560px',\n    padding: '0px 84px',\n    fontWeight: '400',\n    fontSize: 'var(--affine-font-base)',\n    textAlign: 'center',\n  };\n});\n\nexport const StyledButtonContent = styled('div')(() => {\n  return {\n    margin: '32px 0',\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'center',\n  };\n});\nexport const StyledButton = styled(TextButton)(() => {\n  return {\n    color: 'var(--affine-primary-color)',\n    height: '32px',\n    background: '#F3F0FF',\n    border: 'none',\n    borderRadius: '8px',\n    padding: '4px 20px',\n  };\n});\nexport const StyledDangerButton = styled(TextButton)(() => {\n  return {\n    color: '#FF631F',\n    height: '32px',\n    background:\n      'linear-gradient(0deg, rgba(255, 99, 31, 0.1), rgba(255, 99, 31, 0.1)), #FFFFFF;',\n    border: 'none',\n    borderRadius: '8px',\n    padding: '4px 20px',\n  };\n});\n","import { useAFFiNEI18N } from '@affine/i18n/hooks';\n\nimport { Modal, ModalCloseButton } from '../../..';\nimport {\n  StyledButton,\n  StyledButtonContent,\n  StyledDangerButton,\n  StyledModalHeader,\n  StyledModalWrapper,\n  StyledTextContent,\n} from './style';\n\nexport type PublicLinkDisableProps = {\n  open: boolean;\n  onConfirmDisable: () => void;\n  onClose: () => void;\n};\n\nexport const PublicLinkDisableModal = ({\n  open,\n  onConfirmDisable,\n  onClose,\n}: PublicLinkDisableProps) => {\n  const t = useAFFiNEI18N();\n  return (\n    <Modal open={open} onClose={onClose}>\n      <StyledModalWrapper>\n        <ModalCloseButton onClick={onClose} top={12} right={12} />\n        <StyledModalHeader>{t['Disable Public Link ?']()}</StyledModalHeader>\n\n        <StyledTextContent>\n          {t['Disable Public Link Description']()}\n        </StyledTextContent>\n\n        <StyledButtonContent>\n          <StyledButton onClick={onClose}>{t['Cancel']()}</StyledButton>\n          <StyledDangerButton\n            data-testid=\"disable-public-link-confirm-button\"\n            onClick={() => {\n              onConfirmDisable();\n              onClose();\n            }}\n            style={{ marginLeft: '24px' }}\n          >\n            {t['Disable']()}\n          </StyledDangerButton>\n        </StyledButtonContent>\n      </StyledModalWrapper>\n    </Modal>\n  );\n};\n","import type { Page } from '@blocksuite/store';\nimport { assertExists } from '@blocksuite/store';\nimport type { Atom, WritableAtom } from 'jotai';\nimport { atom, useAtom } from 'jotai';\n\nconst weakMap = new WeakMap<\n  Page,\n  WritableAtom<boolean, [boolean], void> & Atom<boolean>\n>();\n\nexport function useBlockSuiteWorkspacePageIsPublic(page: Page) {\n  if (!weakMap.has(page)) {\n    const baseAtom = atom<boolean>(page.meta.isPublic ?? false);\n    const writableAtom = atom(\n      get => get(baseAtom),\n      (get, set, isPublic: boolean) => {\n        page.workspace.setPageMeta(page.id, {\n          isPublic,\n        });\n        set(baseAtom, isPublic);\n      }\n    );\n    baseAtom.onMount = set => {\n      const disposable = page.workspace.meta.pageMetasUpdated.on(() => {\n        set(page.meta.isPublic ?? false);\n      });\n      return () => {\n        disposable.dispose();\n      };\n    };\n    weakMap.set(page, writableAtom);\n  }\n  const isPublicAtom = weakMap.get(page);\n  assertExists(isPublicAtom);\n  return useAtom(isPublicAtom);\n}\n","import \"../../packages/component/src/components/share-menu/index.css.ts.vanilla.css!=!../../../../../node_modules/@vanilla-extract/webpack-plugin/virtualFileLoader/dist/vanilla-extract-webpack-plugin-virtualFileLoader.cjs.js?{\\\"fileName\\\":\\\"../../packages/component/src/components/share-menu/index.css.ts.vanilla.css\\\",\\\"source\\\":\\\"Ll8xZmlkYnlmMCB7CiAgZGlzcGxheTogZmxleDsKICBmbGV4OiAxOwogIHdpZHRoOiAxMDAlOwogIHBhZGRpbmc6IDAgMTBweDsKICBtYXJnaW46IDA7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KLl8xZmlkYnlmMSB7CiAgcGFkZGluZzogNHB4IDE4cHg7CiAgcGFkZGluZy1ib3R0b206IDE2cHg7CiAgd2lkdGg6IDEwMCU7Cn0KLl8xZmlkYnlmMiB7CiAgd29yZC13cmFwOiBicmVhay13b3JkOwogIGZvbnQtc2l6ZTogMTZweDsKICBtYXJnaW4tdG9wOiAxNnB4OwogIG1hcmdpbi1ib3R0b206IDE2cHg7Cn0KLl8xZmlkYnlmMyB7CiAgbWFyZ2luLXRvcDogMThweDsKfQouXzFmaWRieWY0IHsKICBkaXNwbGF5OiBmbGV4OwogIGdhcDogOXB4OwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7Cn0KLl8xZmlkYnlmNSB7CiAgZGlzcGxheTogZmxleDsKICB3aWR0aDogMTAwJTsKICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwp9Ci5fMWZpZGJ5ZjYgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQouXzFmaWRieWY3IHsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgbWFyZ2luLXRvcDogMTZweDsKfQouXzFmaWRieWY4IHsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgcGFkZGluZzogMDsKICBib3JkZXI6IG5vbmU7Cn0KLl8xZmlkYnlmOSB7CiAgZm9udC1zaXplOiAyMHB4OwogIG1hcmdpbi1yaWdodDogMTJweDsKICB2ZXJ0aWNhbC1hbGlnbjogdG9wOwp9\\\"}!../../../../../node_modules/@vanilla-extract/webpack-plugin/extracted.js\"\nexport var actionsStyle = '_1fidbyf4';\nexport var buttonStyle = '_1fidbyf3';\nexport var containerStyle = '_1fidbyf5';\nexport var descriptionStyle = '_1fidbyf2';\nexport var exportButtonStyle = '_1fidbyf8';\nexport var indicatorContainerStyle = '_1fidbyf6';\nexport var inputButtonRowStyle = '_1fidbyf7';\nexport var menuItemStyle = '_1fidbyf1';\nexport var svgStyle = '_1fidbyf9';\nexport var tabStyle = '_1fidbyf0';","import { useAFFiNEI18N } from '@affine/i18n/hooks';\nimport { ContentParser } from '@blocksuite/blocks/content-parser';\nimport { ExportToHtmlIcon, ExportToMarkdownIcon } from '@blocksuite/icons';\nimport type { FC } from 'react';\nimport { useRef } from 'react';\n\nimport { Button } from '../..';\nimport {\n  actionsStyle,\n  descriptionStyle,\n  exportButtonStyle,\n  menuItemStyle,\n  svgStyle,\n} from './index.css';\nimport type { ShareMenuProps } from './share-menu';\n\nexport const Export: FC<ShareMenuProps> = props => {\n  const contentParserRef = useRef<ContentParser>();\n  const t = useAFFiNEI18N();\n  return (\n    <div className={menuItemStyle}>\n      <div className={descriptionStyle}>\n        {t['Export Shared Pages Description']()}\n      </div>\n      <div className={actionsStyle}>\n        <Button\n          className={exportButtonStyle}\n          onClick={() => {\n            if (!contentParserRef.current) {\n              contentParserRef.current = new ContentParser(props.currentPage);\n            }\n            return contentParserRef.current.exportHtml();\n          }}\n        >\n          <ExportToHtmlIcon className={svgStyle} />\n          {t['Export to HTML']()}\n        </Button>\n        <Button\n          className={exportButtonStyle}\n          onClick={() => {\n            if (!contentParserRef.current) {\n              contentParserRef.current = new ContentParser(props.currentPage);\n            }\n            return contentParserRef.current.exportMarkdown();\n          }}\n        >\n          <ExportToMarkdownIcon className={svgStyle} />\n          {t['Export to Markdown']()}\n        </Button>\n      </div>\n    </div>\n  );\n};\n","import { Button, displayFlex, styled, TextButton } from '../..';\n\nexport const StyledShareButton = styled(TextButton, {\n  shouldForwardProp: (prop: string) => prop !== 'isShared',\n})<{ isShared?: boolean }>(({ isShared }) => {\n  return {\n    padding: '4px 8px',\n    marginLeft: '4px',\n    marginRight: '16px',\n    border: `1px solid ${\n      isShared ? 'var(--affine-primary-color)' : 'var(--affine-icon-color)'\n    }`,\n    color: isShared\n      ? 'var(--affine-primary-color)'\n      : 'var(--affine-icon-color)',\n    borderRadius: '8px',\n    ':hover': {\n      border: `1px solid ${'var(--affine-primary-color)'}`,\n    },\n    span: {\n      ...displayFlex('center', 'center'),\n    },\n  };\n});\n\nexport const StyledTabsWrapper = styled('div')(() => {\n  return {\n    ...displayFlex('space-around', 'center'),\n    position: 'relative',\n  };\n});\n\nexport const TabItem = styled('li')<{ isActive?: boolean }>(({ isActive }) => {\n  {\n    return {\n      ...displayFlex('center', 'center'),\n      flex: '1',\n      height: '30px',\n      color: 'var(--affine-text-primary-color)',\n      opacity: isActive ? 1 : 0.2,\n      fontWeight: '500',\n      fontSize: 'var(--affine-font-base)',\n      lineHeight: 'var(--affine-line-height)',\n      cursor: 'pointer',\n      transition: 'all 0.15s ease',\n      padding: '0 10px',\n      marginBottom: '4px',\n      borderRadius: '4px',\n      position: 'relative',\n      ':hover': {\n        background: 'var(--affine-hover-color)',\n        opacity: 1,\n        color: isActive\n          ? 'var(--affine-text-primary-color)'\n          : 'var(--affine-text-secondary-color)',\n        svg: {\n          fill: isActive\n            ? 'var(--affine-text-primary-color)'\n            : 'var(--affine-text-secondary-color)',\n        },\n      },\n      svg: {\n        fontSize: '20px',\n        marginRight: '12px',\n      },\n      ':after': {\n        content: '\"\"',\n        position: 'absolute',\n        bottom: '-6px',\n        left: '0',\n        width: '100%',\n        height: '2px',\n        background: 'var(--affine-text-primary-color)',\n        opacity: 0.2,\n      },\n    };\n  }\n});\nexport const StyledIndicator = styled('div')(() => {\n  return {\n    height: '2px',\n    background: 'var(--affine-text-primary-color)',\n    position: 'absolute',\n    left: '0',\n    transition: 'left .3s, width .3s',\n  };\n});\nexport const StyledInput = styled('input')(() => {\n  return {\n    padding: '4px 8px',\n    height: '28px',\n    color: 'var(--affine-placeholder-color)',\n    border: `1px solid ${'var(--affine-placeholder-color)'}`,\n    cursor: 'default',\n    overflow: 'hidden',\n    userSelect: 'text',\n    borderRadius: '4px',\n    flexGrow: 1,\n    marginRight: '10px',\n  };\n});\nexport const StyledButton = styled(TextButton)(() => {\n  return {\n    color: 'var(--affine-primary-color)',\n    height: '32px',\n    background: '#F3F0FF',\n    border: 'none',\n    borderRadius: '8px',\n    padding: '4px 20px',\n  };\n});\nexport const StyledDisableButton = styled(Button)(() => {\n  return {\n    color: '#FF631F',\n    height: '32px',\n    border: 'none',\n    marginTop: '16px',\n    borderRadius: '8px',\n    padding: '0',\n  };\n});\nexport const StyledLinkSpan = styled('span')(() => {\n  return {\n    marginLeft: '4px',\n    color: 'var(--affine-primary-color)',\n    fontWeight: '500',\n    cursor: 'pointer',\n  };\n});\n","import { prefixUrl } from '@affine/env';\nimport type { LocalWorkspace } from '@affine/env/workspace';\nimport { WorkspaceFlavour } from '@affine/env/workspace';\nimport { Trans } from '@affine/i18n';\nimport { useAFFiNEI18N } from '@affine/i18n/hooks';\nimport { useBlockSuiteWorkspacePageIsPublic } from '@toeverything/hooks/use-block-suite-workspace-page-is-public';\nimport type { FC } from 'react';\nimport { useState } from 'react';\nimport { useCallback, useMemo } from 'react';\n\nimport { toast } from '../..';\nimport { PublicLinkDisableModal } from './disable-public-link';\nimport {\n  descriptionStyle,\n  inputButtonRowStyle,\n  menuItemStyle,\n} from './index.css';\nimport type { ShareMenuProps } from './share-menu';\nimport {\n  StyledButton,\n  StyledDisableButton,\n  StyledInput,\n  StyledLinkSpan,\n} from './styles';\n\nexport const LocalSharePage: FC<ShareMenuProps> = props => {\n  const t = useAFFiNEI18N();\n  return (\n    <div className={menuItemStyle}>\n      <div className={descriptionStyle}>{t['Shared Pages Description']()}</div>\n      <StyledButton\n        data-testid=\"share-menu-enable-affine-cloud-button\"\n        onClick={() => {\n          props.onEnableAffineCloud(props.workspace as LocalWorkspace);\n        }}\n      >\n        {t['Enable AFFiNE Cloud']()}\n      </StyledButton>\n    </div>\n  );\n};\n\nexport const AffineSharePage: FC<ShareMenuProps> = props => {\n  const [isPublic, setIsPublic] = useBlockSuiteWorkspacePageIsPublic(\n    props.currentPage\n  );\n  const [showDisable, setShowDisable] = useState(false);\n  const t = useAFFiNEI18N();\n  const sharingUrl = useMemo(() => {\n    return `${prefixUrl}public-workspace/${props.workspace.id}/${props.currentPage.id}`;\n  }, [props.workspace.id, props.currentPage.id]);\n  const onClickCreateLink = useCallback(() => {\n    setIsPublic(true);\n  }, [setIsPublic]);\n  const onClickCopyLink = useCallback(async () => {\n    await navigator.clipboard.writeText(sharingUrl);\n    toast(t['Copied link to clipboard']());\n  }, [sharingUrl, t]);\n  const onDisablePublic = useCallback(() => {\n    setIsPublic(false);\n    toast('Successfully disabled', {\n      portal: document.body,\n    });\n  }, [setIsPublic]);\n\n  return (\n    <div className={menuItemStyle}>\n      <div className={descriptionStyle}>\n        {t['Create Shared Link Description']()}\n      </div>\n      <div className={inputButtonRowStyle}>\n        <StyledInput\n          type=\"text\"\n          readOnly\n          value={isPublic ? sharingUrl : 'https://app.affine.pro/xxxx'}\n        />\n        {!isPublic && (\n          <StyledButton\n            data-testid=\"affine-share-create-link\"\n            onClick={onClickCreateLink}\n          >\n            {t['Create']()}\n          </StyledButton>\n        )}\n        {isPublic && (\n          <StyledButton\n            data-testid=\"affine-share-copy-link\"\n            onClick={onClickCopyLink}\n          >\n            {t['Copy Link']()}\n          </StyledButton>\n        )}\n      </div>\n      <div className={descriptionStyle}>\n        <Trans i18nKey=\"Shared Pages In Public Workspace Description\">\n          The entire Workspace is published on the web and can be edited via\n          <StyledLinkSpan\n            onClick={() => {\n              props.onOpenWorkspaceSettings(props.workspace);\n            }}\n          >\n            Workspace Settings\n          </StyledLinkSpan>\n          .\n        </Trans>\n      </div>\n      {isPublic && (\n        <>\n          <StyledDisableButton onClick={() => setShowDisable(true)}>\n            {t['Disable Public Link']()}\n          </StyledDisableButton>\n          <PublicLinkDisableModal\n            open={showDisable}\n            onConfirmDisable={onDisablePublic}\n            onClose={() => {\n              setShowDisable(false);\n            }}\n          />\n        </>\n      )}\n    </div>\n  );\n};\n\nexport const SharePage: FC<ShareMenuProps> = props => {\n  if (props.workspace.flavour === WorkspaceFlavour.LOCAL) {\n    return <LocalSharePage {...props} />;\n  } else if (props.workspace.flavour === WorkspaceFlavour.AFFINE) {\n    return <AffineSharePage {...props} />;\n  }\n  throw new Error('Unreachable');\n};\n","import type {\n  AffineLegacyCloudWorkspace,\n  LocalWorkspace,\n} from '@affine/env/workspace';\nimport { WorkspaceFlavour } from '@affine/env/workspace';\nimport { useAFFiNEI18N } from '@affine/i18n/hooks';\nimport type { FC } from 'react';\n\nimport { descriptionStyle, menuItemStyle } from './index.css';\nimport type { ShareMenuProps } from './share-menu';\nimport { StyledButton } from './styles';\n\nconst ShareLocalWorkspace: FC<ShareMenuProps<LocalWorkspace>> = props => {\n  const t = useAFFiNEI18N();\n  return (\n    <div className={menuItemStyle}>\n      <div className={descriptionStyle}>\n        {t['Share Menu Public Workspace Description1']()}\n      </div>\n      <StyledButton\n        data-testid=\"share-menu-enable-affine-cloud-button\"\n        onClick={() => {\n          props.onOpenWorkspaceSettings(props.workspace);\n        }}\n      >\n        {t['Open Workspace Settings']()}\n      </StyledButton>\n    </div>\n  );\n};\n\nconst ShareAffineWorkspace: FC<\n  ShareMenuProps<AffineLegacyCloudWorkspace>\n> = props => {\n  const isPublicWorkspace = props.workspace.public;\n  const t = useAFFiNEI18N();\n  return (\n    <div className={menuItemStyle}>\n      <div className={descriptionStyle}>\n        {isPublicWorkspace\n          ? t['Share Menu Public Workspace Description2']()\n          : t['Share Menu Public Workspace Description1']()}\n      </div>\n      <StyledButton\n        data-testid=\"share-menu-publish-to-web-button\"\n        onClick={() => {\n          props.onOpenWorkspaceSettings(props.workspace);\n        }}\n      >\n        {t['Open Workspace Settings']()}\n      </StyledButton>\n    </div>\n  );\n};\n\nexport const ShareWorkspace: FC<ShareMenuProps> = props => {\n  if (props.workspace.flavour === WorkspaceFlavour.LOCAL) {\n    return (\n      <ShareLocalWorkspace {...(props as ShareMenuProps<LocalWorkspace>)} />\n    );\n  } else if (props.workspace.flavour === WorkspaceFlavour.AFFINE) {\n    return (\n      <ShareAffineWorkspace\n        {...(props as ShareMenuProps<AffineLegacyCloudWorkspace>)}\n      />\n    );\n  }\n  throw new Error('Unreachable');\n};\n","import type {\n  AffineLegacyCloudWorkspace,\n  LocalWorkspace,\n} from '@affine/env/workspace';\nimport { ExportIcon, PublishIcon, ShareIcon } from '@blocksuite/icons';\nimport type { Page } from '@blocksuite/store';\nimport { useBlockSuiteWorkspacePageIsPublic } from '@toeverything/hooks/use-block-suite-workspace-page-is-public';\nimport type { FC } from 'react';\nimport { useRef } from 'react';\nimport { useCallback, useState } from 'react';\n\nimport { Menu } from '../../ui/menu/menu';\nimport { Export } from './export';\nimport { containerStyle, indicatorContainerStyle, tabStyle } from './index.css';\nimport { SharePage } from './share-page';\nimport { ShareWorkspace } from './share-workspace';\nimport { StyledIndicator, StyledShareButton, TabItem } from './styles';\ntype SharePanel = 'SharePage' | 'Export' | 'ShareWorkspace';\nconst MenuItems: Record<SharePanel, FC<ShareMenuProps>> = {\n  SharePage: SharePage,\n  Export: Export,\n  ShareWorkspace: ShareWorkspace,\n};\nconst tabIcons = {\n  SharePage: <ShareIcon />,\n  Export: <ExportIcon />,\n  ShareWorkspace: <PublishIcon />,\n};\nexport type ShareMenuProps<\n  Workspace extends AffineLegacyCloudWorkspace | LocalWorkspace =\n    | AffineLegacyCloudWorkspace\n    | LocalWorkspace\n> = {\n  workspace: Workspace;\n  currentPage: Page;\n  onEnableAffineCloud: (workspace: LocalWorkspace) => void;\n  onOpenWorkspaceSettings: (workspace: Workspace) => void;\n  togglePagePublic: (page: Page, isPublic: boolean) => Promise<void>;\n  toggleWorkspacePublish: (\n    workspace: Workspace,\n    publish: boolean\n  ) => Promise<void>;\n};\n\nfunction assertInstanceOf<T, U extends T>(\n  obj: T,\n  type: new (...args: any[]) => U\n): asserts obj is U {\n  if (!(obj instanceof type)) {\n    throw new Error('Object is not instance of type');\n  }\n}\n\nexport const ShareMenu: FC<ShareMenuProps> = props => {\n  const [activeItem, setActiveItem] = useState<SharePanel>('SharePage');\n  const [isPublic] = useBlockSuiteWorkspacePageIsPublic(props.currentPage);\n  const [open, setOpen] = useState(false);\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const indicatorRef = useRef<HTMLDivElement | null>(null);\n  const startTransaction = useCallback(() => {\n    if (indicatorRef.current && containerRef.current) {\n      const indicator = indicatorRef.current;\n      const activeTabElement = containerRef.current.querySelector(\n        `[data-tab-key=\"${activeItem}\"]`\n      );\n      assertInstanceOf(activeTabElement, HTMLElement);\n      requestAnimationFrame(() => {\n        indicator.style.left = `${activeTabElement.offsetLeft}px`;\n        indicator.style.width = `${activeTabElement.offsetWidth}px`;\n      });\n    }\n  }, [activeItem]);\n  const handleMenuChange = useCallback(\n    (selectedItem: SharePanel) => {\n      setActiveItem(selectedItem);\n      startTransaction();\n    },\n    [setActiveItem, startTransaction]\n  );\n\n  const ActiveComponent = MenuItems[activeItem];\n  interface ShareMenuProps {\n    activeItem: SharePanel;\n    onChangeTab: (selectedItem: SharePanel) => void;\n  }\n  const ShareMenu: FC<ShareMenuProps> = ({ activeItem, onChangeTab }) => {\n    const handleButtonClick = (itemName: SharePanel) => {\n      onChangeTab(itemName);\n      setActiveItem(itemName);\n    };\n\n    return (\n      <div className={tabStyle} ref={containerRef}>\n        {Object.keys(MenuItems).map(item => (\n          <TabItem\n            isActive={activeItem === item}\n            key={item}\n            data-tab-key={item}\n            onClick={() => handleButtonClick(item as SharePanel)}\n          >\n            {tabIcons[item as SharePanel]}\n            {isPublic ? (item === 'SharePage' ? 'SharedPage' : item) : item}\n          </TabItem>\n        ))}\n      </div>\n    );\n  };\n  const Share = (\n    <>\n      <ShareMenu activeItem={activeItem} onChangeTab={handleMenuChange} />\n      <div className={indicatorContainerStyle}>\n        <StyledIndicator\n          ref={(ref: HTMLDivElement | null) => {\n            indicatorRef.current = ref;\n            startTransaction();\n          }}\n        />\n      </div>\n\n      <div className={containerStyle}>\n        <ActiveComponent {...props} />\n      </div>\n    </>\n  );\n  return (\n    <Menu\n      content={Share}\n      visible={open}\n      placement=\"bottom\"\n      trigger={['click']}\n      width={439}\n      disablePortal={true}\n      onClickAway={() => {\n        setOpen(false);\n      }}\n    >\n      <StyledShareButton\n        data-testid=\"share-menu-button\"\n        onClick={() => {\n          setOpen(!open);\n        }}\n        isShared={isPublic}\n      >\n        <div>{isPublic ? 'Shared' : 'Share'}</div>\n      </StyledShareButton>\n    </Menu>\n  );\n};\n","export * from './disable-public-link';\nexport * from './share-menu';\nexport * from './share-workspace';\nexport * from './styles';\n","import type { PageBlockModel } from '@blocksuite/blocks';\nimport type { PageMeta, Workspace } from '@blocksuite/store';\nimport { assertExists } from '@blocksuite/store';\nimport type { Atom } from 'jotai';\nimport { atom, useAtomValue } from 'jotai';\nimport { useMemo } from 'react';\n\ndeclare module '@blocksuite/store' {\n  interface PageMeta {\n    favorite?: boolean;\n    subpageIds: string[];\n    // If a page remove to trash, and it is a subpage, it will remove from its parent `subpageIds`, 'trashRelate' is use for save it parent\n    trashRelate?: string;\n    trash?: boolean;\n    trashDate?: number;\n    updatedDate?: number;\n    mode?: 'page' | 'edgeless';\n    jumpOnce?: boolean;\n    // todo: support `number` in the future\n    isPublic?: boolean;\n  }\n}\n\nconst weakMap = new WeakMap<Workspace, Atom<PageMeta[]>>();\n\nexport function useBlockSuitePageMeta(\n  blockSuiteWorkspace: Workspace\n): PageMeta[] {\n  if (!weakMap.has(blockSuiteWorkspace)) {\n    const baseAtom = atom<PageMeta[]>(blockSuiteWorkspace.meta.pageMetas);\n    weakMap.set(blockSuiteWorkspace, baseAtom);\n    baseAtom.onMount = set => {\n      const dispose = blockSuiteWorkspace.meta.pageMetasUpdated.on(() => {\n        set(blockSuiteWorkspace.meta.pageMetas);\n      });\n      return () => {\n        dispose.dispose();\n      };\n    };\n  }\n  return useAtomValue(weakMap.get(blockSuiteWorkspace) as Atom<PageMeta[]>);\n}\n\nexport function usePageMetaHelper(blockSuiteWorkspace: Workspace) {\n  return useMemo(\n    () => ({\n      setPageTitle: (pageId: string, newTitle: string) => {\n        const page = blockSuiteWorkspace.getPage(pageId);\n        assertExists(page);\n        const pageBlock = page\n          .getBlockByFlavour('affine:page')\n          .at(0) as PageBlockModel;\n        assertExists(pageBlock);\n        page.transact(() => {\n          pageBlock.title.delete(0, pageBlock.title.length);\n          pageBlock.title.insert(newTitle, 0);\n        });\n        blockSuiteWorkspace.meta.setPageMeta(pageId, { title: newTitle });\n      },\n      setPageMeta: (pageId: string, pageMeta: Partial<PageMeta>) => {\n        blockSuiteWorkspace.meta.setPageMeta(pageId, pageMeta);\n      },\n      getPageMeta: (pageId: string) => {\n        return blockSuiteWorkspace.meta.getPageMeta(pageId);\n      },\n      /**\n       * @deprecated\n       */\n      shiftPageMeta: (pageId: string, index: number) => {\n        return blockSuiteWorkspace.meta.shiftPageMeta(pageId, index);\n      },\n    }),\n    [blockSuiteWorkspace]\n  );\n}\n","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","/* (ignored) */","/* (ignored) */"],"names":["useBlockSuiteMetaHelper","blockSuiteWorkspace","setPageMeta","getPageMeta","usePageMetaHelper","addReferenceLink","removeReferenceLink","useReferenceLinkHelper","useCallback","pageId","referenceId","page","getPage","text","Text","fromDelta","insert","attributes","reference","type","frame","getBlockByFlavour","addBlock","id","indexer","backlink","removeSubpageNode","deleteId","metas","useBlockSuitePageMeta","addToFavorite","favorite","removeFromFavorite","toggleFavorite","removeToTrash","isRoot","parentMeta","find","m","subpageIds","includes","forEach","trash","trashDate","Date","trashRelate","undefined","restoreFromTrash","permanentlyDeletePage","removePage","publicPage","isPublic","cancelPublicPage","RouteLogic","useRouterHelper","router","jumpToPage","workspaceId","logic","PUSH","pathname","query","jumpToPublicWorkspacePage","jumpToSubPath","subPath","concat","openPage","isPublicWorkspace","split","REPLACE","FavoriteTag","forwardRef","param","ref","active","onClick","props","t","useAFFiNEI18N","emotion_react_jsx_runtime_browser_esm","tZ","Tooltip","content","placement","IconButton","iconSize","style","color","e","stopPropagation","FavoritedIcon","data-testid","FavoriteIcon","displayName","StyledTableContainer","styled","theme","height","padding","maxWidth","overflowY","breakpoints","down","borderTopLeftRadius","borderBottomLeftRadius","borderTopRightRadius","borderBottomRightRadius","displayFlex","a","StyledTitleLink","fontSize","marginRight","StyledTitleContentWrapper","display","flexDirection","alignItems","width","overflow","StyledTitlePreview","Content","fontWeight","StyledTableBodyRow","TableBodyRow","cursor","visibility","TitleCell","React","icon","desc","suffix","children","render","renderChildren","childElement","BX","HY","ellipsis","weight","lineHeight","TableCell","StyledMenuItem","MenuItem","div","palette","error","main","svg","DisablePublicSharing","onSelect","onItemClick","ShareIcon","DisablePublicSharingModal","PublicLinkDisableModal","ExportToPdfMenuItem","contentParserRef","useRef","currentEditor","globalThis","onClickDownloadPDF","window","contentParser","current","ContentParser","apis","export","savePDFFileAs","root","title","toString","then","result","exportPdf","catch","err","console","mode","ExportToPdfIcon","ExportToHtmlMenuItem","onClickExportHtml","exportHtml","ExportToHtmlIcon","ExportToMarkdownMenuItem","onClickExportMarkdown","exportMarkdown","ExportToMarkdownIcon","Export","Menu","trigger","ExportIcon","endIcon","ArrowRightSmallIcon","MoveToTrash","DeleteTemporarilyIcon","ConfirmModal","confirmModalProps","Confirm","confirmText","Delete","confirmType","OperationCell","onOpenPageInNewTab","onToggleFavoritePage","onRemoveToTrash","onDisablePublicSharing","open","setOpen","useState","openDisableShared","setOpenDisableShared","OperationMenu","environment","isDesktop","OpenInNewIcon","FlexWrapper","justifyContent","disablePortal","MoreVerticalIcon","onConfirm","onClose","onCancel","onConfirmDisable","TrashOperationCell","onPermanentlyDeletePage","onRestorePage","ResetIcon","DeletePermanentlyIcon","useIsSmallDevices","useTheme","isSmallDevices","useMediaQuery","isToday","date","today","getDate","getMonth","getFullYear","isYesterday","yesterday","setDate","isLastWeek","lastWeek","isLastMonth","lastMonth","formatDate","month","padStart","day","hours","getHours","minutes","getMinutes","useDateGroup","data","key","map","item","groupName","fallbackGroup","label","match","groups","isLastYear","lastYear","group","GroupRow","background","AllPagesBody","groupKey","dataWithGroup","TableBody","index","preview","isPublicPage","createDate","updatedDate","onClickPage","bookmarkPage","displayTitle","Fragment","DraggableTitleCell","draggableData","pageTitle","hidden","gap","className","FullSizeButton","setNodeRef","listeners","isDragging","useDraggable","opacity","element","blockCardAround","BlockCard","left","right","styles","CreateNewPagePopup","createNewPage","createNewEdgeless","importFile","PageIcon","EdgelessIcon","ImportIcon","NewPageButton","visible","onClickAway","menuStyles","DropdownButton","onClickDropDown","MobileHead","TableHead","TableHeadRow","proportion","AllPageListMobileView","list","Table","TrashListMobileView","ListItems","defaultSortingFn","ctx","b","valA","valB","revert","order","revertSymbol","localeCompare","getTime","warn","useSorter","defaultSorter","sorter","setSorter","sortCtx","sortingFn","sortedData","sort","shiftOrder","orders","indexOf","length","updateSorter","newVal","resetSorter","AllPagesHead","titleList","showWhen","sortable","filter","ArrowUpBigIcon","ArrowDownBigIcon","PageList","onCreateNewPage","onCreateNewEdgeless","onImportFile","fallback","DEFAULT_SORT_KEY","hasScrollTop","useHasScrollTop","showBorder","maxHeight","TrashListHead","PageListTrashView","mobileList","onOpenPage","tUnion","tArray","ele","tFunction","fn","typeVars","args","rt","DataDefine","create","name","config","is","isByName","isSubOf","superType","supers","some","sup","isSubOfByName","isSuperOf","subType","dataDefine","dataMap","get","constructor","createDataHelper","extends","DataHelper","typesystem","defineData","set","isDataType","isSubtype","sub","context","tUnknown","every","subst","template","instance","realArgs","realRt","arg","i","realArg","Map","tBoolean","tDate","Matcher","register","push","_this__match","_match","allMatched","allMatchedData","v","findData","f","_this_list_find","all","_define_property","_","variableDefineMap","Created","DateTimeIcon","Updated","vars","Object","entries","value","createDefaultFilter","filterMatcher","variable","funcName","defaultArgs","CreateFilterMenu","onChange","VariableSelect","selected","target","staticType","fromEntries","bound","firstArg","impl","dayjs","subtract","endOf","valueOf","isAfter","isBefore","startOf","evalRef","variableMap","evalLiteral","lit","evalFilter","leftValue","evalFilterList","filterList","arrowLeftStyle","arrowRightStyle","months","AFFiNEDatePicker","openMonthPicker","setOpenMonthPicker","selectedDate","setSelectedDate","toDate","handleOpenMonthPicker","handleCloseMonthPicker","handleSelectDate","format","renderCustomHeader","decreaseMonth","increaseMonth","prevMonthButtonDisabled","nextMonthButtonDisabled","selectedYear","year","selectedMonth","ArrowDownSmallIcon","button","disabled","ArrowLeftSmallIcon","renderCustomMonthHeader","decreaseYear","increaseYear","prevYearButtonDisabled","nextYearButtonDisabled","DatePicker","onClickOutside","calendarClassName","weekDayClassName","dayClassName","popperClassName","monthClassName","showPopperArrow","dateFormat","showMonthYearPicker","shouldCloseOnSelect","literalMatcher","Condition","useMemo","ast","renderArgs","userSelect","FunctionSelect","Arg","marginLeft","rest","slice","FilterList","flexWrap","old","oldIndex","CloseIcon","PlusIcon","pageViewDBPromise","openDB","upgrade","database","createObjectStore","keyPath","currentViewAtom","atomWithReset","NIL","useAllPageSetting","savedViews","mutate","useSWRImmutable","fetcher","db","transaction","objectStore","getAll","suspense","fallbackData","revalidateOnMount","currentView","setCurrentView","useAtom","createView","view","put","filterByFilterList","varMap","CreateView","init","uuidv4","backgroundColor","borderRadius","marginTop","Input","placeholder","Button","trim","SaveViewButton","show","changeShow","size","SaveIcon","Modal","ModalWrapper","ModalCloseButton","top","hoverColor","ViewList","setting","appSidebarOpenAtom","FilteredIcon","clsx","StyledModalWrapper","position","StyledModalHeader","margin","textAlign","StyledTextContent","StyledButtonContent","StyledButton","TextButton","border","StyledDangerButton","weakMap","WeakMap","useBlockSuiteWorkspacePageIsPublic","has","baseAtom","atom","meta","writableAtom","workspace","onMount","disposable","pageMetasUpdated","on","dispose","isPublicAtom","assertExists","descriptionStyle","exportButtonStyle","menuItemStyle","svgStyle","currentPage","StyledShareButton","shouldForwardProp","prop","isShared","span","TabItem","isActive","flex","transition","marginBottom","fill","bottom","StyledIndicator","StyledInput","flexGrow","StyledDisableButton","StyledLinkSpan","LocalSharePage","onEnableAffineCloud","AffineSharePage","setIsPublic","showDisable","setShowDisable","sharingUrl","prefixUrl","onClickCreateLink","onClickCopyLink","navigator","clipboard","writeText","toast","onDisablePublic","portal","document","body","readOnly","Trans","i18nKey","onOpenWorkspaceSettings","SharePage","flavour","WorkspaceFlavour","ShareLocalWorkspace","ShareAffineWorkspace","public","ShareWorkspace","MenuItems","tabIcons","PublishIcon","ShareMenu","activeItem","setActiveItem","containerRef","indicatorRef","startTransaction","indicator","activeTabElement","querySelector","assertInstanceOf","obj","HTMLElement","requestAnimationFrame","offsetLeft","offsetWidth","handleMenuChange","selectedItem","ActiveComponent","onChangeTab","handleButtonClick","itemName","keys","data-tab-key","Share","pageMetas","useAtomValue","setPageTitle","newTitle","pageBlock","at","transact","delete","pageMeta","shiftPageMeta"],"sourceRoot":""}