{"version":3,"file":"static/chunks/7473-6691b05a148beb13.js","mappings":"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","sources":["webpack://_N_E/./src/components/blocksuite/workspace-header/styles.css.ts","webpack://_N_E/./src/atoms/guide.ts","webpack://_N_E/./src/atoms/layout.ts","webpack://_N_E/./src/components/affine/transform-workspace-to-affine-modal/style.ts","webpack://_N_E/./src/components/affine/transform-workspace-to-affine-modal/index.tsx","webpack://_N_E/../../packages/component/src/components/affine-banner/index.css.ts","webpack://_N_E/../../packages/component/src/components/affine-banner/browser-warning.tsx","webpack://_N_E/../../packages/component/src/components/affine-banner/download-client.tsx","webpack://_N_E/../../packages/component/src/components/affine-banner/index.tsx","webpack://_N_E/./src/components/blocksuite/workspace-header/download-tips.tsx","webpack://_N_E/./src/components/blocksuite/workspace-header/header-right-items/edit-page.tsx","webpack://_N_E/./src/hooks/current/use-current-page-id.ts","webpack://_N_E/./src/components/blocksuite/workspace-header/header-right-items/theme-mode-switch/style.ts","webpack://_N_E/./src/components/blocksuite/workspace-header/header-right-items/theme-mode-switch/index.tsx","webpack://_N_E/./src/components/blocksuite/workspace-header/header-right-items/language-menu.tsx","webpack://_N_E/./src/components/blocksuite/workspace-header/header-right-items/editor-option-menu.tsx","webpack://_N_E/./src/components/blocksuite/workspace-header/header-right-items/share-menu.tsx","webpack://_N_E/./src/components/blocksuite/workspace-header/header-right-items/sync-user.tsx","webpack://_N_E/./src/components/blocksuite/workspace-header/header-right-items/trash-button-group.tsx","webpack://_N_E/./src/components/blocksuite/workspace-header/header-right-items/user-avatar.tsx","webpack://_N_E/./src/components/blocksuite/workspace-header/utils.tsx","webpack://_N_E/./src/components/blocksuite/workspace-header/header.tsx","webpack://_N_E/./src/components/blocksuite/workspace-header/editor-mode-switch/style.ts","webpack://_N_E/./src/components/blocksuite/workspace-header/editor-mode-switch/switch-items.tsx","webpack://_N_E/./src/components/blocksuite/workspace-header/editor-mode-switch/index.tsx","webpack://_N_E/./src/components/blocksuite/workspace-header/index.tsx","webpack://_N_E/./src/components/pure/quick-search-button/index.tsx","webpack://_N_E/./src/hooks/affine/use-toggle-workspace-publish.ts","webpack://_N_E/./src/hooks/current/use-current-mode.ts","webpack://_N_E/./src/hooks/current/use-current-user.ts","webpack://_N_E/./src/hooks/current/use-current-workspace.ts","webpack://_N_E/./src/hooks/root/use-on-transform-workspace.ts","webpack://_N_E/./src/hooks/use-transform-workspace.ts","webpack://_N_E/../../node_modules/@vanilla-extract/webpack-plugin/extracted.js?184e","webpack://_N_E/../../node_modules/@vanilla-extract/webpack-plugin/extracted.js?e999","webpack://_N_E/<anon>"],"sourcesContent":["import \"src/components/blocksuite/workspace-header/styles.css.ts.vanilla.css!=!../../../../../../node_modules/@vanilla-extract/webpack-plugin/virtualFileLoader/dist/vanilla-extract-webpack-plugin-virtualFileLoader.cjs.js?{\\\"fileName\\\":\\\"src/components/blocksuite/workspace-header/styles.css.ts.vanilla.css\\\",\\\"source\\\":\\\"#H4sIAAAAAAAAE81XwW7jNhC95ysIFwUctAxkJ/YmKhboqd9QoNgDJY4k1hIpkFRsp8i/l6QompJlN7trLJqDEVHD4Zs3b4ajh2OSPL8VCfrnDqEKWFnpFG3W7eE381zUcMCqkozvUpTYlVYoppngKVKa5bujXdOi9W8zku9KKTpOU/RK5BJjUhSMAz69wK1kDZFHnItayHu76w0zTuEw2eJXcSta8Qq9ZVoRtfyLEk3scgsStzXJoQGuv9y7CBDCe8h2TGPStlhC6bBygakkpXXxfvd+9+Bj7j0Zn3hPJGe8/LzQsoPFlxEZL1tLxnSXYhQyInFRC6Ld1oLUatg7B6JHEPysnOE5w9Mc7BnVVYpWSfKzSwCh1BxnjNE66S0oU4aGY+qc2YW/O5OcwlLMtaHG5Ko1LOEM9B6AWwtSs5JjpqFRKcqNDcgb5O/lZSwRCbXh5hXiqHv2mMJAS6hBqRHnmZDUZDUTWovGBN0ekBI1oxM0vdWAIDhfOx8TwgY+h2cDvmQGHOm0GMMlmTmr02BXGVege6PoZ9O70JJwVQhpELp/TZSwxOblr8ik5P5jOTmxfiEZ/XKw7ywiV5RmxcjvDSY5cusZURBT8ugoacgBe1q2g2occh95eI8eVhtl33bKEKxMgnJty4c7UmwdGr3vU1QxSnslaThofHoBdc1axZyPfWViwk571sdekjZC9jQqsiDvGfHcgM1w6mb21DP/F1JSEtPpVr4wg+xXkf9tL+NTuTiRXq4m33iiaprbcG41RPC49Z36mihUM9bkkM9vZnHre2Al9qPynfAY7D/FhTlAnoYwFzgz0GJuOqmsTSvYAPQGhTbfAaSXyMaXi7/kQkzPLqbre728ogvSN7ZkrhPdTuUvV7DVUFhPpM6XFh/6BT35nvXDYZL+CvxAP5tXh+s95/fR7QBm/3uAaUoKs+Rwht2LxeiUrBb5bmaUCF2wV/jly3983V4S1kg0vcpG+kn6gwL2fErucDMFXNCc9uOhptYjJ3Su73xLE/CnuBoYOrxP6U9/uL+IwafnMVK0/oo2XNuFYed6/R/kn6vHp0MSyjoTgofipOZii6M6a5iBOPg+4tzcCpyGrwTKpJkVnCgM1K7h0VnF3Fzmw+gJ/7o5r5zzFwbj1dNIIdV8oO4qX0ej0GSe+3P57Npi8MMuDvbR18W1C4pxl/kBwCCl9eQ29M8XZHolPxNdjFlg/Y2tjy18XuS1sF8qaWXntsnAMpEfSCnk+XQSSuJ0wEe8RYOPAa1ZLOz3u98boIwgo3iunZ+H+Nt0Zn55P21aRiPup61NXezhsY9etMBH88pHvhb/BWt2sZYhDwAA\\\"}!../../../../../../node_modules/@vanilla-extract/webpack-plugin/extracted.js\"\nexport var allPageListTitleWrapper = 'y008zfb';\nexport var browserWarning = 'y008zf6';\nexport var closeButton = 'y008zf7';\nexport var header = 'y008zf1';\nexport var headerContainer = 'y008zf0';\nexport var headerRightSide = 'y008zf5';\nexport var horizontalDivider = 'y008zff';\nexport var horizontalDividerContainer = 'y008zfg';\nexport var pageListTitleIcon = 'y008zfc';\nexport var pageListTitleWrapper = 'y008zfa';\nexport var quickSearchTipButton = 'y008zfd';\nexport var quickSearchTipContent = 'y008zfe';\nexport var searchArrowWrapper = 'y008zf9';\nexport var switchWrapper = 'y008zf8';\nexport var title = 'y008zf3';\nexport var titleContainer = 'y008zf2';\nexport var titleWrapper = 'y008zf4';\nexport var windowAppControl = 'y008zfi';\nexport var windowAppControlsWrapper = 'y008zfh';","// these atoms cannot be moved to @affine/jotai since they use atoms from @affine/component\nimport { appSidebarOpenAtom } from '@affine/component/app-sidebar';\nimport { atom } from 'jotai';\nimport { atomWithStorage } from 'jotai/utils';\n\nexport type Guide = {\n  // should show quick search tips\n  quickSearchTips: boolean;\n  // should show change log\n  changeLog: boolean;\n  // should show recording tips\n  onBoarding: boolean;\n  // should show download client tips\n  downloadClientTip: boolean;\n};\n\nconst guidePrimitiveAtom = atomWithStorage<Guide>('helper-guide', {\n  quickSearchTips: true,\n  changeLog: true,\n  onBoarding: true,\n  downloadClientTip: true,\n});\n\nexport const guideQuickSearchTipsAtom = atom<\n  Guide['quickSearchTips'],\n  [open: boolean],\n  void\n>(\n  get => {\n    const open = get(appSidebarOpenAtom);\n    const guide = get(guidePrimitiveAtom);\n    // only show the tips when the sidebar is closed\n    return guide.quickSearchTips && open === false;\n  },\n  (_, set, open) => {\n    set(guidePrimitiveAtom, tips => ({\n      ...tips,\n      quickSearchTips: open,\n    }));\n  }\n);\n\nexport const guideChangeLogAtom = atom<\n  Guide['changeLog'],\n  [open: boolean],\n  void\n>(\n  get => {\n    return get(guidePrimitiveAtom).changeLog;\n  },\n  (_, set, open) => {\n    set(guidePrimitiveAtom, tips => ({\n      ...tips,\n      changeLog: open,\n    }));\n  }\n);\nexport const guideOnboardingAtom = atom<\n  Guide['onBoarding'],\n  [open: boolean],\n  void\n>(\n  get => {\n    return get(guidePrimitiveAtom).onBoarding;\n  },\n  (_, set, open) => {\n    set(guidePrimitiveAtom, tips => ({\n      ...tips,\n      onBoarding: open,\n    }));\n  }\n);\nexport const guideDownloadClientTipAtom = atom<\n  Guide['downloadClientTip'],\n  [open: boolean],\n  void\n>(\n  get => {\n    return get(guidePrimitiveAtom).downloadClientTip;\n  },\n  (_, set, open) => {\n    set(guidePrimitiveAtom, tips => ({\n      ...tips,\n      downloadClientTip: open,\n    }));\n  }\n);\n","import type { ExpectedLayout } from '@toeverything/plugin-infra/type';\nimport { atom } from 'jotai';\n\nexport const contentLayoutBaseAtom = atom<ExpectedLayout>('editor');\n\ntype SetStateAction<Value> = Value | ((prev: Value) => Value);\nexport const contentLayoutAtom = atom<\n  ExpectedLayout,\n  [SetStateAction<ExpectedLayout>],\n  void\n>(\n  get => get(contentLayoutBaseAtom),\n  (get, set, layout) => {\n    set(contentLayoutBaseAtom, prev => {\n      let setV: (prev: ExpectedLayout) => ExpectedLayout;\n      if (typeof layout !== 'function') {\n        setV = () => layout;\n      } else {\n        setV = layout;\n      }\n      const nextValue = setV(prev);\n      if (nextValue === 'editor') {\n        return nextValue;\n      }\n      if (nextValue.first !== 'editor') {\n        throw new Error('The first element of the layout should be editor.');\n      }\n      if (nextValue.splitPercentage && nextValue.splitPercentage < 70) {\n        throw new Error('The split percentage should be greater than 70.');\n      }\n      return nextValue;\n    });\n  }\n);\n","import { Button, styled } from '@affine/component';\n\nexport const Header = styled('div')({\n  height: '44px',\n  display: 'flex',\n  flexDirection: 'row-reverse',\n  paddingRight: '10px',\n  paddingTop: '10px',\n  flexShrink: 0,\n});\n\nexport const Content = styled('div')({\n  textAlign: 'center',\n});\n\nexport const ContentTitle = styled('h1')({\n  fontSize: '20px',\n  lineHeight: '28px',\n  fontWeight: 600,\n  textAlign: 'center',\n});\n\nexport const StyleTips = styled('div')(() => {\n  return {\n    userSelect: 'none',\n    width: '400px',\n    margin: 'auto',\n    marginBottom: '32px',\n    marginTop: '12px',\n  };\n});\n\nexport const StyleButton = styled(Button)(() => {\n  return {\n    width: '284px',\n    display: 'block',\n    margin: 'auto',\n    marginTop: '16px',\n  };\n});\n","import { IconButton, Modal, ModalWrapper } from '@affine/component';\nimport { useAFFiNEI18N } from '@affine/i18n/hooks';\nimport { CloseIcon } from '@blocksuite/icons';\nimport type React from 'react';\n\nimport { useCurrentUser } from '../../../hooks/current/use-current-user';\nimport { Content, ContentTitle, Header, StyleButton, StyleTips } from './style';\n\nexport type TransformWorkspaceToAffineModalProps = {\n  open: boolean;\n  onClose: () => void;\n  onConform: () => void;\n};\n\nexport const TransformWorkspaceToAffineModal: React.FC<\n  TransformWorkspaceToAffineModalProps\n> = ({ open, onClose, onConform }) => {\n  const t = useAFFiNEI18N();\n  const user = useCurrentUser();\n\n  return (\n    <Modal\n      open={open}\n      onClose={onClose}\n      data-testid=\"enable-affine-cloud-modal\"\n    >\n      <ModalWrapper width={560} height={292}>\n        <Header>\n          <IconButton onClick={onClose}>\n            <CloseIcon />\n          </IconButton>\n        </Header>\n        <Content>\n          <ContentTitle>{t['Enable AFFiNE Cloud']()}?</ContentTitle>\n          <StyleTips>{t['Enable AFFiNE Cloud Description']()}</StyleTips>\n          {/* <StyleTips>{t('Retain cached cloud data')}</StyleTips> */}\n          <div>\n            <StyleButton\n              data-testid=\"confirm-enable-cloud-button\"\n              shape=\"round\"\n              type=\"primary\"\n              onClick={onConform}\n            >\n              {user ? t['Enable']() : t['Sign in and Enable']()}\n            </StyleButton>\n            <StyleButton\n              shape=\"round\"\n              onClick={() => {\n                onClose();\n              }}\n            >\n              {t['Not now']()}\n            </StyleButton>\n          </div>\n        </Content>\n      </ModalWrapper>\n    </Modal>\n  );\n};\n","import \"../../packages/component/src/components/affine-banner/index.css.ts.vanilla.css!=!../../../../../node_modules/@vanilla-extract/webpack-plugin/virtualFileLoader/dist/vanilla-extract-webpack-plugin-virtualFileLoader.cjs.js?{\\\"fileName\\\":\\\"../../packages/component/src/components/affine-banner/index.css.ts.vanilla.css\\\",\\\"source\\\":\\\"#H4sIAAAAAAAAE7VT23KCMBB99yvy0pn2IQ54L770V6IssBUTJgkodvz3LqEoKlOxTh+AYS8n5+yefGygjLTYgmFqHi+Kkce+Box5L+7DWAIYJzZgXrZfUuBIj+/dZCeTJn0cDGsc35WsxHoTa5XLkK9VqnTACqFfORdRhBJ4K70TWqKM67K3Cqyr4baqoTCe1RQiJS03eICrzjq+dT0hmiwVZcCiFFzTZ24sRiXBSguS0Nb0Bl2lRIqx5Ghha9rhTBm0qGTANKTCYgHLs/aR077D0CZnYtdEu+QhEWhPINemqskUNufep14lOMiwF3mxMirNLVRRXfPzHb+TlnFbiz+91NL8d02DsQNHGcKeylp4kz6+yDRuhS7vmSEhZS7b0CNntuk1tvzVEyth4D9dQcWS1NTh5o4Nx4YBHUwT4iq3xFCTtUPTGtTUDeppUie8mcPrNcfR5HLNo9s5NqEHNj/vQeBPjn9gLR1+r5WcWC56sCRvxrS4FCLqX1y0v/dot7C3PIS10j+uoGsAOqWiNlCQqAK0g+vZUCDJhPBZBt9Q3X6eEwYAAA==\\\"}!../../../../../node_modules/@vanilla-extract/webpack-plugin/extracted.js\"\nexport var browserWarningStyle = 'o7g8v21';\nexport var closeButtonStyle = 'o7g8v22';\nexport var closeIconStyle = 'o7g8v23';\nexport var downloadCloseButtonStyle = 'o7g8v27';\nexport var downloadMessageStyle = 'o7g8v28';\nexport var downloadTipContainerStyle = 'o7g8v24';\nexport var downloadTipIconStyle = 'o7g8v26';\nexport var downloadTipStyle = 'o7g8v25';\nexport var linkStyle = 'o7g8v29';","import { CloseIcon } from '@blocksuite/icons';\nimport type React from 'react';\n\nimport {\n  browserWarningStyle,\n  closeButtonStyle,\n  closeIconStyle,\n} from './index.css';\n\nexport const BrowserWarning = ({\n  show,\n  onClose,\n  message,\n}: {\n  show: boolean;\n  onClose: () => void;\n  message: React.ReactNode;\n}) => {\n  if (!show) {\n    return null;\n  }\n  return (\n    <div className={browserWarningStyle}>\n      {message}\n      <div className={closeButtonStyle} onClick={onClose}>\n        <CloseIcon className={closeIconStyle} />\n      </div>\n    </div>\n  );\n};\n\nexport default BrowserWarning;\n","import { Trans } from '@affine/i18n';\nimport { AffineLogoSimCBlue1_1Icon, CloseIcon } from '@blocksuite/icons';\n\nimport {\n  downloadCloseButtonStyle,\n  downloadMessageStyle,\n  downloadTipContainerStyle,\n  downloadTipIconStyle,\n  downloadTipStyle,\n  linkStyle,\n} from './index.css';\n\nexport const DownloadTips = ({ onClose }: { onClose: () => void }) => {\n  return (\n    <div\n      className={downloadTipContainerStyle}\n      data-testid=\"download-client-tip\"\n    >\n      <div className={downloadTipStyle}>\n        <AffineLogoSimCBlue1_1Icon className={downloadTipIconStyle} />\n        <div className={downloadMessageStyle}>\n          <Trans i18nKey=\"com.affine.banner.content\">\n            Enjoying the demo?\n            <a\n              className={linkStyle}\n              href=\"https://affine.pro/download\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n            >\n              Download the AFFiNE Client\n            </a>\n            for the full experience.\n          </Trans>\n        </div>\n      </div>\n      <div\n        className={downloadCloseButtonStyle}\n        onClick={onClose}\n        data-testid=\"download-client-tip-close-button\"\n      >\n        <CloseIcon className={downloadTipIconStyle} />\n      </div>\n    </div>\n  );\n};\n\nexport default DownloadTips;\n","export * from './browser-warning';\nexport * from './download-client';\n","import { DownloadTips } from '@affine/component/affine-banner';\nimport { env } from '@affine/env';\nimport { useAtom } from 'jotai';\nimport { useCallback } from 'react';\n\nimport { guideDownloadClientTipAtom } from '../../../atoms/guide';\n\nexport const DownloadClientTip = () => {\n  const [showDownloadClientTips, setShowDownloadClientTips] = useAtom(\n    guideDownloadClientTipAtom\n  );\n  const onCloseDownloadClient = useCallback(() => {\n    setShowDownloadClientTips(false);\n  }, [setShowDownloadClientTips]);\n\n  if (!showDownloadClientTips || env.isDesktop) {\n    return <></>;\n  }\n  return <DownloadTips onClose={onCloseDownloadClient} />;\n};\nexport default DownloadClientTip;\n","import { displayFlex, styled, TextButton } from '@affine/component';\nimport { useRouter } from 'next/router';\nimport { useCallback } from 'react';\n\nimport { useRouterHelper } from '../../../../hooks/use-router-helper';\nexport const EditPage = () => {\n  const router = useRouter();\n  const pageId = router.query.pageId as string;\n  const workspaceId = router.query.workspaceId as string;\n  const { jumpToPage } = useRouterHelper(router);\n  const onClickPage = useCallback(() => {\n    if (workspaceId && pageId) {\n      jumpToPage(workspaceId, pageId).catch(error => {\n        console.error(error);\n      });\n    }\n  }, [jumpToPage, pageId, workspaceId]);\n  return (\n    <div>\n      <StyledEditPageButton onClick={() => onClickPage()}>\n        Edit Page\n      </StyledEditPageButton>\n    </div>\n  );\n};\nexport default EditPage;\n\nconst StyledEditPageButton = styled(\n  TextButton,\n  {}\n)(() => {\n  return {\n    border: '1px solid var(--affine-primary-color)',\n    color: 'var(--affine-primary-color)',\n    width: '100%',\n    borderRadius: '8px',\n    whiteSpace: 'nowrap',\n    padding: '0 16px',\n    ...displayFlex('center', 'center'),\n  };\n});\n","import { rootCurrentPageIdAtom } from '@affine/workspace/atom';\nimport { useAtom } from 'jotai';\n\n/**\n * @deprecated Use `rootCurrentPageIdAtom` directly instead.\n */\nexport function useCurrentPageId(): [\n  string | null,\n  (newId: string | null) => void\n] {\n  return useAtom(rootCurrentPageIdAtom);\n}\n","import { css, displayFlex, keyframes, styled } from '@affine/component';\n// @ts-expect-error: no types for css-spring\nimport spring, { toString } from 'css-spring';\n\nconst ANIMATE_DURATION = 400;\nexport const StyledThemeModeContainer = styled('div')(() => {\n  return {\n    width: '100%',\n    height: '48px',\n    borderRadius: '6px',\n    backgroundColor: 'transparent',\n    color: 'var(--affine-icon-color)',\n    fontSize: '16px',\n    ...displayFlex('flex-start', 'center'),\n    padding: '0 14px',\n  };\n});\nexport const StyledThemeButtonContainer = styled('div')(() => {\n  return {\n    height: '32px',\n    border: `1px solid var(--affine-border-color)`,\n    borderRadius: '4px',\n    cursor: 'pointer',\n    ...displayFlex('space-evenly', 'center'),\n    flexGrow: 1,\n    marginLeft: '12px',\n  };\n});\nexport const StyledThemeButton = styled('button')<{\n  active: boolean;\n}>(({ active }) => {\n  return {\n    padding: '0 8px',\n    height: '100%',\n    flex: 1,\n    cursor: 'pointer',\n    color: active ? 'var(--affine-primary-color)' : 'var(--affine-icon-color)',\n    whiteSpace: 'nowrap',\n  };\n});\nexport const StyledVerticalDivider = styled('div')(() => {\n  return {\n    width: '1px',\n    height: '100%',\n    borderLeft: `1px solid var(--affine-border-color)`,\n  };\n});\nexport const StyledThemeModeSwitch = styled('button')<{\n  inMenu?: boolean;\n}>(({ inMenu }) => {\n  return {\n    width: inMenu ? '20px' : '32px',\n    height: inMenu ? '20px' : '32px',\n    borderRadius: '6px',\n    overflow: 'hidden',\n    WebkitAppRegion: 'no-drag',\n    backgroundColor: 'transparent',\n    position: 'relative',\n    color: 'var(--affine-icon-color)',\n    fontSize: inMenu ? '20px' : '24px',\n  };\n});\nexport const StyledSwitchItem = styled('div')<{\n  active: boolean;\n  isHover?: boolean;\n  inMenu?: boolean;\n}>(({ active, isHover, inMenu }) => {\n  const activeRaiseAnimate = toString(\n    spring({ top: '0' }, { top: '-100%' }, { preset: 'gentle' })\n  );\n  const raiseAnimate = toString(\n    spring({ top: '100%' }, { top: '0' }, { preset: 'gentle' })\n  );\n  const activeDeclineAnimate = toString(\n    spring({ top: '-100%' }, { top: '0' }, { preset: 'gentle' })\n  );\n  const declineAnimate = toString(\n    spring({ top: '0' }, { top: '100%' }, { preset: 'gentle' })\n  );\n\n  const activeStyle = active\n    ? {\n        color: 'var(--affine-icon-color)',\n        top: '0',\n        animation: css`\n          ${keyframes`${\n            isHover ? activeRaiseAnimate : activeDeclineAnimate\n          }`} ${ANIMATE_DURATION}ms forwards\n        `,\n        animationDirection: isHover ? 'normal' : 'alternate',\n      }\n    : {\n        top: '100%',\n        color: 'var(--affine-primary-color)',\n        backgroundColor: 'var(--affine-hover-color)',\n        animation: css`\n          ${keyframes`${\n            isHover ? raiseAnimate : declineAnimate\n          }`} ${ANIMATE_DURATION}ms forwards\n        `,\n        animationDirection: isHover ? 'normal' : 'alternate',\n      };\n  return css`\n    ${css(displayFlex('center', 'center'))}\n    width:${inMenu ? '20px' : '32px'} ;\n    height: ${inMenu ? '20px' : '32px'} ;\n    position: absolute;\n    left: 0;\n    cursor: pointer;\n    color: ${activeStyle.color}\n    top: ${activeStyle.top};\n    background-color: ${activeStyle.backgroundColor};\n    animation: ${activeStyle.animation};\n    animation-direction: ${activeStyle.animationDirection};\n    //svg {\n    //  width: 24px;\n    //  height: 24px;\n    //},\n  `;\n});\n","import { useAFFiNEI18N } from '@affine/i18n/hooks';\nimport { DarkModeIcon, LightModeIcon } from '@blocksuite/icons';\nimport { useTheme } from 'next-themes';\n\nimport {\n  StyledSwitchItem,\n  StyledThemeButton,\n  StyledThemeButtonContainer,\n  StyledThemeModeContainer,\n  StyledThemeModeSwitch,\n  StyledVerticalDivider,\n} from './style';\n\nexport const MenuThemeModeSwitch = () => {\n  const { setTheme, resolvedTheme, theme } = useTheme();\n  const t = useAFFiNEI18N();\n  return (\n    <StyledThemeModeContainer>\n      <StyledThemeModeSwitch data-testid=\"change-theme-container\" inMenu={true}>\n        <StyledSwitchItem active={resolvedTheme === 'light'} inMenu={true}>\n          <LightModeIcon />\n        </StyledSwitchItem>\n        <StyledSwitchItem active={resolvedTheme === 'dark'} inMenu={true}>\n          <DarkModeIcon />\n        </StyledSwitchItem>\n      </StyledThemeModeSwitch>\n      <StyledThemeButtonContainer>\n        <StyledThemeButton\n          data-testid=\"change-theme-light\"\n          active={theme === 'light'}\n          onClick={() => {\n            setTheme('light');\n          }}\n        >\n          {t['light']()}\n        </StyledThemeButton>\n        <StyledVerticalDivider />\n        <StyledThemeButton\n          data-testid=\"change-theme-dark\"\n          active={theme === 'dark'}\n          onClick={() => {\n            setTheme('dark');\n          }}\n        >\n          {t['dark']()}\n        </StyledThemeButton>\n        <StyledVerticalDivider />\n        <StyledThemeButton\n          active={theme === 'system'}\n          onClick={() => {\n            setTheme('system');\n          }}\n        >\n          {t['system']()}\n        </StyledThemeButton>\n      </StyledThemeButtonContainer>\n    </StyledThemeModeContainer>\n  );\n};\n\nexport default MenuThemeModeSwitch;\n","import { Button, displayFlex, Menu, MenuItem, styled } from '@affine/component';\nimport { LOCALES } from '@affine/i18n';\nimport { useI18N } from '@affine/i18n';\nimport { ArrowDownSmallIcon, LanguageIcon } from '@blocksuite/icons';\nimport type { FC, ReactElement } from 'react';\nimport { useCallback } from 'react';\n\nconst LanguageMenuContent: FC = () => {\n  const i18n = useI18N();\n  const changeLanguage = useCallback(\n    (event: string) => {\n      i18n.changeLanguage(event).catch(err => {\n        console.error(err);\n      });\n    },\n    [i18n]\n  );\n  return (\n    <>\n      {LOCALES.map(option => {\n        return (\n          <StyledListItem\n            key={option.name}\n            title={option.name}\n            onClick={() => {\n              changeLanguage(option.tag);\n            }}\n          >\n            {option.originalName}\n          </StyledListItem>\n        );\n      })}\n    </>\n  );\n};\nexport const LanguageMenu: React.FC = () => {\n  const i18n = useI18N();\n\n  const currentLanguage = LOCALES.find(item => item.tag === i18n.language);\n\n  return (\n    <StyledContainer>\n      <StyledIconContainer>\n        <LanguageIcon />\n      </StyledIconContainer>\n      <StyledButtonContainer>\n        <Menu\n          content={(<LanguageMenuContent />) as ReactElement}\n          placement=\"bottom\"\n          trigger=\"click\"\n          disablePortal={true}\n        >\n          <StyledButton\n            icon={\n              <StyledArrowDownContainer>\n                <ArrowDownSmallIcon />\n              </StyledArrowDownContainer>\n            }\n            iconPosition=\"end\"\n            noBorder={true}\n            data-testid=\"language-menu-button\"\n          >\n            <StyledCurrentLanguage>\n              {currentLanguage?.originalName}\n            </StyledCurrentLanguage>\n          </StyledButton>\n        </Menu>\n      </StyledButtonContainer>\n    </StyledContainer>\n  );\n};\n\nconst StyledListItem = styled(MenuItem)(() => ({\n  width: '132px',\n  height: '38px',\n  fontSize: 'var(--affine-font-base)',\n  textTransform: 'capitalize',\n}));\n\nconst StyledContainer = styled('div')(() => {\n  return {\n    width: '100%',\n    height: '48px',\n    backgroundColor: 'transparent',\n    ...displayFlex('flex-start', 'center'),\n    padding: '0 14px',\n  };\n});\nconst StyledIconContainer = styled('div')(() => {\n  return {\n    width: '20px',\n    height: '20px',\n    color: 'var(--affine-icon-color)',\n    fontSize: '20px',\n    ...displayFlex('flex-start', 'center'),\n  };\n});\nconst StyledButtonContainer = styled('div')(() => {\n  return {\n    width: '100%',\n    height: '32px',\n    borderRadius: '4px',\n    border: `1px solid var(--affine-border-color)`,\n    backgroundColor: 'transparent',\n    ...displayFlex('flex-start', 'center'),\n    marginLeft: '12px',\n  };\n});\nconst StyledButton = styled(Button)(() => {\n  return {\n    width: '100%',\n    height: '32px',\n    borderRadius: '4px',\n    backgroundColor: 'transparent',\n    ...displayFlex('space-between', 'center'),\n    textTransform: 'capitalize',\n    padding: '0',\n  };\n});\nconst StyledArrowDownContainer = styled('div')(() => {\n  return {\n    height: '32px',\n    borderLeft: `1px solid var(--affine-border-color)`,\n    backgroundColor: 'transparent',\n    ...displayFlex('flex-start', 'center'),\n    padding: '4px 6px',\n    fontSize: '24px',\n  };\n});\nconst StyledCurrentLanguage = styled('div')(() => {\n  return {\n    marginLeft: '12px',\n    color: 'var(--affine-text-color)',\n  };\n});\n","// fixme(himself65): refactor this file\nimport { FlexWrapper, IconButton, Menu, MenuItem } from '@affine/component';\nimport { Export, MoveToTrash } from '@affine/component/page-list';\nimport { useAFFiNEI18N } from '@affine/i18n/hooks';\nimport {\n  EdgelessIcon,\n  FavoritedIcon,\n  FavoriteIcon,\n  MoreVerticalIcon,\n  PageIcon,\n} from '@blocksuite/icons';\nimport { assertExists } from '@blocksuite/store';\nimport {\n  useBlockSuitePageMeta,\n  usePageMetaHelper,\n} from '@toeverything/hooks/use-block-suite-page-meta';\nimport { useAtom } from 'jotai';\nimport { useRouter } from 'next/router';\nimport { useState } from 'react';\n\nimport { pageSettingFamily } from '../../../../atoms';\nimport { useBlockSuiteMetaHelper } from '../../../../hooks/affine/use-block-suite-meta-helper';\nimport { useCurrentPageId } from '../../../../hooks/current/use-current-page-id';\nimport { useCurrentWorkspace } from '../../../../hooks/current/use-current-workspace';\nimport { toast } from '../../../../utils';\nimport { MenuThemeModeSwitch } from '../header-right-items/theme-mode-switch';\nimport * as styles from '../styles.css';\nimport { LanguageMenu } from './language-menu';\nconst CommonMenu = () => {\n  const content = (\n    <div\n      onClick={e => {\n        e.stopPropagation();\n      }}\n    >\n      <MenuThemeModeSwitch />\n      <LanguageMenu />\n    </div>\n  );\n  return (\n    <FlexWrapper alignItems=\"center\" justifyContent=\"center\">\n      <Menu\n        content={content}\n        placement=\"bottom\"\n        disablePortal={true}\n        trigger=\"click\"\n      >\n        <IconButton data-testid=\"editor-option-menu\" iconSize={[24, 24]}>\n          <MoreVerticalIcon />\n        </IconButton>\n      </Menu>\n    </FlexWrapper>\n  );\n};\nconst PageMenu = () => {\n  const t = useAFFiNEI18N();\n  // fixme(himself65): remove these hooks ASAP\n  const [workspace] = useCurrentWorkspace();\n  const [pageId] = useCurrentPageId();\n  assertExists(workspace);\n  assertExists(pageId);\n  const blockSuiteWorkspace = workspace.blockSuiteWorkspace;\n  const pageMeta = useBlockSuitePageMeta(blockSuiteWorkspace).find(\n    meta => meta.id === pageId\n  );\n  assertExists(pageMeta);\n  const [setting, setSetting] = useAtom(pageSettingFamily(pageId));\n  const mode = setting?.mode ?? 'page';\n\n  const favorite = pageMeta.favorite ?? false;\n  const { setPageMeta } = usePageMetaHelper(blockSuiteWorkspace);\n  const [openConfirm, setOpenConfirm] = useState(false);\n  const { removeToTrash } = useBlockSuiteMetaHelper(blockSuiteWorkspace);\n  const EditMenu = (\n    <>\n      <>\n        <MenuItem\n          data-testid=\"editor-option-menu-favorite\"\n          onClick={() => {\n            setPageMeta(pageId, { favorite: !favorite });\n            toast(\n              favorite\n                ? t['Removed from Favorites']()\n                : t['Added to Favorites']()\n            );\n          }}\n          icon={\n            favorite ? (\n              <FavoritedIcon style={{ color: 'var(--affine-primary-color)' }} />\n            ) : (\n              <FavoriteIcon />\n            )\n          }\n        >\n          {favorite ? t['Remove from favorites']() : t['Add to Favorites']()}\n        </MenuItem>\n        <MenuItem\n          icon={mode === 'page' ? <EdgelessIcon /> : <PageIcon />}\n          data-testid=\"editor-option-menu-edgeless\"\n          onClick={() => {\n            setSetting(setting => ({\n              mode: setting?.mode === 'page' ? 'edgeless' : 'page',\n            }));\n          }}\n        >\n          {t['Convert to ']()}\n          {mode === 'page' ? t['Edgeless']() : t['Page']()}\n        </MenuItem>\n        <Export />\n        <MoveToTrash\n          data-testid=\"editor-option-menu-delete\"\n          onItemClick={() => {\n            setOpenConfirm(true);\n          }}\n        />\n        <div className={styles.horizontalDividerContainer}>\n          <div className={styles.horizontalDivider} />\n        </div>\n      </>\n\n      <div\n        onClick={e => {\n          e.stopPropagation();\n        }}\n      >\n        <MenuThemeModeSwitch />\n        <LanguageMenu />\n      </div>\n    </>\n  );\n\n  return (\n    <>\n      <FlexWrapper alignItems=\"center\" justifyContent=\"center\">\n        <Menu\n          content={EditMenu}\n          placement=\"bottom-end\"\n          disablePortal={true}\n          trigger=\"click\"\n        >\n          <IconButton data-testid=\"editor-option-menu\" iconSize={[24, 24]}>\n            <MoreVerticalIcon />\n          </IconButton>\n        </Menu>\n        <MoveToTrash.ConfirmModal\n          open={openConfirm}\n          title={pageMeta.title}\n          onConfirm={() => {\n            removeToTrash(pageMeta.id);\n            toast(t['Moved to Trash']());\n            setOpenConfirm(false);\n          }}\n          onCancel={() => {\n            setOpenConfirm(false);\n          }}\n        />\n      </FlexWrapper>\n    </>\n  );\n};\nexport const EditorOptionMenu = () => {\n  const router = useRouter();\n  return router.query.pageId ? <PageMenu /> : <CommonMenu />;\n};\n","import { ShareMenu } from '@affine/component/share-menu';\nimport { config } from '@affine/env';\nimport { Unreachable } from '@affine/env/constant';\nimport type {\n  AffineLegacyCloudWorkspace,\n  LocalWorkspace,\n} from '@affine/env/workspace';\nimport { WorkspaceFlavour, WorkspaceSubPath } from '@affine/env/workspace';\nimport type { Page } from '@blocksuite/store';\nimport { assertEquals } from '@blocksuite/store';\nimport { useRouter } from 'next/router';\nimport type React from 'react';\nimport { useCallback, useState } from 'react';\n\nimport { useToggleWorkspacePublish } from '../../../../hooks/affine/use-toggle-workspace-publish';\nimport { useOnTransformWorkspace } from '../../../../hooks/root/use-on-transform-workspace';\nimport { useRouterHelper } from '../../../../hooks/use-router-helper';\nimport { TransformWorkspaceToAffineModal } from '../../../affine/transform-workspace-to-affine-modal';\nimport type { BaseHeaderProps } from '../header';\n\nconst AffineHeaderShareMenu: React.FC<BaseHeaderProps> = props => {\n  // todo: these hooks should be moved to the top level\n  const togglePublish = useToggleWorkspacePublish(\n    props.workspace as AffineLegacyCloudWorkspace\n  );\n  const helper = useRouterHelper(useRouter());\n  return (\n    <ShareMenu\n      workspace={props.workspace as AffineLegacyCloudWorkspace}\n      currentPage={props.currentPage as Page}\n      onEnableAffineCloud={useCallback(async () => {\n        throw new Unreachable(\n          'Affine workspace should not enable affine cloud again'\n        );\n      }, [])}\n      onOpenWorkspaceSettings={useCallback(\n        async workspace => {\n          return helper.jumpToSubPath(workspace.id, WorkspaceSubPath.SETTING);\n        },\n        [helper]\n      )}\n      togglePagePublic={useCallback(async (page, isPublic) => {\n        page.workspace.setPageMeta(page.id, { isPublic });\n      }, [])}\n      toggleWorkspacePublish={useCallback(\n        async (workspace, publish) => {\n          assertEquals(workspace.flavour, WorkspaceFlavour.AFFINE);\n          assertEquals(workspace.id, props.workspace.id);\n          await togglePublish(publish);\n        },\n        [props.workspace.id, togglePublish]\n      )}\n    />\n  );\n};\n\nconst LocalHeaderShareMenu: React.FC<BaseHeaderProps> = props => {\n  // todo: these hooks should be moved to the top level\n  const onTransformWorkspace = useOnTransformWorkspace();\n  const helper = useRouterHelper(useRouter());\n  const [open, setOpen] = useState(false);\n  return (\n    <>\n      <ShareMenu\n        workspace={props.workspace as LocalWorkspace}\n        currentPage={props.currentPage as Page}\n        onEnableAffineCloud={useCallback(\n          async workspace => {\n            assertEquals(workspace.flavour, WorkspaceFlavour.LOCAL);\n            assertEquals(workspace.id, props.workspace.id);\n            setOpen(true);\n          },\n          [props.workspace.id]\n        )}\n        onOpenWorkspaceSettings={useCallback(\n          async workspace => {\n            await helper.jumpToSubPath(workspace.id, WorkspaceSubPath.SETTING);\n          },\n          [helper]\n        )}\n        togglePagePublic={useCallback(async () => {\n          // local workspace should not have public page\n          throw new Error('unreachable');\n        }, [])}\n        toggleWorkspacePublish={useCallback(\n          async workspace => {\n            assertEquals(workspace.flavour, WorkspaceFlavour.LOCAL);\n            assertEquals(workspace.id, props.workspace.id);\n            await helper.jumpToSubPath(workspace.id, WorkspaceSubPath.SETTING);\n          },\n          [helper, props.workspace.id]\n        )}\n      />\n      <TransformWorkspaceToAffineModal\n        open={open}\n        onClose={() => {\n          setOpen(false);\n        }}\n        onConform={async () => {\n          await onTransformWorkspace(\n            WorkspaceFlavour.LOCAL,\n            WorkspaceFlavour.AFFINE,\n            props.workspace as LocalWorkspace\n          );\n          setOpen(false);\n        }}\n      />\n    </>\n  );\n};\n\nexport const HeaderShareMenu: React.FC<BaseHeaderProps> = props => {\n  if (!config.enableLegacyCloud) {\n    return null;\n  }\n  if (props.workspace.flavour === WorkspaceFlavour.AFFINE) {\n    return <AffineHeaderShareMenu {...props} />;\n  } else if (props.workspace.flavour === WorkspaceFlavour.LOCAL) {\n    return <LocalHeaderShareMenu {...props} />;\n  }\n  throw new Error('unreachable');\n};\n","import { displayFlex, IconButton, styled, Tooltip } from '@affine/component';\nimport { config } from '@affine/env';\nimport type { LocalWorkspace } from '@affine/env/workspace';\nimport { WorkspaceFlavour } from '@affine/env/workspace';\nimport { useAFFiNEI18N } from '@affine/i18n/hooks';\nimport {\n  getLoginStorage,\n  setLoginStorage,\n  SignMethod,\n} from '@affine/workspace/affine/login';\nimport { affineAuth } from '@affine/workspace/affine/shared';\nimport {\n  CloudWorkspaceIcon,\n  LocalWorkspaceIcon,\n  NoNetworkIcon,\n} from '@blocksuite/icons';\nimport { assertEquals, assertExists } from '@blocksuite/store';\nimport { useRouter } from 'next/router';\nimport React, { useEffect, useState } from 'react';\n\nimport { useCurrentWorkspace } from '../../../../hooks/current/use-current-workspace';\nimport { useTransformWorkspace } from '../../../../hooks/use-transform-workspace';\nimport type { AffineOfficialWorkspace } from '../../../../shared';\nimport { TransformWorkspaceToAffineModal } from '../../../affine/transform-workspace-to-affine-modal';\n\nconst IconWrapper = styled('div')(() => {\n  return {\n    width: '32px',\n    height: '32px',\n    marginRight: '12px',\n    fontSize: '24px',\n    color: 'var(--affine-icon-color)',\n    WebkitAppRegion: 'no-drag',\n    ...displayFlex('center', 'center'),\n  };\n});\n\nconst getStatus = (workspace: AffineOfficialWorkspace) => {\n  if (!navigator.onLine) {\n    return 'offline';\n  }\n  if (workspace.flavour === 'local') {\n    return 'local';\n  }\n  return 'cloud';\n};\n\nexport const SyncUser = () => {\n  //#region fixme(himself65): remove these hooks ASAP\n  const [workspace] = useCurrentWorkspace();\n  assertExists(workspace);\n  const router = useRouter();\n\n  const [status, setStatus] = useState<'offline' | 'local' | 'cloud'>(\n    getStatus(workspace)\n  );\n  const [prevWorkspace, setPrevWorkspace] = useState(workspace);\n  if (prevWorkspace !== workspace) {\n    setPrevWorkspace(workspace);\n    setStatus(getStatus(workspace));\n  }\n\n  useEffect(() => {\n    const online = () => {\n      setStatus(getStatus(workspace));\n    };\n\n    const offline = () => {\n      setStatus('offline');\n    };\n    window.addEventListener('online', online);\n    window.addEventListener('offline', offline);\n    return () => {\n      window.removeEventListener('online', online);\n      window.removeEventListener('offline', offline);\n    };\n  }, [workspace]);\n  //#endregion\n\n  const [open, setOpen] = useState(false);\n\n  const t = useAFFiNEI18N();\n  const transformWorkspace = useTransformWorkspace();\n\n  if (!config.enableLegacyCloud) {\n    return null;\n  }\n\n  if (status === 'offline') {\n    return (\n      <Tooltip\n        content={t['Please make sure you are online']()}\n        placement=\"bottom-end\"\n      >\n        <IconWrapper>\n          <NoNetworkIcon />\n        </IconWrapper>\n      </Tooltip>\n    );\n  }\n\n  if (status === 'local') {\n    return (\n      <>\n        <Tooltip\n          content={t['Saved then enable AFFiNE Cloud']()}\n          placement=\"bottom-end\"\n        >\n          <IconButton\n            onClick={() => {\n              setOpen(true);\n            }}\n            style={{ marginRight: '12px' }}\n          >\n            <LocalWorkspaceIcon />\n          </IconButton>\n        </Tooltip>\n        <TransformWorkspaceToAffineModal\n          open={open}\n          onClose={() => {\n            setOpen(false);\n          }}\n          onConform={async () => {\n            if (!getLoginStorage()) {\n              const response = await affineAuth.generateToken(\n                SignMethod.Google\n              );\n              if (response) {\n                setLoginStorage(response);\n              }\n              router.reload();\n              return;\n            }\n            assertEquals(workspace.flavour, WorkspaceFlavour.LOCAL);\n            const id = await transformWorkspace(\n              WorkspaceFlavour.LOCAL,\n              WorkspaceFlavour.AFFINE,\n              workspace as LocalWorkspace\n            );\n            // fixme(himself65): refactor this\n            await router.replace({\n              pathname: `/workspace/[workspaceId]/all`,\n              query: {\n                workspaceId: id,\n              },\n            });\n            setOpen(false);\n            router.reload();\n          }}\n        />\n      </>\n    );\n  }\n\n  return (\n    <Tooltip content={t['Synced with AFFiNE Cloud']()} placement=\"bottom-end\">\n      <IconWrapper>\n        <CloudWorkspaceIcon />\n      </IconWrapper>\n    </Tooltip>\n  );\n};\n\nexport default SyncUser;\n","import { Button, Confirm } from '@affine/component';\nimport { useAFFiNEI18N } from '@affine/i18n/hooks';\nimport { assertExists } from '@blocksuite/store';\nimport { useBlockSuitePageMeta } from '@toeverything/hooks/use-block-suite-page-meta';\nimport { useRouter } from 'next/router';\nimport { useState } from 'react';\n\nimport { useBlockSuiteMetaHelper } from '../../../../hooks/affine/use-block-suite-meta-helper';\nimport { useCurrentPageId } from '../../../../hooks/current/use-current-page-id';\nimport { useCurrentWorkspace } from '../../../../hooks/current/use-current-workspace';\n\nexport const TrashButtonGroup = () => {\n  // fixme(himself65): remove these hooks ASAP\n  const [workspace] = useCurrentWorkspace();\n  const [pageId] = useCurrentPageId();\n  assertExists(workspace);\n  assertExists(pageId);\n  const blockSuiteWorkspace = workspace.blockSuiteWorkspace;\n  const pageMeta = useBlockSuitePageMeta(blockSuiteWorkspace).find(\n    meta => meta.id === pageId\n  );\n  assertExists(pageMeta);\n  const t = useAFFiNEI18N();\n  const router = useRouter();\n  const { restoreFromTrash } = useBlockSuiteMetaHelper(blockSuiteWorkspace);\n\n  const [open, setOpen] = useState(false);\n\n  return (\n    <>\n      <Button\n        bold={true}\n        shape=\"round\"\n        style={{ marginRight: '24px' }}\n        onClick={() => {\n          restoreFromTrash(pageId);\n        }}\n      >\n        {t['Restore it']()}\n      </Button>\n      <Button\n        bold={true}\n        shape=\"round\"\n        type=\"danger\"\n        onClick={() => {\n          setOpen(true);\n        }}\n      >\n        {t['Delete permanently']()}\n      </Button>\n      <Confirm\n        title={t['TrashButtonGroupTitle']()}\n        content={t['TrashButtonGroupDescription']()}\n        confirmText={t['Delete']()}\n        confirmType=\"danger\"\n        open={open}\n        onConfirm={() => {\n          // fixme(himself65): remove these hooks ASAP\n          router\n            .push({\n              pathname: '/workspace/[workspaceId]/all',\n              query: {\n                workspaceId: workspace.id,\n              },\n            })\n            .catch(error => {\n              console.error(error);\n            });\n          blockSuiteWorkspace.removePage(pageId);\n        }}\n        onCancel={() => {\n          setOpen(false);\n        }}\n        onClose={() => {\n          setOpen(false);\n        }}\n      />\n    </>\n  );\n};\n\nexport default TrashButtonGroup;\n","import { Menu, MenuItem } from '@affine/component';\nimport { AffineIcon, SignOutIcon } from '@blocksuite/icons';\nimport type { CSSProperties } from 'react';\nimport { forwardRef } from 'react';\n\nimport { useCurrentUser } from '../../../../hooks/current/use-current-user';\nconst EditMenu = (\n  <MenuItem data-testid=\"editor-option-menu-favorite\" icon={<SignOutIcon />}>\n    Sign Out\n  </MenuItem>\n);\n\nexport const UserAvatar = () => {\n  const user = useCurrentUser();\n  return (\n    <Menu\n      width={276}\n      content={EditMenu}\n      placement=\"bottom\"\n      disablePortal={true}\n      trigger=\"click\"\n    >\n      {user ? (\n        <WorkspaceAvatar\n          size={24}\n          name={user.name}\n          avatar={user.avatar_url}\n        ></WorkspaceAvatar>\n      ) : (\n        <WorkspaceAvatar size={24}></WorkspaceAvatar>\n      )}\n    </Menu>\n  );\n};\n\ninterface WorkspaceAvatarProps {\n  size: number;\n  name?: string;\n  avatar?: string;\n  style?: CSSProperties;\n}\n\nexport const WorkspaceAvatar = forwardRef<HTMLDivElement, WorkspaceAvatarProps>(\n  function WorkspaceAvatar(props, ref) {\n    const size = props.size || 20;\n    const sizeStr = size + 'px';\n\n    return (\n      <>\n        {props.avatar ? (\n          <div\n            style={{\n              ...props.style,\n              width: sizeStr,\n              height: sizeStr,\n              color: '#fff',\n              borderRadius: '50%',\n              overflow: 'hidden',\n              display: 'inline-block',\n              verticalAlign: 'middle',\n            }}\n            ref={ref}\n          >\n            <picture>\n              <img\n                style={{ width: sizeStr, height: sizeStr }}\n                src={props.avatar}\n                alt=\"\"\n                referrerPolicy=\"no-referrer\"\n              />\n            </picture>\n          </div>\n        ) : (\n          <div\n            style={{\n              ...props.style,\n              width: sizeStr,\n              height: sizeStr,\n              border: '1px solid #fff',\n              color: '#fff',\n              fontSize: Math.ceil(0.5 * size) + 'px',\n              borderRadius: '50%',\n              textAlign: 'center',\n              lineHeight: size + 'px',\n              display: 'inline-block',\n              verticalAlign: 'middle',\n            }}\n            ref={ref}\n          >\n            {props.name ? (\n              props.name.substring(0, 1)\n            ) : (\n              <AffineIcon fontSize={24} color={'#5438FF'} />\n            )}\n          </div>\n        )}\n      </>\n    );\n  }\n);\nexport default UserAvatar;\n","import { env } from '@affine/env';\nimport { Trans } from '@affine/i18n';\nimport { useAFFiNEI18N } from '@affine/i18n/hooks';\nimport type React from 'react';\nimport { useEffect, useState } from 'react';\n\nconst minimumChromeVersion = 102;\n\nexport const shouldShowWarning = () => {\n  if (env.isDesktop) {\n    // even though desktop have compatibility issues, we don't want to show the warning\n    return false;\n  }\n  if (!env.isBrowser) {\n    // disable in SSR\n    return false;\n  }\n  if (env.isChrome) {\n    return env.chromeVersion < minimumChromeVersion;\n  } else {\n    return !env.isMobile;\n  }\n};\n\nexport const OSWarningMessage: React.FC = () => {\n  const t = useAFFiNEI18N();\n  const [notChrome, setNotChrome] = useState(false);\n  const [notGoodVersion, setNotGoodVersion] = useState(false);\n  useEffect(() => {\n    setNotChrome(env.isBrowser && !env.isChrome);\n    setNotGoodVersion(\n      env.isBrowser && env.isChrome && env.chromeVersion < minimumChromeVersion\n    );\n  }, []);\n\n  if (notChrome) {\n    return (\n      <span>\n        <Trans i18nKey=\"recommendBrowser\">\n          We recommend the <strong>Chrome</strong> browser for optimal\n          experience.\n        </Trans>\n      </span>\n    );\n  } else if (notGoodVersion) {\n    return <span>{t['upgradeBrowser']()}</span>;\n  }\n  return null;\n};\n","import { BrowserWarning } from '@affine/component/affine-banner';\nimport {\n  appSidebarFloatingAtom,\n  appSidebarOpenAtom,\n} from '@affine/component/app-sidebar';\nimport { SidebarSwitch } from '@affine/component/app-sidebar/sidebar-header';\nimport { WorkspaceFlavour } from '@affine/env/workspace';\nimport { CloseIcon, MinusIcon, RoundedRectangleIcon } from '@blocksuite/icons';\nimport type { Page } from '@blocksuite/store';\nimport { affinePluginsAtom } from '@toeverything/plugin-infra/manager';\nimport type { PluginUIAdapter } from '@toeverything/plugin-infra/type';\nimport { useAtom, useAtomValue } from 'jotai';\nimport type { FC, HTMLAttributes, PropsWithChildren, ReactNode } from 'react';\nimport {\n  forwardRef,\n  memo,\n  useCallback,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\n\nimport { guideDownloadClientTipAtom } from '../../../atoms/guide';\nimport { contentLayoutAtom } from '../../../atoms/layout';\nimport { useCurrentMode } from '../../../hooks/current/use-current-mode';\nimport type { AffineOfficialWorkspace } from '../../../shared';\nimport { DownloadClientTip } from './download-tips';\nimport EditPage from './header-right-items/edit-page';\nimport { EditorOptionMenu } from './header-right-items/editor-option-menu';\nimport { HeaderShareMenu } from './header-right-items/share-menu';\nimport SyncUser from './header-right-items/sync-user';\nimport TrashButtonGroup from './header-right-items/trash-button-group';\nimport UserAvatar from './header-right-items/user-avatar';\nimport * as styles from './styles.css';\nimport { OSWarningMessage, shouldShowWarning } from './utils';\n\nexport type BaseHeaderProps<\n  Workspace extends AffineOfficialWorkspace = AffineOfficialWorkspace\n> = {\n  workspace: Workspace;\n  currentPage: Page | null;\n  isPublic: boolean;\n  leftSlot?: ReactNode;\n};\n\nexport enum HeaderRightItemName {\n  EditorOptionMenu = 'editorOptionMenu',\n  TrashButtonGroup = 'trashButtonGroup',\n  SyncUser = 'syncUser',\n  ShareMenu = 'shareMenu',\n  EditPage = 'editPage',\n  UserAvatar = 'userAvatar',\n\n  // some windows only items\n  WindowsAppControls = 'windowsAppControls',\n}\n\ntype HeaderItem = {\n  Component: FC<BaseHeaderProps>;\n  // todo: public workspace should be one of the flavour\n  availableWhen: (\n    workspace: AffineOfficialWorkspace,\n    currentPage: Page | null,\n    status: {\n      isPublic: boolean;\n    }\n  ) => boolean;\n};\n\nconst HeaderRightItems: Record<HeaderRightItemName, HeaderItem> = {\n  [HeaderRightItemName.TrashButtonGroup]: {\n    Component: TrashButtonGroup,\n    availableWhen: (_, currentPage) => {\n      return currentPage?.meta.trash === true;\n    },\n  },\n  [HeaderRightItemName.SyncUser]: {\n    Component: SyncUser,\n    availableWhen: (_, currentPage, { isPublic }) => {\n      return !isPublic;\n    },\n  },\n  [HeaderRightItemName.ShareMenu]: {\n    Component: HeaderShareMenu,\n    availableWhen: (workspace, currentPage) => {\n      return workspace.flavour !== WorkspaceFlavour.PUBLIC && !!currentPage;\n    },\n  },\n  [HeaderRightItemName.EditPage]: {\n    Component: EditPage,\n    availableWhen: (workspace, currentPage, { isPublic }) => {\n      return isPublic;\n    },\n  },\n  [HeaderRightItemName.UserAvatar]: {\n    Component: UserAvatar,\n    availableWhen: (workspace, currentPage, { isPublic }) => {\n      return isPublic;\n    },\n  },\n  [HeaderRightItemName.EditorOptionMenu]: {\n    Component: EditorOptionMenu,\n    availableWhen: (_, currentPage, { isPublic }) => {\n      return !isPublic;\n    },\n  },\n  [HeaderRightItemName.WindowsAppControls]: {\n    Component: () => {\n      const handleMinimizeApp = useCallback(() => {\n        window.apis?.ui.handleMinimizeApp().catch(err => {\n          console.error(err);\n        });\n      }, []);\n      const handleMaximizeApp = useCallback(() => {\n        window.apis?.ui.handleMaximizeApp().catch(err => {\n          console.error(err);\n        });\n      }, []);\n      const handleCloseApp = useCallback(() => {\n        window.apis?.ui.handleCloseApp().catch(err => {\n          console.error(err);\n        });\n      }, []);\n      return (\n        <div className={styles.windowAppControlsWrapper}>\n          <button\n            data-type=\"minimize\"\n            className={styles.windowAppControl}\n            onClick={handleMinimizeApp}\n          >\n            <MinusIcon />\n          </button>\n          <button\n            data-type=\"maximize\"\n            className={styles.windowAppControl}\n            onClick={handleMaximizeApp}\n          >\n            <RoundedRectangleIcon />\n          </button>\n          <button\n            data-type=\"close\"\n            className={styles.windowAppControl}\n            onClick={handleCloseApp}\n          >\n            <CloseIcon />\n          </button>\n        </div>\n      );\n    },\n    availableWhen: () => {\n      return environment.isDesktop && environment.isWindows;\n    },\n  },\n};\n\nexport type HeaderProps = BaseHeaderProps;\n\nconst PluginHeaderItemAdapter = memo<{\n  headerItem: PluginUIAdapter['headerItem'];\n}>(function PluginHeaderItemAdapter({ headerItem }) {\n  return (\n    <div>\n      {headerItem({\n        contentLayoutAtom,\n      })}\n    </div>\n  );\n});\n\nconst PluginHeader = () => {\n  const affinePluginsMap = useAtomValue(affinePluginsAtom);\n  const plugins = useMemo(\n    () => Object.values(affinePluginsMap),\n    [affinePluginsMap]\n  );\n\n  return (\n    <div>\n      {plugins\n        .filter(plugin => plugin.uiAdapter.headerItem != null)\n        .map(plugin => {\n          const headerItem = plugin.uiAdapter\n            .headerItem as PluginUIAdapter['headerItem'];\n          return (\n            <PluginHeaderItemAdapter\n              key={plugin.definition.id}\n              headerItem={headerItem}\n            />\n          );\n        })}\n    </div>\n  );\n};\n\nexport const Header = forwardRef<\n  HTMLDivElement,\n  PropsWithChildren<HeaderProps> & HTMLAttributes<HTMLDivElement>\n>((props, ref) => {\n  const [showWarning, setShowWarning] = useState(false);\n  const [showGuideDownloadClientTip, setShowGuideDownloadClientTip] =\n    useState(false);\n  const [shouldShowGuideDownloadClientTip] = useAtom(\n    guideDownloadClientTipAtom\n  );\n  useEffect(() => {\n    setShowWarning(shouldShowWarning());\n    setShowGuideDownloadClientTip(shouldShowGuideDownloadClientTip);\n  }, [shouldShowGuideDownloadClientTip]);\n  const open = useAtomValue(appSidebarOpenAtom);\n  const appSidebarFloating = useAtomValue(appSidebarFloatingAtom);\n\n  const mode = useCurrentMode();\n\n  return (\n    <div\n      className={styles.headerContainer}\n      ref={ref}\n      data-has-warning={showWarning}\n      data-open={open}\n      data-sidebar-floating={appSidebarFloating}\n    >\n      {showGuideDownloadClientTip ? (\n        <DownloadClientTip />\n      ) : (\n        <BrowserWarning\n          show={showWarning}\n          message={<OSWarningMessage />}\n          onClose={() => {\n            setShowWarning(false);\n          }}\n        />\n      )}\n\n      <div\n        className={styles.header}\n        data-has-warning={showWarning}\n        data-testid=\"editor-header-items\"\n        data-is-edgeless={mode === 'edgeless'}\n      >\n        <div style={{ display: 'flex', alignItems: 'center' }}>\n          {!open && <SidebarSwitch />}\n          {props.leftSlot}\n        </div>\n\n        {props.children}\n        <div className={styles.headerRightSide}>\n          <PluginHeader />\n          {useMemo(() => {\n            return Object.entries(HeaderRightItems).map(\n              ([name, { availableWhen, Component }]) => {\n                if (\n                  availableWhen(props.workspace, props.currentPage, {\n                    isPublic: props.isPublic,\n                  })\n                ) {\n                  return (\n                    <Component\n                      workspace={props.workspace}\n                      currentPage={props.currentPage}\n                      isPublic={props.isPublic}\n                      key={name}\n                    />\n                  );\n                }\n                return null;\n              }\n            );\n          }, [props])}\n        </div>\n      </div>\n    </div>\n  );\n});\n\nHeader.displayName = 'Header';\n","import { displayFlex, styled } from '@affine/component';\n\nexport const StyledEditorModeSwitch = styled('div')<{\n  switchLeft: boolean;\n  showAlone?: boolean;\n}>(({ switchLeft, showAlone }) => {\n  return {\n    width: showAlone ? '40px' : '78px',\n    height: '32px',\n    background: showAlone\n      ? 'transparent'\n      : 'var(--affine-background-secondary-color)',\n    borderRadius: '12px',\n    ...displayFlex('space-between', 'center'),\n    padding: '0 8px',\n    position: 'relative',\n\n    '::after': {\n      content: '\"\"',\n      display: showAlone ? 'none' : 'block',\n      width: '24px',\n      height: '24px',\n      background: 'var(--affine-background-primary-color)',\n      boxShadow: 'var(--affine-shadow-1)',\n      borderRadius: '8px',\n      zIndex: 1,\n      position: 'absolute',\n      transform: `translateX(${switchLeft ? '0' : '38px'})`,\n      transition: 'all .15s',\n    },\n  };\n});\n\nexport const StyledSwitchItem = styled('button')<{\n  active?: boolean;\n  hide?: boolean;\n}>(({ active = false, hide = false }) => {\n  return {\n    width: '24px',\n    height: '24px',\n    borderRadius: '8px',\n    WebkitAppRegion: 'no-drag',\n    boxShadow: active ? 'var(--affine-shadow-1)' : 'none',\n    color: active ? 'var(--affine-primary-color)' : 'var(--affine-icon-color)',\n    display: hide ? 'none' : 'inline-flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    position: 'relative',\n    zIndex: 2,\n    fontSize: '20px',\n    path: {\n      fill: 'currentColor',\n    },\n  };\n});\n","import { InternalLottie } from '@affine/component/internal-lottie';\nimport type { HTMLAttributes } from 'react';\nimport type React from 'react';\nimport { cloneElement, useState } from 'react';\n\nimport { StyledSwitchItem } from './style';\n\ntype HoverAnimateControllerProps = {\n  active?: boolean;\n  hide?: boolean;\n  children: React.ReactElement;\n} & HTMLAttributes<HTMLButtonElement>;\n\nconst HoverAnimateController = ({\n  active,\n  hide,\n  children,\n  ...props\n}: HoverAnimateControllerProps) => {\n  const [startAnimate, setStartAnimate] = useState(false);\n  return (\n    <StyledSwitchItem\n      hide={hide}\n      active={active}\n      onMouseEnter={() => {\n        setStartAnimate(true);\n      }}\n      onMouseLeave={() => {\n        setStartAnimate(false);\n      }}\n      {...props}\n    >\n      {cloneElement(children, {\n        isStopped: !startAnimate,\n        speed: 5,\n        width: 20,\n        height: 20,\n      })}\n    </StyledSwitchItem>\n  );\n};\n\nexport const PageSwitchItem = (\n  props: Omit<HoverAnimateControllerProps, 'children'>\n) => {\n  return (\n    <HoverAnimateController {...props}>\n      <InternalLottie\n        options={{\n          loop: false,\n          autoplay: false,\n          animationData: require('./animation-data/page-hover.json'),\n          rendererSettings: {\n            preserveAspectRatio: 'xMidYMid slice',\n          },\n        }}\n      />\n    </HoverAnimateController>\n  );\n};\n\nexport const EdgelessSwitchItem = (\n  props: Omit<HoverAnimateControllerProps, 'children'>\n) => {\n  return (\n    <HoverAnimateController {...props}>\n      <InternalLottie\n        options={{\n          loop: false,\n          autoplay: false,\n          animationData: require('./animation-data/edgeless-hover.json'),\n          rendererSettings: {\n            preserveAspectRatio: 'xMidYMid slice',\n          },\n        }}\n      />\n    </HoverAnimateController>\n  );\n};\n","import { useAFFiNEI18N } from '@affine/i18n/hooks';\nimport { assertExists } from '@blocksuite/store';\nimport { useBlockSuitePageMeta } from '@toeverything/hooks/use-block-suite-page-meta';\nimport { useAtom } from 'jotai';\nimport type { CSSProperties } from 'react';\n\nimport { pageSettingFamily } from '../../../../atoms';\nimport type { BlockSuiteWorkspace } from '../../../../shared';\nimport { toast } from '../../../../utils';\nimport { StyledEditorModeSwitch } from './style';\nimport { EdgelessSwitchItem, PageSwitchItem } from './switch-items';\n\nexport type EditorModeSwitchProps = {\n  // todo(himself65): combine these two properties\n  blockSuiteWorkspace: BlockSuiteWorkspace;\n  pageId: string;\n  style?: CSSProperties;\n};\n\nexport const EditorModeSwitch = ({\n  style,\n  blockSuiteWorkspace,\n  pageId,\n}: EditorModeSwitchProps) => {\n  const [setting, setSetting] = useAtom(pageSettingFamily(pageId));\n  const currentMode = setting?.mode ?? 'page';\n  const pageMeta = useBlockSuitePageMeta(blockSuiteWorkspace).find(\n    meta => meta.id === pageId\n  );\n  const t = useAFFiNEI18N();\n  assertExists(pageMeta);\n  const { trash } = pageMeta;\n\n  return (\n    <StyledEditorModeSwitch\n      style={style}\n      switchLeft={currentMode === 'page'}\n      showAlone={trash}\n    >\n      <PageSwitchItem\n        data-testid=\"switch-page-mode-button\"\n        active={currentMode === 'page'}\n        hide={trash && currentMode !== 'page'}\n        onClick={() => {\n          setSetting(setting => {\n            if (setting?.mode !== 'page') {\n              toast(t['com.affine.pageMode']());\n            }\n            return { ...setting, mode: 'page' };\n          });\n        }}\n      />\n      <EdgelessSwitchItem\n        data-testid=\"switch-edgeless-mode-button\"\n        active={currentMode === 'edgeless'}\n        hide={trash && currentMode !== 'edgeless'}\n        onClick={() => {\n          setSetting(setting => {\n            if (setting?.mode !== 'edgeless') {\n              toast(t['com.affine.pageMode']());\n            }\n            return { ...setting, mode: 'edgeless' };\n          });\n        }}\n      />\n    </StyledEditorModeSwitch>\n  );\n};\n","import { assertExists } from '@blocksuite/store';\nimport { useBlockSuitePageMeta } from '@toeverything/hooks/use-block-suite-page-meta';\nimport { useSetAtom } from 'jotai';\nimport type {\n  FC,\n  HTMLAttributes,\n  PropsWithChildren,\n  ReactElement,\n} from 'react';\nimport { useRef } from 'react';\n\nimport { openQuickSearchModalAtom } from '../../../atoms';\nimport { QuickSearchButton } from '../../pure/quick-search-button';\nimport { EditorModeSwitch } from './editor-mode-switch';\nimport type { BaseHeaderProps } from './header';\nimport { Header } from './header';\nimport * as styles from './styles.css';\n\nexport type WorkspaceHeaderProps = BaseHeaderProps;\n\nexport const BlockSuiteEditorHeader: FC<\n  PropsWithChildren<WorkspaceHeaderProps> & HTMLAttributes<HTMLDivElement>\n> = (props): ReactElement => {\n  const { workspace, currentPage, children, isPublic } = props;\n  // fixme(himself65): remove this atom and move it to props\n  const setOpenQuickSearch = useSetAtom(openQuickSearchModalAtom);\n  const pageMeta = useBlockSuitePageMeta(workspace.blockSuiteWorkspace).find(\n    meta => meta.id === currentPage?.id\n  );\n  const headerRef = useRef<HTMLDivElement>(null);\n  assertExists(pageMeta);\n  const title = pageMeta.title;\n\n  return (\n    <Header ref={headerRef} {...props}>\n      {children}\n      {!isPublic && currentPage && (\n        <div className={styles.titleContainer}>\n          <div className={styles.titleWrapper}>\n            <div className={styles.switchWrapper}>\n              <EditorModeSwitch\n                blockSuiteWorkspace={workspace.blockSuiteWorkspace}\n                pageId={currentPage.id}\n                style={{\n                  marginRight: '12px',\n                }}\n              />\n            </div>\n            <div className={styles.title}>{title || 'Untitled'}</div>\n\n            <div className={styles.searchArrowWrapper}>\n              <QuickSearchButton\n                onClick={() => {\n                  setOpenQuickSearch(true);\n                }}\n              />\n            </div>\n          </div>\n        </div>\n      )}\n    </Header>\n  );\n};\n\nBlockSuiteEditorHeader.displayName = 'BlockSuiteEditorHeader';\n","import type { IconButtonProps } from '@affine/component';\nimport { IconButton } from '@affine/component';\nimport { styled } from '@affine/component';\nimport { ArrowDownSmallIcon } from '@blocksuite/icons';\n\nconst StyledIconButtonWithAnimate = styled(IconButton)(() => {\n  return {\n    svg: {\n      transition: 'transform 0.15s ease-in-out',\n    },\n    ':hover': {\n      svg: {\n        transform: 'translateY(3px)',\n      },\n      '::after': {\n        background: 'var(--affine-background-primary-color)',\n      },\n    },\n  };\n});\n\n// fixme(himself65): need to refactor\nexport const QuickSearchButton = ({\n  onClick,\n  ...props\n}: Omit<IconButtonProps, 'children'>) => {\n  return (\n    <StyledIconButtonWithAnimate\n      data-testid=\"header-quickSearchButton\"\n      {...props}\n      onClick={e => {\n        onClick?.(e);\n      }}\n    >\n      <ArrowDownSmallIcon />\n    </StyledIconButtonWithAnimate>\n  );\n};\n","import type { AffineLegacyCloudWorkspace } from '@affine/env/workspace';\nimport { affineApis } from '@affine/workspace/affine/shared';\nimport { rootWorkspacesMetadataAtom } from '@affine/workspace/atom';\nimport { rootStore } from '@toeverything/plugin-infra/manager';\nimport { useCallback } from 'react';\nimport useSWR from 'swr';\n\nimport { QueryKey } from '../../adapters/affine/fetcher';\n\nexport function useToggleWorkspacePublish(\n  workspace: AffineLegacyCloudWorkspace\n) {\n  const { mutate } = useSWR(QueryKey.getWorkspaces);\n  return useCallback(\n    async (isPublish: boolean) => {\n      await affineApis.updateWorkspace({\n        id: workspace.id,\n        public: isPublish,\n      });\n      await mutate(QueryKey.getWorkspaces);\n      // fixme: remove force update\n      rootStore.set(rootWorkspacesMetadataAtom, ws => [...ws]);\n    },\n    [mutate, workspace.id]\n  );\n}\n","import { rootCurrentPageIdAtom } from '@affine/workspace/atom';\nimport { atom, useAtomValue } from 'jotai';\n\nimport { pageSettingFamily } from '../../atoms';\n\nconst currentModeAtom = atom<'page' | 'edgeless'>(get => {\n  const pageId = get(rootCurrentPageIdAtom);\n  // fixme(himself65): pageId should not be null\n  if (!pageId) {\n    return 'page';\n  }\n  return get(pageSettingFamily(pageId))?.mode ?? 'page';\n});\n\nexport const useCurrentMode = () => {\n  return useAtomValue(currentModeAtom);\n};\n","import { currentAffineUserAtom } from '@affine/workspace/affine/atom';\nimport type { AccessTokenMessage } from '@affine/workspace/affine/login';\nimport { useAtomValue } from 'jotai';\n\nexport function useCurrentUser(): AccessTokenMessage | null {\n  return useAtomValue(currentAffineUserAtom);\n}\n","import {\n  rootCurrentPageIdAtom,\n  rootCurrentWorkspaceIdAtom,\n} from '@affine/workspace/atom';\nimport { useAtom, useAtomValue } from 'jotai';\nimport { useCallback } from 'react';\n\nimport { rootCurrentWorkspaceAtom } from '../../atoms/root';\nimport type { AllWorkspace } from '../../shared';\n\nexport function useCurrentWorkspace(): [\n  AllWorkspace,\n  (id: string | null) => void\n] {\n  const currentWorkspace = useAtomValue(rootCurrentWorkspaceAtom);\n  const [, setId] = useAtom(rootCurrentWorkspaceIdAtom);\n  const [, setPageId] = useAtom(rootCurrentPageIdAtom);\n  return [\n    currentWorkspace,\n    useCallback(\n      (id: string | null) => {\n        if (typeof window !== 'undefined' && id) {\n          localStorage.setItem('last_workspace_id', id);\n        }\n        setPageId(null);\n        setId(id);\n      },\n      [setId, setPageId]\n    ),\n  ];\n}\n","import type { WorkspaceRegistry } from '@affine/env/workspace';\nimport { WorkspaceFlavour } from '@affine/env/workspace';\nimport { currentAffineUserAtom } from '@affine/workspace/affine/atom';\nimport {\n  getLoginStorage,\n  parseIdToken,\n  setLoginStorage,\n  SignMethod,\n  storageChangeSlot,\n} from '@affine/workspace/affine/login';\nimport { affineAuth } from '@affine/workspace/affine/shared';\nimport { rootCurrentWorkspaceIdAtom } from '@affine/workspace/atom';\nimport { useSetAtom } from 'jotai';\nimport { useCallback } from 'react';\n\nimport { useTransformWorkspace } from '../use-transform-workspace';\n\nexport function useOnTransformWorkspace() {\n  const transformWorkspace = useTransformWorkspace();\n  const setUser = useSetAtom(currentAffineUserAtom);\n  const setWorkspaceId = useSetAtom(rootCurrentWorkspaceIdAtom);\n  return useCallback(\n    async <From extends WorkspaceFlavour, To extends WorkspaceFlavour>(\n      from: From,\n      to: To,\n      workspace: WorkspaceRegistry[From]\n    ): Promise<void> => {\n      const needRefresh = to === WorkspaceFlavour.AFFINE && !getLoginStorage();\n      if (needRefresh) {\n        const response = await affineAuth.generateToken(SignMethod.Google);\n        if (response) {\n          setLoginStorage(response);\n          setUser(parseIdToken(response.token));\n          storageChangeSlot.emit();\n        }\n      }\n      const workspaceId = await transformWorkspace(from, to, workspace);\n      window.dispatchEvent(\n        new CustomEvent('affine-workspace:transform', {\n          detail: {\n            from,\n            to,\n            oldId: workspace.id,\n            newId: workspaceId,\n          },\n        })\n      );\n      setWorkspaceId(workspaceId);\n    },\n    [setUser, setWorkspaceId, transformWorkspace]\n  );\n}\n\ndeclare global {\n  // global Events\n  interface WindowEventMap {\n    'affine-workspace:transform': CustomEvent<{\n      from: WorkspaceFlavour;\n      to: WorkspaceFlavour;\n      oldId: string;\n      newId: string;\n    }>;\n  }\n}\n","import type { WorkspaceFlavour } from '@affine/env/workspace';\nimport type { WorkspaceRegistry } from '@affine/env/workspace';\nimport { rootWorkspacesMetadataAtom } from '@affine/workspace/atom';\nimport { useSetAtom } from 'jotai';\nimport { useCallback } from 'react';\n\nimport { WorkspaceAdapters } from '../adapters/workspace';\n\n/**\n * Transform workspace from one flavour to another\n *\n * The logic here is to delete the old workspace and create a new one.\n */\nexport function useTransformWorkspace() {\n  const set = useSetAtom(rootWorkspacesMetadataAtom);\n  return useCallback(\n    async <From extends WorkspaceFlavour, To extends WorkspaceFlavour>(\n      from: From,\n      to: To,\n      workspace: WorkspaceRegistry[From]\n    ): Promise<string> => {\n      // create first, then delete, in case of failure\n      const newId = await WorkspaceAdapters[to].CRUD.create(\n        workspace.blockSuiteWorkspace\n      );\n      await WorkspaceAdapters[from].CRUD.delete(workspace as any);\n      set(workspaces => {\n        const idx = workspaces.findIndex(ws => ws.id === workspace.id);\n        workspaces.splice(idx, 1, {\n          id: newId,\n          flavour: to,\n        });\n        return [...workspaces];\n      });\n      return newId;\n    },\n    [set]\n  );\n}\n","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin"],"names":["allPageListTitleWrapper","header","headerContainer","headerRightSide","horizontalDivider","horizontalDividerContainer","pageListTitleIcon","pageListTitleWrapper","searchArrowWrapper","switchWrapper","title","titleContainer","titleWrapper","windowAppControl","windowAppControlsWrapper","guidePrimitiveAtom","atomWithStorage","quickSearchTips","changeLog","onBoarding","downloadClientTip","atom","get","open","appSidebarOpenAtom","guide","_","set","tips","guideOnboardingAtom","guideDownloadClientTipAtom","contentLayoutBaseAtom","contentLayoutAtom","layout","prev","nextValue","setV","first","splitPercentage","Header","styled","height","display","flexDirection","paddingRight","paddingTop","flexShrink","Content","textAlign","ContentTitle","fontSize","lineHeight","fontWeight","StyleTips","userSelect","width","margin","marginBottom","marginTop","StyleButton","Button","TransformWorkspaceToAffineModal","onClose","onConform","param","t","useAFFiNEI18N","user","useCurrentUser","emotion_react_jsx_runtime_browser_esm","tZ","Modal","data-testid","BX","ModalWrapper","IconButton","onClick","CloseIcon","div","shape","type","HeaderRightItemName","downloadTipIconStyle","BrowserWarning","show","message","className","DownloadTips","AffineLogoSimCBlue1_1Icon","Trans","i18nKey","a","href","target","rel","DownloadClientTip","showDownloadClientTips","setShowDownloadClientTips","useAtom","onCloseDownloadClient","useCallback","env","HY","EditPage","router","useRouter","pageId","query","workspaceId","jumpToPage","useRouterHelper","onClickPage","catch","error","console","StyledEditPageButton","TextButton","border","color","borderRadius","whiteSpace","padding","displayFlex","useCurrentPageId","rootCurrentPageIdAtom","StyledThemeModeContainer","backgroundColor","StyledThemeButtonContainer","cursor","flexGrow","marginLeft","StyledThemeButton","active","flex","StyledVerticalDivider","borderLeft","StyledThemeModeSwitch","inMenu","overflow","WebkitAppRegion","position","StyledSwitchItem","isHover","activeRaiseAnimate","toString","spring","top","preset","raiseAnimate","activeDeclineAnimate","declineAnimate","activeStyle","animation","css","keyframes","animationDirection","MenuThemeModeSwitch","setTheme","resolvedTheme","theme","useTheme","LightModeIcon","DarkModeIcon","LanguageMenuContent","i18n","useI18N","changeLanguage","event","err","LOCALES","option","StyledListItem","name","tag","originalName","LanguageMenu","currentLanguage","item","language","StyledContainer","StyledIconContainer","LanguageIcon","StyledButtonContainer","Menu","content","placement","trigger","disablePortal","StyledButton","icon","StyledArrowDownContainer","ArrowDownSmallIcon","iconPosition","noBorder","StyledCurrentLanguage","MenuItem","textTransform","CommonMenu","e","stopPropagation","FlexWrapper","alignItems","justifyContent","iconSize","MoreVerticalIcon","PageMenu","setting","pageMeta","workspace","useCurrentWorkspace","assertExists","blockSuiteWorkspace","useBlockSuitePageMeta","find","meta","id","setSetting","pageSettingFamily","mode","favorite","setPageMeta","usePageMetaHelper","openConfirm","setOpenConfirm","useState","removeToTrash","useBlockSuiteMetaHelper","EditMenu","toast","FavoritedIcon","style","FavoriteIcon","EdgelessIcon","PageIcon","Export","MoveToTrash","onItemClick","styles","onConfirm","onCancel","EditorOptionMenu","AffineHeaderShareMenu","props","togglePublish","useToggleWorkspacePublish","helper","ShareMenu","currentPage","onEnableAffineCloud","Unreachable","onOpenWorkspaceSettings","jumpToSubPath","WorkspaceSubPath","togglePagePublic","page","isPublic","toggleWorkspacePublish","publish","assertEquals","flavour","WorkspaceFlavour","LocalHeaderShareMenu","onTransformWorkspace","useOnTransformWorkspace","setOpen","HeaderShareMenu","config","IconWrapper","marginRight","getStatus","onLine","SyncUser","status","setStatus","prevWorkspace","setPrevWorkspace","useEffect","online","offline","window","addEventListener","removeEventListener","transformWorkspace","useTransformWorkspace","Tooltip","NoNetworkIcon","LocalWorkspaceIcon","getLoginStorage","response","affineAuth","SignMethod","setLoginStorage","reload","replace","pathname","CloudWorkspaceIcon","TrashButtonGroup","restoreFromTrash","bold","Confirm","confirmText","confirmType","push","removePage","SignOutIcon","UserAvatar","WorkspaceAvatar","size","avatar","avatar_url","forwardRef","ref","sizeStr","verticalAlign","picture","img","src","alt","referrerPolicy","Math","ceil","substring","AffineIcon","shouldShowWarning","OSWarningMessage","notChrome","setNotChrome","notGoodVersion","setNotGoodVersion","span","strong","WindowsAppControls","HeaderRightItems","Component","availableWhen","trash","handleMinimizeApp","apis","ui","handleMaximizeApp","handleCloseApp","button","data-type","MinusIcon","RoundedRectangleIcon","environment","isDesktop","isWindows","PluginHeaderItemAdapter","memo","headerItem","PluginHeader","affinePluginsMap","useAtomValue","affinePluginsAtom","plugins","useMemo","Object","values","filter","plugin","uiAdapter","map","definition","showWarning","setShowWarning","showGuideDownloadClientTip","setShowGuideDownloadClientTip","shouldShowGuideDownloadClientTip","appSidebarFloating","appSidebarFloatingAtom","useCurrentMode","data-has-warning","data-open","data-sidebar-floating","data-is-edgeless","SidebarSwitch","leftSlot","children","entries","displayName","StyledEditorModeSwitch","switchLeft","showAlone","background","boxShadow","zIndex","transform","concat","transition","hide","path","fill","HoverAnimateController","startAnimate","setStartAnimate","onMouseEnter","onMouseLeave","cloneElement","isStopped","speed","PageSwitchItem","InternalLottie","options","loop","autoplay","animationData","require","rendererSettings","preserveAspectRatio","EdgelessSwitchItem","EditorModeSwitch","currentMode","BlockSuiteEditorHeader","setOpenQuickSearch","useSetAtom","openQuickSearchModalAtom","headerRef","useRef","QuickSearchButton","StyledIconButtonWithAnimate","svg","_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__","mutate","useSWR","QueryKey","isPublish","affineApis","public","rootStore","rootWorkspacesMetadataAtom","ws","currentModeAtom","currentAffineUserAtom","currentWorkspace","rootCurrentWorkspaceAtom","setId","rootCurrentWorkspaceIdAtom","setPageId","localStorage","setItem","setUser","setWorkspaceId","from","to","needRefresh","parseIdToken","token","storageChangeSlot","dispatchEvent","CustomEvent","detail","oldId","newId","WorkspaceAdapters","CRUD","create","delete","workspaces","idx","findIndex","splice"],"sourceRoot":""}