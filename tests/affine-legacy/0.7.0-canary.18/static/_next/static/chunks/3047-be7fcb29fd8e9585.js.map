{"version":3,"file":"static/chunks/3047-be7fcb29fd8e9585.js","mappings":"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","sources":["webpack://_N_E/./src/atoms/public-workspace/index.ts","webpack://_N_E/./src/components/blocksuite/block-suite-editor/index.tsx","webpack://_N_E/./src/components/page-detail-editor.css.ts","webpack://_N_E/../../packages/hooks/src/use-block-suite-workspace-page-title.ts","webpack://_N_E/./src/components/page-detail-editor.tsx","webpack://_N_E/./src/components/pure/footer/styles.ts","webpack://_N_E/./src/components/pure/footer/index.tsx","webpack://_N_E/./src/hooks/use-router-title.ts","webpack://_N_E/./src/layouts/public-workspace-layout.tsx","webpack://_N_E/./src/pages/public-workspace/[workspaceId]/[pageId].tsx","webpack://_N_E/../../packages/component/src/components/block-suite-editor/index.css.ts","webpack://_N_E/../../packages/component/src/components/block-suite-editor/index.tsx","webpack://_N_E/../../packages/hooks/src/use-block-suite-workspace-avatar-url.ts","webpack://_N_E/../../packages/hooks/src/use-block-suite-workspace-name.ts","webpack://_N_E/../../packages/hooks/src/use-block-suite-workspace-page.ts","webpack://_N_E/../../node_modules/@vanilla-extract/webpack-plugin/extracted.js?6ba6","webpack://_N_E/../../node_modules/@vanilla-extract/webpack-plugin/extracted.js?075b","webpack://_N_E/<anon>"],"sourcesContent":["import type { BlockSuiteFeatureFlags } from '@affine/env';\nimport { config } from '@affine/env';\nimport type { AffinePublicWorkspace } from '@affine/env/workspace';\nimport { WorkspaceFlavour } from '@affine/env/workspace';\nimport { affineApis } from '@affine/workspace/affine/shared';\nimport { createEmptyBlockSuiteWorkspace } from '@affine/workspace/utils';\nimport { atom } from 'jotai';\n\nimport { BlockSuiteWorkspace } from '../../shared';\n\nfunction createPublicWorkspace(\n  workspaceId: string,\n  binary: ArrayBuffer,\n  singlePage = false\n): AffinePublicWorkspace {\n  const blockSuiteWorkspace = createEmptyBlockSuiteWorkspace(\n    workspaceId,\n    WorkspaceFlavour.AFFINE,\n    {\n      workspaceApis: affineApis,\n      cachePrefix: WorkspaceFlavour.PUBLIC + (singlePage ? '-single-page' : ''),\n    }\n  );\n  BlockSuiteWorkspace.Y.applyUpdate(\n    blockSuiteWorkspace.doc,\n    new Uint8Array(binary)\n  );\n  Object.entries(config.editorFlags).forEach(([key, value]) => {\n    blockSuiteWorkspace.awarenessStore.setFlag(\n      key as keyof BlockSuiteFeatureFlags,\n      value\n    );\n  });\n  // force disable some features\n  blockSuiteWorkspace.awarenessStore.setFlag('enable_block_hub', false);\n  blockSuiteWorkspace.awarenessStore.setFlag('enable_drag_handle', false);\n  return {\n    flavour: WorkspaceFlavour.PUBLIC,\n    id: workspaceId,\n    blockSuiteWorkspace,\n    // maybe we can add some sync providers here\n    providers: [],\n  };\n}\n\nexport const publicWorkspaceIdAtom = atom<string | null>(null);\nexport const publicWorkspacePageIdAtom = atom<string | null>(null);\nexport const publicPageBlockSuiteAtom = atom<Promise<AffinePublicWorkspace>>(\n  async get => {\n    const workspaceId = get(publicWorkspaceIdAtom);\n    const pageId = get(publicWorkspacePageIdAtom);\n    if (!workspaceId || !pageId) {\n      throw new Error('No workspace id or page id');\n    }\n    const binary = await affineApis.downloadPublicWorkspacePage(\n      workspaceId,\n      pageId\n    );\n    return createPublicWorkspace(workspaceId, binary, true);\n  }\n);\nexport const publicWorkspaceAtom = atom<Promise<AffinePublicWorkspace>>(\n  async get => {\n    const workspaceId = get(publicWorkspaceIdAtom);\n    if (!workspaceId) {\n      throw new Error('No workspace id');\n    }\n    const binary = await affineApis.downloadWorkspace(workspaceId, true);\n    return createPublicWorkspace(workspaceId, binary, false);\n  }\n);\n","export type { EditorProps } from '@affine/component/block-suite-editor';\nexport { BlockSuiteEditor } from '@affine/component/block-suite-editor';\n","import \"src/components/page-detail-editor.css.ts.vanilla.css!=!../../../../node_modules/@vanilla-extract/webpack-plugin/virtualFileLoader/dist/vanilla-extract-webpack-plugin-virtualFileLoader.cjs.js?{\\\"fileName\\\":\\\"src/components/page-detail-editor.css.ts.vanilla.css\\\",\\\"source\\\":\\\"Lmxib2VxNzAgewogIGhlaWdodDogMTAwJTsKICB3aWR0aDogMTAwJTsKfQ==\\\"}!../../../../node_modules/@vanilla-extract/webpack-plugin/extracted.js\"\nexport var pluginContainer = 'lboeq70';","import type { Workspace } from '@blocksuite/store';\nimport { assertExists } from '@blocksuite/store';\nimport type { Atom } from 'jotai';\nimport { atom, useAtomValue } from 'jotai';\n\nconst weakMap = new WeakMap<Workspace, Map<string, Atom<string>>>();\n\nfunction getAtom(w: Workspace, pageId: string): Atom<string> {\n  if (!weakMap.has(w)) {\n    weakMap.set(w, new Map());\n  }\n  const map = weakMap.get(w);\n  assertExists(map);\n  if (!map.has(pageId)) {\n    const baseAtom = atom<string>(w.getPage(pageId)?.meta.title || 'Untitled');\n    baseAtom.onMount = set => {\n      const disposable = w.meta.pageMetasUpdated.on(() => {\n        const page = w.getPage(pageId);\n        set(page?.meta.title || 'Untitled');\n      });\n      return () => {\n        disposable.dispose();\n      };\n    };\n    map.set(pageId, baseAtom);\n    return baseAtom;\n  } else {\n    return map.get(pageId) as Atom<string>;\n  }\n}\n\nexport function useBlockSuiteWorkspacePageTitle(\n  blockSuiteWorkspace: Workspace,\n  pageId: string\n) {\n  const titleAtom = getAtom(blockSuiteWorkspace, pageId);\n  assertExists(titleAtom);\n  return useAtomValue(titleAtom);\n}\n","import './page-detail-editor.css';\n\nimport {\n  DEFAULT_HELLO_WORLD_PAGE_ID,\n  PageNotFoundError,\n} from '@affine/env/constant';\nimport { rootCurrentEditorAtom } from '@affine/workspace/atom';\nimport type { EditorContainer } from '@blocksuite/editor';\nimport type { Page } from '@blocksuite/store';\nimport { assertExists } from '@blocksuite/store';\nimport { useBlockSuitePageMeta } from '@toeverything/hooks/use-block-suite-page-meta';\nimport { useBlockSuiteWorkspacePage } from '@toeverything/hooks/use-block-suite-workspace-page';\nimport { useBlockSuiteWorkspacePageTitle } from '@toeverything/hooks/use-block-suite-workspace-page-title';\nimport { affinePluginsAtom } from '@toeverything/plugin-infra/manager';\nimport type {\n  AffinePlugin,\n  LayoutNode,\n  PluginUIAdapter,\n} from '@toeverything/plugin-infra/type';\nimport type { PluginBlockSuiteAdapter } from '@toeverything/plugin-infra/type';\nimport { useAtomValue, useSetAtom } from 'jotai';\nimport Head from 'next/head';\nimport type { FC, ReactElement } from 'react';\nimport React, {\n  memo,\n  startTransition,\n  Suspense,\n  useCallback,\n  useMemo,\n} from 'react';\nimport { Panel, PanelGroup, PanelResizeHandle } from 'react-resizable-panels';\n\nimport { pageSettingFamily } from '../atoms';\nimport { contentLayoutAtom } from '../atoms/layout';\nimport type { AffineOfficialWorkspace } from '../shared';\nimport { BlockSuiteEditor as Editor } from './blocksuite/block-suite-editor';\nimport { pluginContainer } from './page-detail-editor.css';\n\nexport type PageDetailEditorProps = {\n  isPublic?: boolean;\n  workspace: AffineOfficialWorkspace;\n  pageId: string;\n  onInit: (page: Page, editor: Readonly<EditorContainer>) => void;\n  onLoad?: (page: Page, editor: EditorContainer) => () => void;\n};\n\nconst EditorWrapper = memo(function EditorWrapper({\n  workspace,\n  pageId,\n  onInit,\n  onLoad,\n  isPublic,\n}: PageDetailEditorProps) {\n  const affinePluginsMap = useAtomValue(affinePluginsAtom);\n  const plugins = useMemo(\n    () => Object.values(affinePluginsMap),\n    [affinePluginsMap]\n  );\n  const blockSuiteWorkspace = workspace.blockSuiteWorkspace;\n  const page = useBlockSuiteWorkspacePage(blockSuiteWorkspace, pageId);\n  if (!page) {\n    throw new PageNotFoundError(blockSuiteWorkspace, pageId);\n  }\n  const meta = useBlockSuitePageMeta(blockSuiteWorkspace).find(\n    meta => meta.id === pageId\n  );\n  const pageSettingAtom = pageSettingFamily(pageId);\n  const pageSetting = useAtomValue(pageSettingAtom);\n  const currentMode =\n    pageSetting?.mode ??\n    (DEFAULT_HELLO_WORLD_PAGE_ID === pageId ? 'edgeless' : 'page');\n\n  const setEditor = useSetAtom(rootCurrentEditorAtom);\n  assertExists(meta);\n  return (\n    <Editor\n      style={{\n        height: 'calc(100% - 52px)',\n      }}\n      key={`${workspace.flavour}-${workspace.id}-${pageId}`}\n      mode={isPublic ? 'page' : currentMode}\n      page={page}\n      onInit={useCallback(\n        (page: Page, editor: Readonly<EditorContainer>) => {\n          startTransition(() => {\n            setEditor(editor);\n          });\n          onInit(page, editor);\n        },\n        [onInit, setEditor]\n      )}\n      onLoad={useCallback(\n        (page: Page, editor: EditorContainer) => {\n          startTransition(() => {\n            setEditor(editor);\n          });\n          page.workspace.setPageMeta(page.id, {\n            updatedDate: Date.now(),\n          });\n          localStorage.setItem('last_page_id', page.id);\n          let dispose = () => {};\n          if (onLoad) {\n            dispose = onLoad(page, editor);\n          }\n          const uiDecorators = plugins\n            .map(plugin => plugin.blockSuiteAdapter.uiDecorator)\n            .filter((ui): ui is PluginBlockSuiteAdapter['uiDecorator'] =>\n              Boolean(ui)\n            );\n          const disposes = uiDecorators.map(ui => ui(editor));\n          return () => {\n            disposes.forEach(fn => fn());\n            dispose();\n          };\n        },\n        [plugins, onLoad, setEditor]\n      )}\n    />\n  );\n});\n\nconst PluginContentAdapter = memo<{\n  detailContent: PluginUIAdapter['detailContent'];\n}>(function PluginContentAdapter({ detailContent }) {\n  return (\n    <div className={pluginContainer}>\n      {detailContent({\n        contentLayoutAtom,\n      })}\n    </div>\n  );\n});\n\ntype LayoutPanelProps = {\n  node: LayoutNode;\n  editorProps: PageDetailEditorProps;\n  plugins: AffinePlugin<string>[];\n};\n\nconst LayoutPanel = memo(function LayoutPanel(\n  props: LayoutPanelProps\n): ReactElement {\n  const node = props.node;\n  if (typeof node === 'string') {\n    if (node === 'editor') {\n      return <EditorWrapper {...props.editorProps} />;\n    } else {\n      const plugin = props.plugins.find(\n        plugin => plugin.definition.id === node\n      );\n      const Content = plugin?.uiAdapter.detailContent;\n      assertExists(Content);\n      return <PluginContentAdapter detailContent={Content} />;\n    }\n  } else {\n    return (\n      <PanelGroup\n        style={{\n          height: 'calc(100% - 52px)',\n        }}\n        direction={node.direction}\n      >\n        <Panel defaultSize={node.splitPercentage}>\n          <Suspense>\n            <LayoutPanel\n              node={node.first}\n              editorProps={props.editorProps}\n              plugins={props.plugins}\n            />\n          </Suspense>\n        </Panel>\n        <PanelResizeHandle />\n        <Panel defaultSize={100 - node.splitPercentage}>\n          <Suspense>\n            <LayoutPanel\n              node={node.second}\n              editorProps={props.editorProps}\n              plugins={props.plugins}\n            />\n          </Suspense>\n        </Panel>\n      </PanelGroup>\n    );\n  }\n});\n\nexport const PageDetailEditor: FC<PageDetailEditorProps> = props => {\n  const { workspace, pageId } = props;\n  const blockSuiteWorkspace = workspace.blockSuiteWorkspace;\n  const page = useBlockSuiteWorkspacePage(blockSuiteWorkspace, pageId);\n  if (!page) {\n    throw new PageNotFoundError(blockSuiteWorkspace, pageId);\n  }\n  const title = useBlockSuiteWorkspacePageTitle(blockSuiteWorkspace, pageId);\n\n  const layout = useAtomValue(contentLayoutAtom);\n  const affinePluginsMap = useAtomValue(affinePluginsAtom);\n  const plugins = useMemo(\n    () => Object.values(affinePluginsMap),\n    [affinePluginsMap]\n  );\n\n  return (\n    <>\n      <Head>\n        <title>{title}</title>\n      </Head>\n      <Suspense>\n        <LayoutPanel node={layout} editorProps={props} plugins={plugins} />\n      </Suspense>\n    </>\n  );\n};\n","import {\n  displayFlex,\n  displayInlineFlex,\n  styled,\n  textEllipsis,\n} from '@affine/component';\nimport { Button } from '@affine/component';\n\nexport const StyledSplitLine = styled('div')(() => {\n  return {\n    width: '1px',\n    height: '20px',\n    background: 'var(--affine-border-color)',\n    marginRight: '24px',\n  };\n});\n\nexport const StyleWorkspaceInfo = styled('div')(() => {\n  return {\n    marginLeft: '15px',\n    width: '202px',\n    p: {\n      height: '20px',\n      fontSize: 'var(--affine-font-sm)',\n      ...displayFlex('flex-start', 'center'),\n    },\n    svg: {\n      marginRight: '10px',\n      fontSize: '16px',\n      flexShrink: 0,\n    },\n    span: {\n      flexGrow: 1,\n      ...textEllipsis(1),\n    },\n  };\n});\n\nexport const StyleWorkspaceTitle = styled('div')(() => {\n  return {\n    fontSize: 'var(--affine-font-base)',\n    fontWeight: 600,\n    lineHeight: '24px',\n    marginBottom: '10px',\n    maxWidth: '200px',\n    ...textEllipsis(1),\n  };\n});\n\nexport const StyledFooter = styled('div')({\n  height: '84px',\n  padding: '0 40px',\n  flexShrink: 0,\n  ...displayFlex('space-between', 'center'),\n});\n\nexport const StyleUserInfo = styled('div')(() => {\n  return {\n    textAlign: 'left',\n    marginLeft: '16px',\n    flex: 1,\n    p: {\n      lineHeight: '24px',\n      color: 'var(--affine-icon-color)',\n    },\n    'p:first-of-type': {\n      color: 'var(--affine-text-primary-color)',\n      fontWeight: 600,\n    },\n  };\n});\n\nexport const StyledModalHeaderLeft = styled('div')(() => {\n  return { ...displayFlex('flex-start', 'center') };\n});\nexport const StyledModalTitle = styled('div')(() => {\n  return {\n    fontWeight: 600,\n    fontSize: 'var(--affine-font-h6)',\n  };\n});\n\nexport const StyledHelperContainer = styled('div')(() => {\n  return {\n    color: 'var(--affine-icon-color)',\n    marginLeft: '15px',\n    fontWeight: 400,\n    fontSize: 'var(--affine-font-h6)',\n    ...displayFlex('center', 'center'),\n  };\n});\n\nexport const StyledModalContent = styled('div')({\n  height: '534px',\n  padding: '8px 40px',\n  marginTop: '72px',\n  overflow: 'auto',\n  ...displayFlex('space-between', 'flex-start', 'flex-start'),\n  flexWrap: 'wrap',\n});\nexport const StyledOperationWrapper = styled('div')(() => {\n  return {\n    ...displayFlex('flex-end', 'center'),\n  };\n});\n\nexport const StyleWorkspaceAdd = styled('div')(() => {\n  return {\n    width: '58px',\n    height: '58px',\n    borderRadius: '100%',\n    background: '#f4f5fa',\n    border: '1.5px dashed #f4f5fa',\n    transition: 'background .2s',\n    ...displayFlex('center', 'center'),\n  };\n});\nexport const StyledModalHeader = styled('div')(() => {\n  return {\n    width: '100%',\n    height: '72px',\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    borderRadius: '24px 24px 0 0',\n    padding: '0 40px',\n    ...displayFlex('space-between', 'center'),\n  };\n});\n\nexport const StyledSignInButton = styled(Button)(() => {\n  return {\n    fontWeight: 600,\n    paddingLeft: 0,\n    '.circle': {\n      width: '40px',\n      height: '40px',\n      borderRadius: '20px',\n      backgroundColor: 'var(--affine-hover-color)',\n      color: 'var(--affine-primary-color)',\n      fontSize: '24px',\n      flexShrink: 0,\n      marginRight: '16px',\n      ...displayInlineFlex('center', 'center'),\n    },\n  };\n});\n","import { FlexWrapper } from '@affine/component';\nimport { IconButton } from '@affine/component';\nimport { Tooltip } from '@affine/component';\nimport { config } from '@affine/env';\nimport { useAFFiNEI18N } from '@affine/i18n/hooks';\nimport type { AccessTokenMessage } from '@affine/workspace/affine/login';\nimport { CloudWorkspaceIcon, SignOutIcon } from '@blocksuite/icons';\nimport { useSetAtom } from 'jotai';\nimport type { CSSProperties } from 'react';\nimport type React from 'react';\nimport { forwardRef } from 'react';\n\nimport { openDisableCloudAlertModalAtom } from '../../../atoms';\nimport { stringToColour } from '../../../utils';\nimport { StyledFooter, StyledSignInButton, StyleUserInfo } from './styles';\n\nexport type FooterProps = {\n  user: AccessTokenMessage | null;\n  onLogin: () => void;\n  onLogout: () => void;\n};\n\nexport const Footer: React.FC<FooterProps> = ({ user, onLogin, onLogout }) => {\n  const t = useAFFiNEI18N();\n  const setOpen = useSetAtom(openDisableCloudAlertModalAtom);\n  return (\n    <StyledFooter data-testid=\"workspace-list-modal-footer\">\n      {user && (\n        <>\n          <FlexWrapper>\n            <WorkspaceAvatar\n              size={40}\n              name={user.name}\n              avatar={user.avatar_url}\n            ></WorkspaceAvatar>\n            <StyleUserInfo>\n              <p>{user.name}</p>\n              <p>{user.email}</p>\n            </StyleUserInfo>\n          </FlexWrapper>\n          <Tooltip content={t['Sign out']()} disablePortal={true}>\n            <IconButton\n              data-testid=\"workspace-list-modal-sign-out\"\n              onClick={() => {\n                onLogout();\n              }}\n            >\n              <SignOutIcon />\n            </IconButton>\n          </Tooltip>\n        </>\n      )}\n\n      {!user && (\n        <StyledSignInButton\n          data-testid=\"sign-in-button\"\n          noBorder\n          bold\n          icon={\n            <div className=\"circle\">\n              <CloudWorkspaceIcon />\n            </div>\n          }\n          onClick={async () => {\n            if (!config.enableLegacyCloud) {\n              setOpen(true);\n            } else {\n              onLogin();\n            }\n          }}\n        >\n          {t['Sign in']()}\n        </StyledSignInButton>\n      )}\n    </StyledFooter>\n  );\n};\n\ninterface WorkspaceAvatarProps {\n  size: number;\n  name: string | undefined;\n  avatar: string | undefined;\n  style?: CSSProperties;\n}\n\nexport const WorkspaceAvatar = forwardRef<HTMLDivElement, WorkspaceAvatarProps>(\n  function WorkspaceAvatar(props, ref) {\n    const size = props.size || 20;\n    const sizeStr = size + 'px';\n\n    return (\n      <>\n        {props.avatar ? (\n          <div\n            style={{\n              ...props.style,\n              width: sizeStr,\n              height: sizeStr,\n              color: '#fff',\n              borderRadius: '50%',\n              overflow: 'hidden',\n              display: 'inline-block',\n              verticalAlign: 'middle',\n            }}\n            ref={ref}\n          >\n            <picture>\n              <img\n                style={{ width: sizeStr, height: sizeStr }}\n                src={props.avatar}\n                alt=\"\"\n                referrerPolicy=\"no-referrer\"\n              />\n            </picture>\n          </div>\n        ) : (\n          <div\n            style={{\n              ...props.style,\n              width: sizeStr,\n              height: sizeStr,\n              border: '1px solid #fff',\n              color: '#fff',\n              fontSize: Math.ceil(0.5 * size) + 'px',\n              background: stringToColour(props.name || 'AFFiNE'),\n              borderRadius: '50%',\n              textAlign: 'center',\n              lineHeight: size + 'px',\n              display: 'inline-block',\n              verticalAlign: 'middle',\n            }}\n            ref={ref}\n          >\n            {(props.name || 'AFFiNE').substring(0, 1)}\n          </div>\n        )}\n      </>\n    );\n  }\n);\n","import type { NextRouter } from 'next/router';\nimport { useMemo } from 'react';\n\nimport { WorkspaceSubPathName } from '../shared';\n\nexport function useRouterTitle(router: NextRouter) {\n  return useMemo(() => {\n    if (!router.isReady) {\n      return 'Loading...';\n    } else {\n      if (\n        !router.query.pageId &&\n        router.pathname.startsWith('/workspace/[workspaceId]/')\n      ) {\n        const subPath = router.pathname.split('/').at(-1);\n        if (subPath && subPath in WorkspaceSubPathName) {\n          return (\n            WorkspaceSubPathName[subPath as keyof typeof WorkspaceSubPathName] +\n            ' - AFFiNE'\n          );\n        }\n      }\n      return 'AFFiNE';\n    }\n  }, [router]);\n}\n","import { AppContainer, MainContainer } from '@affine/component/workspace';\nimport type { AffinePublicWorkspace } from '@affine/env/workspace';\nimport { useAtom } from 'jotai';\nimport Head from 'next/head';\nimport { useRouter } from 'next/router';\nimport type React from 'react';\nimport { lazy, Suspense } from 'react';\n\nimport { openQuickSearchModalAtom } from '../atoms';\nimport { useRouterTitle } from '../hooks/use-router-title';\n\nconst QuickSearchModal = lazy(() =>\n  import('../components/pure/quick-search-modal').then(module => ({\n    default: module.QuickSearchModal,\n  }))\n);\n\ntype PublicQuickSearchProps = {\n  workspace: AffinePublicWorkspace;\n};\n\nexport const PublicQuickSearch: React.FC<PublicQuickSearchProps> = ({\n  workspace,\n}) => {\n  const router = useRouter();\n  const [openQuickSearchModal, setOpenQuickSearchModalAtom] = useAtom(\n    openQuickSearchModalAtom\n  );\n  return (\n    <Suspense>\n      <QuickSearchModal\n        blockSuiteWorkspace={workspace.blockSuiteWorkspace}\n        open={openQuickSearchModal}\n        setOpen={setOpenQuickSearchModalAtom}\n        router={router}\n      />\n    </Suspense>\n  );\n};\n\nconst PublicWorkspaceLayoutInner: React.FC<React.PropsWithChildren> = props => {\n  const router = useRouter();\n  const title = useRouterTitle(router);\n  return (\n    <>\n      <Head>\n        <title>{title}</title>\n      </Head>\n      <AppContainer>\n        <MainContainer>{props.children}</MainContainer>\n      </AppContainer>\n    </>\n  );\n};\n\nexport const PublicWorkspaceLayout: React.FC<\n  React.PropsWithChildren\n> = props => {\n  return (\n    <PublicWorkspaceLayoutInner>{props.children}</PublicWorkspaceLayoutInner>\n  );\n};\n","import { Breadcrumbs, displayFlex, styled } from '@affine/component';\nimport { initEmptyPage } from '@affine/env/blocksuite';\nimport { useAFFiNEI18N } from '@affine/i18n/hooks';\nimport { PageIcon } from '@blocksuite/icons';\nimport { assertExists } from '@blocksuite/store';\nimport { useBlockSuiteWorkspaceAvatarUrl } from '@toeverything/hooks/use-block-suite-workspace-avatar-url';\nimport { useBlockSuiteWorkspaceName } from '@toeverything/hooks/use-block-suite-workspace-name';\nimport { useAtom, useAtomValue } from 'jotai';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport type { ReactElement } from 'react';\nimport { Suspense, useEffect } from 'react';\n\nimport {\n  publicPageBlockSuiteAtom,\n  publicWorkspaceIdAtom,\n  publicWorkspacePageIdAtom,\n} from '../../../atoms/public-workspace';\nimport { BlockSuiteEditorHeader } from '../../../components/blocksuite/workspace-header';\nimport { PageDetailEditor } from '../../../components/page-detail-editor';\nimport { WorkspaceAvatar } from '../../../components/pure/footer';\nimport { PageLoading } from '../../../components/pure/loading';\nimport { useRouterHelper } from '../../../hooks/use-router-helper';\nimport {\n  PublicQuickSearch,\n  PublicWorkspaceLayout,\n} from '../../../layouts/public-workspace-layout';\nimport type { NextPageWithLayout } from '../../../shared';\n\nexport const NavContainer = styled('div')(() => {\n  return {\n    width: '100vw',\n    height: '52px',\n    ...displayFlex('space-between', 'center'),\n    backgroundColor: 'var(--affine-background-primary-color)',\n  };\n});\n\nexport const StyledBreadcrumbs = styled(Link)(() => {\n  return {\n    flex: 1,\n    ...displayFlex('center', 'center'),\n    paddingLeft: '12px',\n    span: {\n      padding: '0 12px',\n      fontSize: 'var(--affine-font-base)',\n      lineHeight: 'var(--affine-line-height)',\n    },\n    ':hover': { color: 'var(--affine-primary-color)' },\n    transition: 'all .15s',\n    ':visited': {\n      ':hover': { color: 'var(--affine-primary-color)' },\n    },\n  };\n});\n\nconst PublicWorkspaceDetailPageInner = (): ReactElement => {\n  const pageId = useAtomValue(publicWorkspacePageIdAtom);\n  assertExists(pageId, 'pageId is null');\n  const publicWorkspace = useAtomValue(publicPageBlockSuiteAtom);\n  const blockSuiteWorkspace = publicWorkspace.blockSuiteWorkspace;\n  if (!blockSuiteWorkspace) {\n    throw new Error('cannot find workspace');\n  }\n  const router = useRouter();\n  const { openPage } = useRouterHelper(router);\n  const t = useAFFiNEI18N();\n  const [name] = useBlockSuiteWorkspaceName(blockSuiteWorkspace);\n  const [avatar] = useBlockSuiteWorkspaceAvatarUrl(blockSuiteWorkspace);\n  const pageTitle = blockSuiteWorkspace.meta.getPageMeta(pageId)?.title;\n  return (\n    <>\n      <PublicQuickSearch workspace={publicWorkspace} />\n      <BlockSuiteEditorHeader\n        isPublic={true}\n        workspace={publicWorkspace}\n        currentPage={blockSuiteWorkspace.getPage(pageId)}\n      >\n        <NavContainer>\n          <Breadcrumbs>\n            <StyledBreadcrumbs\n              href={`/public-workspace/${blockSuiteWorkspace.id}`}\n            >\n              <WorkspaceAvatar size={24} name={name} avatar={avatar} />\n              <span>{name}</span>\n            </StyledBreadcrumbs>\n            <StyledBreadcrumbs\n              href={`/public-workspace/${blockSuiteWorkspace.id}/${pageId}`}\n            >\n              <PageIcon fontSize={24} />\n              <span>{pageTitle ? pageTitle : t['Untitled']()}</span>\n            </StyledBreadcrumbs>\n          </Breadcrumbs>\n        </NavContainer>\n      </BlockSuiteEditorHeader>\n      <PageDetailEditor\n        isPublic={true}\n        pageId={pageId}\n        workspace={publicWorkspace}\n        onLoad={(_, editor) => {\n          const { page } = editor;\n          page.awarenessStore.setReadonly(page, true);\n          const dispose = editor.slots.pageLinkClicked.on(({ pageId }) => {\n            return openPage(blockSuiteWorkspace.id, pageId);\n          });\n          return () => {\n            dispose.dispose();\n          };\n        }}\n        onInit={initEmptyPage}\n      />\n    </>\n  );\n};\n\nexport const PublicWorkspaceDetailPage: NextPageWithLayout = () => {\n  const router = useRouter();\n  const [workspaceId, setWorkspaceId] = useAtom(publicWorkspaceIdAtom);\n  const [pageId, setPageId] = useAtom(publicWorkspacePageIdAtom);\n  useEffect(() => {\n    if (!router.isReady) {\n      return;\n    }\n    if (typeof router.query.workspaceId === 'string') {\n      setWorkspaceId(router.query.workspaceId);\n    }\n    if (typeof router.query.pageId === 'string') {\n      setPageId(router.query.pageId);\n    }\n  }, [\n    router.isReady,\n    router.query.pageId,\n    router.query.workspaceId,\n    setPageId,\n    setWorkspaceId,\n  ]);\n  if (!router.isReady || !workspaceId || !pageId) {\n    return <PageLoading />;\n  }\n  return (\n    <Suspense fallback={<PageLoading />}>\n      <PublicWorkspaceDetailPageInner />\n    </Suspense>\n  );\n};\n\nexport default PublicWorkspaceDetailPage;\n\nPublicWorkspaceDetailPage.getLayout = page => {\n  return <PublicWorkspaceLayout>{page}</PublicWorkspaceLayout>;\n};\n","import \"../../packages/component/src/components/block-suite-editor/index.css.ts.vanilla.css!=!../../../../../node_modules/@vanilla-extract/webpack-plugin/virtualFileLoader/dist/vanilla-extract-webpack-plugin-virtualFileLoader.cjs.js?{\\\"fileName\\\":\\\"../../packages/component/src/components/block-suite-editor/index.css.ts.vanilla.css\\\",\\\"source\\\":\\\"LmdsNTFjZTAgewogIG1heC13aWR0aDogdmFyKC0tYWZmaW5lLWVkaXRvci13aWR0aCk7CiAgbWFyZ2luOiAwIDJyZW07CiAgcGFkZGluZzogMCAyNHB4Owp9Ci5nbDUxY2UxIHsKICBtYXJnaW4tdG9wOiA0MHB4OwogIG1hcmdpbi1ib3R0b206IDQwcHg7Cn0=\\\"}!../../../../../node_modules/@vanilla-extract/webpack-plugin/extracted.js\"\nexport var blockSuiteEditorHeaderStyle = 'gl51ce1';\nexport var blockSuiteEditorStyle = 'gl51ce0';","import { config } from '@affine/env';\nimport { editorContainerModuleAtom } from '@affine/jotai';\nimport type { BlockHub } from '@blocksuite/blocks';\nimport type { EditorContainer } from '@blocksuite/editor';\nimport { assertExists } from '@blocksuite/global/utils';\nimport type { Page } from '@blocksuite/store';\nimport { Skeleton } from '@mui/material';\nimport { useAtomValue } from 'jotai';\nimport type { CSSProperties, ReactElement } from 'react';\nimport { lazy, memo, Suspense, useCallback, useEffect, useRef } from 'react';\nimport { createPortal } from 'react-dom';\nimport type { FallbackProps } from 'react-error-boundary';\nimport { ErrorBoundary } from 'react-error-boundary';\n\nimport {\n  blockSuiteEditorHeaderStyle,\n  blockSuiteEditorStyle,\n} from './index.css';\n\nexport type EditorProps = {\n  page: Page;\n  mode: 'page' | 'edgeless';\n  onInit: (page: Page, editor: Readonly<EditorContainer>) => void;\n  onLoad?: (page: Page, editor: EditorContainer) => () => void;\n  style?: CSSProperties;\n};\n\nexport type ErrorBoundaryProps = {\n  onReset?: () => void;\n};\n\ndeclare global {\n  // eslint-disable-next-line no-var\n  var currentPage: Page | undefined;\n  // eslint-disable-next-line no-var\n  var currentEditor: EditorContainer | undefined;\n}\n\nconst ImagePreviewModal = lazy(() =>\n  import('../image-preview-modal').then(module => ({\n    default: module.ImagePreviewModal,\n  }))\n);\n\nconst BlockSuiteEditorImpl = (props: EditorProps): ReactElement => {\n  const { onLoad, page, mode, style, onInit } = props;\n  const JotaiEditorContainer = useAtomValue(\n    editorContainerModuleAtom\n  ) as typeof EditorContainer;\n  assertExists(page, 'page should not be null');\n  const editorRef = useRef<EditorContainer | null>(null);\n  const blockHubRef = useRef<BlockHub | null>(null);\n  if (editorRef.current === null) {\n    editorRef.current = new JotaiEditorContainer();\n    editorRef.current.autofocus = true;\n    globalThis.currentEditor = editorRef.current;\n  }\n  const editor = editorRef.current;\n  assertExists(editorRef, 'editorRef.current should not be null');\n  if (editor.mode !== mode) {\n    editor.mode = mode;\n  }\n\n  useEffect(() => {\n    if (editor.page !== page) {\n      editor.page = page;\n      if (page.root === null) {\n        onInit(page, editor);\n      }\n    }\n  }, [editor, page, onInit]);\n\n  useEffect(() => {\n    if (editor.page && onLoad) {\n      const disposes = [] as ((() => void) | undefined)[];\n      disposes.push(onLoad?.(page, editor));\n      return () => {\n        disposes\n          .filter((dispose): dispose is () => void => !!dispose)\n          .forEach(dispose => dispose());\n      };\n    }\n    return;\n  }, [editor, editor.page, page, onLoad]);\n\n  const ref = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const editor = editorRef.current;\n    assertExists(editor);\n    const container = ref.current;\n    if (!container) {\n      return;\n    }\n    if (page.awarenessStore.getFlag('enable_block_hub')) {\n      editor\n        .createBlockHub()\n        .then(blockHub => {\n          if (blockHubRef.current) {\n            blockHubRef.current.remove();\n          }\n          blockHubRef.current = blockHub;\n          const toolWrapper = document.querySelector('#toolWrapper');\n          if (!toolWrapper) {\n            console.warn(\n              'toolWrapper not found, block hub feature will not be available.'\n            );\n          } else {\n            toolWrapper.appendChild(blockHub);\n          }\n        })\n        .catch(err => {\n          console.error(err);\n        });\n    }\n\n    container.appendChild(editor);\n    return () => {\n      blockHubRef.current?.remove();\n      container.removeChild(editor);\n    };\n  }, [editor, page]);\n\n  // issue: https://github.com/toeverything/AFFiNE/issues/2004\n  const className = `editor-wrapper ${editor.mode}-mode`;\n  return (\n    <div\n      data-testid={`editor-${page.id}`}\n      className={className}\n      style={style}\n      ref={ref}\n    />\n  );\n};\n\nconst BlockSuiteErrorFallback = (\n  props: FallbackProps & ErrorBoundaryProps\n): ReactElement => {\n  return (\n    <div>\n      <h1>Sorry.. there was an error</h1>\n      <div>{props.error.message}</div>\n      <button\n        data-testid=\"error-fallback-reset-button\"\n        onClick={() => {\n          props.onReset?.();\n          props.resetErrorBoundary();\n        }}\n      >\n        Try again\n      </button>\n    </div>\n  );\n};\n\nexport const BlockSuiteFallback = memo(function BlockSuiteFallback() {\n  return (\n    <div className={blockSuiteEditorStyle}>\n      <Skeleton\n        className={blockSuiteEditorHeaderStyle}\n        animation=\"wave\"\n        height={50}\n      />\n      <Skeleton animation=\"wave\" height={30} width=\"40%\" />\n    </div>\n  );\n});\n\nexport const BlockSuiteEditor = memo(function BlockSuiteEditor(\n  props: EditorProps & ErrorBoundaryProps\n): ReactElement {\n  return (\n    <ErrorBoundary\n      fallbackRender={useCallback(\n        (fallbackProps: FallbackProps) => (\n          <BlockSuiteErrorFallback {...fallbackProps} onReset={props.onReset} />\n        ),\n        [props.onReset]\n      )}\n    >\n      <Suspense fallback={<BlockSuiteFallback />}>\n        <BlockSuiteEditorImpl {...props} />\n      </Suspense>\n      {config.enableImagePreviewModal && props.page && (\n        <Suspense fallback={null}>\n          {createPortal(\n            <ImagePreviewModal\n              workspace={props.page.workspace}\n              pageId={props.page.id}\n            />,\n            document.body\n          )}\n        </Suspense>\n      )}\n    </ErrorBoundary>\n  );\n});\n\nBlockSuiteEditor.displayName = 'BlockSuiteEditor';\n","import type { Workspace } from '@blocksuite/store';\nimport { assertExists } from '@blocksuite/store';\nimport { useCallback, useEffect, useState } from 'react';\nimport useSWR from 'swr';\n\nexport function useBlockSuiteWorkspaceAvatarUrl(\n  blockSuiteWorkspace: Workspace\n) {\n  const [url, set] = useState(() => blockSuiteWorkspace.meta.avatar);\n  if (url !== blockSuiteWorkspace.meta.avatar) {\n    set(blockSuiteWorkspace.meta.avatar);\n  }\n  const { data: avatar, mutate } = useSWR(url, {\n    fetcher: async avatar => {\n      assertExists(blockSuiteWorkspace);\n      const blobs = await blockSuiteWorkspace.blobs;\n      const blob = await blobs.get(avatar);\n      if (blob) {\n        return URL.createObjectURL(blob);\n      }\n      return null;\n    },\n    suspense: true,\n    fallbackData: null,\n  });\n  const setAvatar = useCallback(\n    async (file: File) => {\n      assertExists(blockSuiteWorkspace);\n      const blob = new Blob([file], { type: file.type });\n      const blobs = await blockSuiteWorkspace.blobs;\n      const blobId = await blobs.set(blob);\n      blockSuiteWorkspace.meta.setAvatar(blobId);\n      await mutate(blobId);\n    },\n    [blockSuiteWorkspace, mutate]\n  );\n  useEffect(() => {\n    if (blockSuiteWorkspace) {\n      const dispose = blockSuiteWorkspace.meta.commonFieldsUpdated.on(() => {\n        set(blockSuiteWorkspace.meta.avatar);\n      });\n      return () => {\n        dispose.dispose();\n      };\n    }\n    return;\n  }, [blockSuiteWorkspace]);\n  return [avatar ?? null, setAvatar] as const;\n}\n","import { UNTITLED_WORKSPACE_NAME } from '@affine/env';\nimport type { Workspace } from '@blocksuite/store';\nimport { assertExists } from '@blocksuite/store';\nimport type { Atom, WritableAtom } from 'jotai';\nimport { atom, useAtom } from 'jotai';\n\nconst weakMap = new WeakMap<\n  Workspace,\n  WritableAtom<string, [string], void> & Atom<string>\n>();\n\nconst emptyWorkspaceNameAtom = atom(UNTITLED_WORKSPACE_NAME, () => {\n  console.warn('you cannot set the name of an null workspace.');\n  console.warn('this is a bug in the code.');\n});\n\nexport function useBlockSuiteWorkspaceName(\n  blockSuiteWorkspace: Workspace | null\n) {\n  let nameAtom:\n    | (WritableAtom<string, [string], void> & Atom<string>)\n    | undefined;\n  if (!blockSuiteWorkspace) {\n    nameAtom = emptyWorkspaceNameAtom;\n  } else if (!weakMap.has(blockSuiteWorkspace)) {\n    const baseAtom = atom<string>(\n      blockSuiteWorkspace.meta.name ?? UNTITLED_WORKSPACE_NAME\n    );\n    const writableAtom = atom(\n      get => get(baseAtom),\n      (get, set, name: string) => {\n        blockSuiteWorkspace.meta.setName(name);\n        set(baseAtom, name);\n      }\n    );\n    baseAtom.onMount = set => {\n      const dispose = blockSuiteWorkspace.meta.commonFieldsUpdated.on(() => {\n        set(blockSuiteWorkspace.meta.name ?? '');\n      });\n      return () => {\n        dispose.dispose();\n      };\n    };\n    weakMap.set(blockSuiteWorkspace, writableAtom);\n    nameAtom = writableAtom;\n  } else {\n    nameAtom = weakMap.get(blockSuiteWorkspace);\n    assertExists(nameAtom);\n  }\n  return useAtom(nameAtom);\n}\n","import type { Page, Workspace } from '@blocksuite/store';\nimport { assertExists, DisposableGroup } from '@blocksuite/store';\nimport type { Atom } from 'jotai';\nimport { atom, useAtomValue } from 'jotai';\n\nconst weakMap = new WeakMap<Workspace, Map<string, Atom<Page | null>>>();\n\nconst emptyAtom = atom<Page | null>(null);\n\nfunction getAtom(w: Workspace, pageId: string | null): Atom<Page | null> {\n  if (!pageId) {\n    return emptyAtom;\n  }\n  if (!weakMap.has(w)) {\n    weakMap.set(w, new Map());\n  }\n  const map = weakMap.get(w);\n  assertExists(map);\n  if (!map.has(pageId)) {\n    const baseAtom = atom(w.getPage(pageId));\n    baseAtom.onMount = set => {\n      const group = new DisposableGroup();\n      group.add(\n        w.slots.pageAdded.on(id => {\n          if (pageId === id) {\n            set(w.getPage(id));\n          }\n        })\n      );\n      group.add(\n        w.slots.pageRemoved.on(id => {\n          if (pageId === id) {\n            set(null);\n          }\n        })\n      );\n      return () => {\n        group.dispose();\n      };\n    };\n    map.set(pageId, baseAtom);\n    return baseAtom;\n  } else {\n    return map.get(pageId) as Atom<Page | null>;\n  }\n}\n\nexport function useBlockSuiteWorkspacePage(\n  blockSuiteWorkspace: Workspace,\n  pageId: string | null\n): Page | null {\n  const pageAtom = getAtom(blockSuiteWorkspace, pageId);\n  assertExists(pageAtom);\n  return useAtomValue(pageAtom);\n}\n","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin"],"names":["createPublicWorkspace","workspaceId","binary","singlePage","blockSuiteWorkspace","createEmptyBlockSuiteWorkspace","WorkspaceFlavour","workspaceApis","affineApis","cachePrefix","BlockSuiteWorkspace","doc","Uint8Array","Object","entries","config","forEach","key","value","param","awarenessStore","setFlag","flavour","id","providers","publicWorkspaceIdAtom","atom","publicWorkspacePageIdAtom","publicPageBlockSuiteAtom","get","pageId","publicWorkspaceAtom","weakMap","WeakMap","EditorWrapper","memo","pageSetting","workspace","onInit","onLoad","isPublic","affinePluginsMap","useAtomValue","affinePluginsAtom","plugins","useMemo","values","page","useBlockSuiteWorkspacePage","PageNotFoundError","meta","useBlockSuitePageMeta","find","pageSettingAtom","pageSettingFamily","currentMode","mode","DEFAULT_HELLO_WORLD_PAGE_ID","setEditor","useSetAtom","rootCurrentEditorAtom","assertExists","emotion_react_jsx_runtime_browser_esm","tZ","Editor","style","height","useCallback","editor","startTransition","setPageMeta","updatedDate","Date","now","localStorage","setItem","dispose","uiDecorators","map","plugin","blockSuiteAdapter","uiDecorator","filter","Boolean","ui","disposes","fn","concat","PluginContentAdapter","detailContent","div","className","contentLayoutAtom","LayoutPanel","props","node","BX","PanelGroup","direction","Panel","defaultSize","splitPercentage","Suspense","first","editorProps","PanelResizeHandle","second","definition","Content","uiAdapter","PageDetailEditor","title","useBlockSuiteWorkspacePageTitle","titleAtom","getAtom","w","has","set","Map","baseAtom","getPage","onMount","disposable","pageMetasUpdated","on","layout","HY","Head","styled","width","background","marginRight","marginLeft","p","fontSize","displayFlex","svg","flexShrink","span","flexGrow","textEllipsis","fontWeight","lineHeight","marginBottom","maxWidth","StyledFooter","padding","StyleUserInfo","textAlign","flex","color","marginTop","overflow","flexWrap","borderRadius","border","transition","position","left","top","StyledSignInButton","Button","paddingLeft","backgroundColor","displayInlineFlex","Footer","user","onLogin","onLogout","t","useAFFiNEI18N","setOpen","openDisableCloudAlertModalAtom","data-testid","FlexWrapper","WorkspaceAvatar","size","name","avatar","avatar_url","email","Tooltip","content","disablePortal","IconButton","onClick","SignOutIcon","noBorder","bold","icon","CloudWorkspaceIcon","forwardRef","ref","sizeStr","display","verticalAlign","picture","img","src","alt","referrerPolicy","Math","ceil","stringToColour","substring","useRouterTitle","router","isReady","query","pathname","startsWith","subPath","split","at","WorkspaceSubPathName","QuickSearchModal","lazy","Promise","all","__webpack_require__","e","then","bind","module","default","PublicQuickSearch","useRouter","openQuickSearchModal","setOpenQuickSearchModalAtom","useAtom","openQuickSearchModalAtom","_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__","open","PublicWorkspaceLayoutInner","AppContainer","MainContainer","children","PublicWorkspaceLayout","NavContainer","StyledBreadcrumbs","Link","PublicWorkspaceDetailPageInner","publicWorkspace","openPage","useRouterHelper","useBlockSuiteWorkspaceName","useBlockSuiteWorkspaceAvatarUrl","pageTitle","getPageMeta","_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__","BlockSuiteEditorHeader","currentPage","Breadcrumbs","href","PageIcon","_","setReadonly","slots","pageLinkClicked","initEmptyPage","PublicWorkspaceDetailPage","setWorkspaceId","setPageId","useEffect","fallback","PageLoading","__webpack_exports__","getLayout","ImagePreviewModal","BlockSuiteEditorImpl","JotaiEditorContainer","editorContainerModuleAtom","editorRef","useRef","blockHubRef","current","autofocus","globalThis","currentEditor","root","push","container","getFlag","createBlockHub","blockHub","remove","toolWrapper","document","querySelector","appendChild","console","warn","catch","err","error","removeChild","BlockSuiteErrorFallback","h1","message","button","onReset","resetErrorBoundary","BlockSuiteFallback","Skeleton","animation","BlockSuiteEditor","ErrorBoundary","fallbackRender","fallbackProps","createPortal","body","displayName","url","useState","data","mutate","useSWR","fetcher","blobs","blob","URL","createObjectURL","suspense","fallbackData","setAvatar","file","Blob","type","blobId","commonFieldsUpdated","emptyWorkspaceNameAtom","UNTITLED_WORKSPACE_NAME","nameAtom","writableAtom","setName","emptyAtom","pageAtom","group","DisposableGroup","add","pageAdded","pageRemoved"],"sourceRoot":""}